{"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.19.3:development":{"value":{"code":"import express from \"express\";\nimport config from \"./config\";\nconsole.log(config.port);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwiY29uZmlnIiwiY29uc29sZSIsImxvZyIsInBvcnQiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGNvbmZpZyBmcm9tIFwiLi9jb25maWdcIjtcblxuXG5cbmNvbnNvbGUubG9nIChjb25maWcucG9ydCk7XG5cbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsT0FBTyxNQUFNLFNBQVM7QUFDN0IsT0FBT0MsTUFBTSxNQUFNLFVBQVU7QUFJN0JDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFRixNQUFNLENBQUNHLElBQUksQ0FBQyJ9","map":{"version":3,"names":["express","config","console","log","port"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/","sources":["server.js"],"sourcesContent":["import express from \"express\";\nimport config from \"./config\";\n\n\n\nconsole.log (config.port);\n\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,SAAS;AAC7B,OAAOC,MAAM,MAAM,UAAU;AAI7BC,OAAO,CAACC,GAAG,CAAEF,MAAM,CAACG,IAAI,CAAC"}},"mtime":1665993427634},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _citas = _interopRequireDefault(require(\"./routes/citas.routes\"));\nvar _encuestas = _interopRequireDefault(require(\"./routes/encuestas.routes\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst bodyParser = require('body-parser');\nconst cors = require(\"cors\");\nconst logger = require('morgan');\nconst app = (0, _express.default)();\napp.use(bodyParser.urlencoded({\n  extended: false\n}));\napp.use(bodyParser.json());\napp.use(logger('combined'));\napp.use(function (req, res, next) {\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\n  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n  res.header('Access-Control-Allow-Methods', 'PUT, POST, GET, DELETE, OPTIONS');\n  next();\n});\nlet port = process.env.PORT;\napp.use(_citas.default);\napp.use(_encuestas.default);\napp.use(cors);\napp.set(\"port\", port);\nvar _default = app;\nexports.default = _default;\napp.listen(process.env.PORT);\nconsole.log(\"Server listening on port \" + port);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJib2R5UGFyc2VyIiwicmVxdWlyZSIsImNvcnMiLCJsb2dnZXIiLCJhcHAiLCJleHByZXNzIiwidXNlIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwianNvbiIsInJlcSIsInJlcyIsIm5leHQiLCJoZWFkZXIiLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJjaXRhc1JvdXRlciIsImVuY3Vlc3Rhc1JvdXRlciIsInNldCIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5cbmltcG9ydCBjaXRhc1JvdXRlciBmcm9tIFwiLi9yb3V0ZXMvY2l0YXMucm91dGVzXCJcbmltcG9ydCBlbmN1ZXN0YXNSb3V0ZXIgZnJvbSBcIi4vcm91dGVzL2VuY3Vlc3Rhcy5yb3V0ZXNcIlxuXG5jb25zdCBib2R5UGFyc2VyPXJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG5jb25zdCBjb3JzID0gcmVxdWlyZShcImNvcnNcIilcbmNvbnN0IGxvZ2dlcj1yZXF1aXJlKCdtb3JnYW4nKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcyAoKTtcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHtleHRlbmRlZDpmYWxzZX0pKTtcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuYXBwLnVzZShsb2dnZXIoJ2NvbWJpbmVkJykpO1xuXG5hcHAudXNlKGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuXHRyZXMuaGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCIsIFwiKlwiKTtcblx0cmVzLmhlYWRlcihcblx0XHRcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIixcblx0XHRcIk9yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHRcIlxuXHQpO1xuXHRyZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ1BVVCwgUE9TVCwgR0VULCBERUxFVEUsIE9QVElPTlMnKTtcblx0bmV4dCgpO1xufSk7XG5cbmxldCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVDtcbmFwcC51c2UoY2l0YXNSb3V0ZXIpO1xuYXBwLnVzZShlbmN1ZXN0YXNSb3V0ZXIpO1xuXG5hcHAudXNlKGNvcnMpO1xuYXBwLnNldChcInBvcnRcIixwb3J0KTtcblxuZXhwb3J0IGRlZmF1bHQgYXBwO1xuXG5hcHAubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQpO1xuXG5jb25zb2xlLmxvZyAoXCJTZXJ2ZXIgbGlzdGVuaW5nIG9uIHBvcnQgXCIgKyBwb3J0KTtcblxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBO0FBRUE7QUFDQTtBQUF1RDtBQUV2RCxNQUFNQSxVQUFVLEdBQUNDLE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDdkMsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1FLE1BQU0sR0FBQ0YsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUU5QixNQUFNRyxHQUFHLEdBQUcsSUFBQUMsZ0JBQU8sR0FBRztBQUN0QkQsR0FBRyxDQUFDRSxHQUFHLENBQUNOLFVBQVUsQ0FBQ08sVUFBVSxDQUFDO0VBQUNDLFFBQVEsRUFBQztBQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ2hESixHQUFHLENBQUNFLEdBQUcsQ0FBQ04sVUFBVSxDQUFDUyxJQUFJLEVBQUUsQ0FBQztBQUMxQkwsR0FBRyxDQUFDRSxHQUFHLENBQUNILE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUUzQkMsR0FBRyxDQUFDRSxHQUFHLENBQUMsVUFBVUksR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtFQUNqQ0QsR0FBRyxDQUFDRSxNQUFNLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxDQUFDO0VBQzlDRixHQUFHLENBQUNFLE1BQU0sQ0FDVCw4QkFBOEIsRUFDOUIsZ0RBQWdELENBQ2hEO0VBQ0RGLEdBQUcsQ0FBQ0UsTUFBTSxDQUFDLDhCQUE4QixFQUFFLGlDQUFpQyxDQUFDO0VBQzdFRCxJQUFJLEVBQUU7QUFDUCxDQUFDLENBQUM7QUFFRixJQUFJRSxJQUFJLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxJQUFJO0FBQzNCYixHQUFHLENBQUNFLEdBQUcsQ0FBQ1ksY0FBVyxDQUFDO0FBQ3BCZCxHQUFHLENBQUNFLEdBQUcsQ0FBQ2Esa0JBQWUsQ0FBQztBQUV4QmYsR0FBRyxDQUFDRSxHQUFHLENBQUNKLElBQUksQ0FBQztBQUNiRSxHQUFHLENBQUNnQixHQUFHLENBQUMsTUFBTSxFQUFDTixJQUFJLENBQUM7QUFBQyxlQUVOVixHQUFHO0FBQUE7QUFFbEJBLEdBQUcsQ0FBQ2lCLE1BQU0sQ0FBQ04sT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUksQ0FBQztBQUU1QkssT0FBTyxDQUFDQyxHQUFHLENBQUUsMkJBQTJCLEdBQUdULElBQUksQ0FBQyJ9","map":{"version":3,"names":["bodyParser","require","cors","logger","app","express","use","urlencoded","extended","json","req","res","next","header","port","process","env","PORT","citasRouter","encuestasRouter","set","listen","console","log"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/","sources":["server.js"],"sourcesContent":["\nimport express from \"express\";\n\nimport citasRouter from \"./routes/citas.routes\"\nimport encuestasRouter from \"./routes/encuestas.routes\"\n\nconst bodyParser=require('body-parser');\nconst cors = require(\"cors\")\nconst logger=require('morgan');\n\nconst app = express ();\napp.use(bodyParser.urlencoded({extended:false}));\napp.use(bodyParser.json());\napp.use(logger('combined'));\n\napp.use(function (req, res, next) {\n\tres.header(\"Access-Control-Allow-Origin\", \"*\");\n\tres.header(\n\t\t\"Access-Control-Allow-Headers\",\n\t\t\"Origin, X-Requested-With, Content-Type, Accept\"\n\t);\n\tres.header('Access-Control-Allow-Methods', 'PUT, POST, GET, DELETE, OPTIONS');\n\tnext();\n});\n\nlet port = process.env.PORT;\napp.use(citasRouter);\napp.use(encuestasRouter);\n\napp.use(cors);\napp.set(\"port\",port);\n\nexport default app;\n\napp.listen(process.env.PORT);\n\nconsole.log (\"Server listening on port \" + port);\n\n\n"],"mappings":";;;;;;AACA;AAEA;AACA;AAAuD;AAEvD,MAAMA,UAAU,GAACC,OAAO,CAAC,aAAa,CAAC;AACvC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,MAAM,GAACF,OAAO,CAAC,QAAQ,CAAC;AAE9B,MAAMG,GAAG,GAAG,IAAAC,gBAAO,GAAG;AACtBD,GAAG,CAACE,GAAG,CAACN,UAAU,CAACO,UAAU,CAAC;EAACC,QAAQ,EAAC;AAAK,CAAC,CAAC,CAAC;AAChDJ,GAAG,CAACE,GAAG,CAACN,UAAU,CAACS,IAAI,EAAE,CAAC;AAC1BL,GAAG,CAACE,GAAG,CAACH,MAAM,CAAC,UAAU,CAAC,CAAC;AAE3BC,GAAG,CAACE,GAAG,CAAC,UAAUI,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACjCD,GAAG,CAACE,MAAM,CAAC,6BAA6B,EAAE,GAAG,CAAC;EAC9CF,GAAG,CAACE,MAAM,CACT,8BAA8B,EAC9B,gDAAgD,CAChD;EACDF,GAAG,CAACE,MAAM,CAAC,8BAA8B,EAAE,iCAAiC,CAAC;EAC7ED,IAAI,EAAE;AACP,CAAC,CAAC;AAEF,IAAIE,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI;AAC3Bb,GAAG,CAACE,GAAG,CAACY,cAAW,CAAC;AACpBd,GAAG,CAACE,GAAG,CAACa,kBAAe,CAAC;AAExBf,GAAG,CAACE,GAAG,CAACJ,IAAI,CAAC;AACbE,GAAG,CAACgB,GAAG,CAAC,MAAM,EAACN,IAAI,CAAC;AAAC,eAENV,GAAG;AAAA;AAElBA,GAAG,CAACiB,MAAM,CAACN,OAAO,CAACC,GAAG,CAACC,IAAI,CAAC;AAE5BK,OAAO,CAACC,GAAG,CAAE,2BAA2B,GAAGT,IAAI,CAAC"}},"mtime":1666276160336},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = require(\"dotenv\");\n(0, _dotenv.config)();\nvar _default = {\n  port: process.env.PORT\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy8iLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2NvbmZpZ30gZnJvbSBcImRvdGVudlwiO1xuXG5jb25maWcoKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHBvcnQ6IHByb2Nlc3MuZW52LlBPUlRcbiAgICBcblxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFFQSxJQUFBQSxjQUFNLEdBQUU7QUFBQyxlQUVNO0VBQ1hDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDO0FBR3RCLENBQUM7QUFBQSJ9","map":{"version":3,"names":["config","port","process","env","PORT"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/","sources":["config.js"],"sourcesContent":["import {config} from \"dotenv\";\n\nconfig();\n\nexport default {\n    port: process.env.PORT\n    \n\n}"],"mappings":";;;;;;AAAA;AAEA,IAAAA,cAAM,GAAE;AAAC,eAEM;EACXC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC;AAGtB,CAAC;AAAA"}},"mtime":1665997615203},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/citas.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _auth = _interopRequireDefault(require(\"./auth\"));\nvar _citas = require(\"../controllers/citas.controller\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar express = require('express');\nconst router = express.Router();\nrouter.get('/api/idrus/citas/', (0, _auth.default)(), _citas.getCitasCEX);\nrouter.get('/api/idrus/pruebas/', (0, _auth.default)(), _citas.getCitasPr);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImdldCIsImF1dGgiLCJnZXRDaXRhc0NFWCIsImdldENpdGFzUHIiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy9yb3V0ZXMvIiwic291cmNlcyI6WyJjaXRhcy5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgYXV0aCBmcm9tIFwiLi9hdXRoXCI7XG5cbmltcG9ydCB7Z2V0Q2l0YXNDRVgsIGdldENpdGFzUHJ9IGZyb20gJy4uL2NvbnRyb2xsZXJzL2NpdGFzLmNvbnRyb2xsZXInXG5cbnZhciBleHByZXNzID0gcmVxdWlyZSAoJ2V4cHJlc3MnKTtcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuXG5yb3V0ZXIuZ2V0KCcvYXBpL2lkcnVzL2NpdGFzLycsIGF1dGgoKSwgIGdldENpdGFzQ0VYKTtcbnJvdXRlci5nZXQoJy9hcGkvaWRydXMvcHJ1ZWJhcy8nLCBhdXRoKCksICBnZXRDaXRhc1ByKTtcblxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUVBO0FBQXVFO0FBRXZFLElBQUlBLE9BQU8sR0FBR0MsT0FBTyxDQUFFLFNBQVMsQ0FBQztBQUVqQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBTSxFQUFFO0FBRy9CRCxNQUFNLENBQUNFLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxJQUFBQyxhQUFJLEdBQUUsRUFBR0Msa0JBQVcsQ0FBQztBQUNyREosTUFBTSxDQUFDRSxHQUFHLENBQUMscUJBQXFCLEVBQUUsSUFBQUMsYUFBSSxHQUFFLEVBQUdFLGlCQUFVLENBQUM7QUFBQyxlQUd4Q0wsTUFBTTtBQUFBIn0=","map":{"version":3,"names":["express","require","router","Router","get","auth","getCitasCEX","getCitasPr"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["citas.routes.js"],"sourcesContent":["\nimport auth from \"./auth\";\n\nimport {getCitasCEX, getCitasPr} from '../controllers/citas.controller'\n\nvar express = require ('express');\n\nconst router = express.Router();\n\n\nrouter.get('/api/idrus/citas/', auth(),  getCitasCEX);\nrouter.get('/api/idrus/pruebas/', auth(),  getCitasPr);\n\n\nexport default router;\n\n\n"],"mappings":";;;;;;AACA;AAEA;AAAuE;AAEvE,IAAIA,OAAO,GAAGC,OAAO,CAAE,SAAS,CAAC;AAEjC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,EAAE;AAG/BD,MAAM,CAACE,GAAG,CAAC,mBAAmB,EAAE,IAAAC,aAAI,GAAE,EAAGC,kBAAW,CAAC;AACrDJ,MAAM,CAACE,GAAG,CAAC,qBAAqB,EAAE,IAAAC,aAAI,GAAE,EAAGE,iBAAU,CAAC;AAAC,eAGxCL,MAAM;AAAA"}},"mtime":1666274277478},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/encuestas.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _auth = _interopRequireDefault(require(\"./auth\"));\nvar _encuestas = require(\"../controllers/encuestas.controller\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar express = require('express');\nconst router = express.Router();\nrouter.get('/api/idrus/encuestas/Hosp', (0, _auth.default)(), _encuestas.getEncuestasHosp);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImdldCIsImF1dGgiLCJnZXRFbmN1ZXN0YXNIb3NwIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9jMDctYWRtaW5pc3RyYWRvci9qcy9vcmFjbGUvYmFja2VuZHMvaWRydXMvcm91dGVzLyIsInNvdXJjZXMiOlsiZW5jdWVzdGFzLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBhdXRoIGZyb20gXCIuL2F1dGhcIjtcblxuaW1wb3J0IHtnZXRFbmN1ZXN0YXNIb3NwfSBmcm9tICcuLi9jb250cm9sbGVycy9lbmN1ZXN0YXMuY29udHJvbGxlcidcblxudmFyIGV4cHJlc3MgPSByZXF1aXJlICgnZXhwcmVzcycpO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5cbnJvdXRlci5nZXQoJy9hcGkvaWRydXMvZW5jdWVzdGFzL0hvc3AnLCBhdXRoKCksICBnZXRFbmN1ZXN0YXNIb3NwKTtcblxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0E7QUFFQTtBQUFvRTtBQUVwRSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBRSxTQUFTLENBQUM7QUFFakMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0sRUFBRTtBQUcvQkQsTUFBTSxDQUFDRSxHQUFHLENBQUMsMkJBQTJCLEVBQUUsSUFBQUMsYUFBSSxHQUFFLEVBQUdDLDJCQUFnQixDQUFDO0FBQUMsZUFHcERKLE1BQU07QUFBQSJ9","map":{"version":3,"names":["express","require","router","Router","get","auth","getEncuestasHosp"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["encuestas.routes.js"],"sourcesContent":["\nimport auth from \"./auth\";\n\nimport {getEncuestasHosp} from '../controllers/encuestas.controller'\n\nvar express = require ('express');\n\nconst router = express.Router();\n\n\nrouter.get('/api/idrus/encuestas/Hosp', auth(),  getEncuestasHosp);\n\n\nexport default router;\n\n"],"mappings":";;;;;;AACA;AAEA;AAAoE;AAEpE,IAAIA,OAAO,GAAGC,OAAO,CAAE,SAAS,CAAC;AAEjC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,EAAE;AAG/BD,MAAM,CAACE,GAAG,CAAC,2BAA2B,EAAE,IAAAC,aAAI,GAAE,EAAGC,2BAAgB,CAAC;AAAC,eAGpDJ,MAAM;AAAA"}},"mtime":1666276160336},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/citas.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCitasPr = exports.getCitasCEX = void 0;\nvar _oracledb = _interopRequireDefault(require(\"oracledb\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar oracle = require('../database/connection.js');\nfunction fechaValida(fecha) {\n  if (fecha.length !== 8) {\n    return false;\n  }\n  const eje = fecha.substr(0, 4);\n  const mes = fecha.substr(4, 2);\n  const dia = fecha.substr(6, 2);\n  console.log(dia + '/' + mes + '/' + eje);\n  var date = (0, _moment.default)(fecha, 'YYYYMMDD');\n  if (date.isValid()) return true;\n  return false;\n}\nconst getCitasCEX = async (req, res, next) => {\n  //Validar fecha \n\n  var fecha = req.query.fecha;\n  if (fecha === undefined || !fechaValida(fecha)) {\n    res.writeHead(500, {\n      'Content-Type': 'application/json'\n    });\n    res.end(JSON.stringify({\n      status: 500,\n      message: \"Fecha Erronea\",\n      detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n    }));\n  } else {\n    const eje = fecha.substr(0, 4);\n    const mes = fecha.substr(4, 2);\n    const dia = fecha.substr(6, 2);\n    const fechacita = dia + '/' + mes + '/' + eje;\n    var fechacitamasuno;\n    var d = new Date(eje + '-' + mes + '-' + dia);\n    d.setDate(d.getDate() + 1);\n    fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' + ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_cex_dias WHERE fecha_cita > to_date(:fechacita,'DD/MM/YYYY') AND fecha_cita < to_date(:fechacitamasuno,'DD/MM/YYYY')\", [fechacita, fechacitamasuno], {\n      outFormat: _oracledb.default.OBJECT\n    }, function (err, result) {\n      if (err) {\n        console.log('Error el ejecutar la query:' + err.message);\n        res.writeHead(500, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify({\n          status: 500,\n          message: \"Error private things\",\n          detailed_message: err.message\n        }));\n      } else {\n        res.writeHead(200, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify(result.rows));\n      }\n    });\n  }\n};\nexports.getCitasCEX = getCitasCEX;\nconst getCitasPr = async (req, res, next) => {\n  //Validar fecha \n\n  var fecha = req.query.fecha;\n  if (fecha === undefined || !fechaValida(fecha)) {\n    res.writeHead(500, {\n      'Content-Type': 'application/json'\n    });\n    res.end(JSON.stringify({\n      status: 500,\n      message: \"Fecha Erronea\",\n      detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n    }));\n  } else {\n    const eje = fecha.substr(0, 4);\n    const mes = fecha.substr(4, 2);\n    const dia = fecha.substr(6, 2);\n    const fechacita = dia + '/' + mes + '/' + eje;\n    var fechacitamasuno;\n    var d = new Date(eje + '-' + mes + '-' + dia);\n    d.setDate(d.getDate() + 1);\n    fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' + ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Pr_dias WHERE fecha_cita > to_date(:fechacita,'DD/MM/YYYY') AND fecha_cita < to_date(:fechacitamasuno,'DD/MM/YYYY')\", [fechacita, fechacitamasuno], {\n      outFormat: _oracledb.default.OBJECT\n    }, function (err, result) {\n      if (err) {\n        console.log('Error el ejecutar la query:' + err.message);\n        res.writeHead(500, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify({\n          status: 500,\n          message: \"Error private things\",\n          detailed_message: err.message\n        }));\n      } else {\n        res.writeHead(200, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify(result.rows));\n      }\n    });\n  }\n};\nexports.getCitasPr = getCitasPr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmFjbGUiLCJyZXF1aXJlIiwiZmVjaGFWYWxpZGEiLCJmZWNoYSIsImxlbmd0aCIsImVqZSIsInN1YnN0ciIsIm1lcyIsImRpYSIsImNvbnNvbGUiLCJsb2ciLCJkYXRlIiwibW9tZW50IiwiaXNWYWxpZCIsImdldENpdGFzQ0VYIiwicmVxIiwicmVzIiwibmV4dCIsInF1ZXJ5IiwidW5kZWZpbmVkIiwid3JpdGVIZWFkIiwiZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsIm1lc3NhZ2UiLCJkZXRhaWxlZF9tZXNzYWdlIiwiZmVjaGFjaXRhIiwiZmVjaGFjaXRhbWFzdW5vIiwiZCIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInNsaWNlIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsInBvb2wiLCJnZXRDb25uZWN0aW9uIiwiZXhlY3V0ZSIsIm91dEZvcm1hdCIsIm9yYWNsZWRiIiwiT0JKRUNUIiwiZXJyIiwicmVzdWx0Iiwicm93cyIsImdldENpdGFzUHIiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImNpdGFzLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG9yYWNsZWRiIGZyb20gJ29yYWNsZWRiJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxudmFyIG9yYWNsZSA9ICByZXF1aXJlKCcuLi9kYXRhYmFzZS9jb25uZWN0aW9uLmpzJylcblxuZnVuY3Rpb24gZmVjaGFWYWxpZGEoZmVjaGEpIHtcblxuICAgIGlmKGZlY2hhLmxlbmd0aCAhPT0gOCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgZWplID0gZmVjaGEuc3Vic3RyKDAsNCk7XG4gICAgY29uc3QgbWVzID0gZmVjaGEuc3Vic3RyKDQsMik7XG4gICAgY29uc3QgZGlhID0gZmVjaGEuc3Vic3RyKDYsMik7XG5cbiAgICBjb25zb2xlLmxvZyhkaWEgKyAnLycgKyBtZXMgKyAnLycgKyBlamUpXG5cbiAgICB2YXIgZGF0ZSA9IG1vbWVudChmZWNoYSwnWVlZWU1NREQnKTtcbiAgICBcbiAgICBpZiAoZGF0ZS5pc1ZhbGlkKCkpIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuXG59XG5cbmV4cG9ydCBjb25zdCBnZXRDaXRhc0NFWCA9IGFzeW5jKHJlcSwgcmVzLCBuZXh0KSA9PntcbiAgIFxuICAgIC8vVmFsaWRhciBmZWNoYSBcbiBcbiAgICB2YXIgZmVjaGEgPSByZXEucXVlcnkuZmVjaGE7XG4gIFxuXG4gICAgaWYgKGZlY2hhID09PXVuZGVmaW5lZCB8fCAhZmVjaGFWYWxpZGEoZmVjaGEpKSB7XG4gICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOlwiRmVjaGEgRXJyb25lYVwiLFxuICAgICAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IFwiSW50cm9kdXpjYSB1bmEgZmVjaGEgdsOhbGlkYSAoWVlZWU1NREQpXCJcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgXG4gICAgfSBlbHNlIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGVqZSA9IGZlY2hhLnN1YnN0cigwLDQpO1xuICAgICAgICBjb25zdCBtZXMgPSBmZWNoYS5zdWJzdHIoNCwyKTtcbiAgICAgICAgY29uc3QgZGlhID0gZmVjaGEuc3Vic3RyKDYsMik7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmZWNoYWNpdGEgPSBkaWEgKyAnLycgKyBtZXMgKyAnLycgKyBlamU7XG4gICAgICAgIHZhciBmZWNoYWNpdGFtYXN1bm87XG5cbiAgICBcbiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShlamUgKyAnLScgKyBtZXMgKyAnLScgKyBkaWEpXG4gICAgICAgIGQuc2V0RGF0ZShkLmdldERhdGUoKSArIDEpXG4gICAgICAgIGZlY2hhY2l0YW1hc3VubyA9ICgnMCcgKyBkLmdldERhdGUoKSkuc2xpY2UoLTIpICsgJy8nICsgICgnMCcgKyAoZC5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKSArICcvJyArIGQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgXG5cbiAgICAgICAgY29uc3QgcG9vbCA9IGF3YWl0IG9yYWNsZS5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgIHBvb2wuZXhlY3V0ZShcIlNFTEVDVCAqIEZST00gVjA3X0lkcnVzX2NleF9kaWFzIFdIRVJFIGZlY2hhX2NpdGEgPiB0b19kYXRlKDpmZWNoYWNpdGEsJ0REL01NL1lZWVknKSBBTkQgZmVjaGFfY2l0YSA8IHRvX2RhdGUoOmZlY2hhY2l0YW1hc3VubywnREQvTU0vWVlZWScpXCIgLFtmZWNoYWNpdGEsIGZlY2hhY2l0YW1hc3Vub10sIHtvdXRGb3JtYXQ6IG9yYWNsZWRiLk9CSkVDVH0sIFxuICAgICAgICBmdW5jdGlvbihlcnIscmVzdWx0KSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nICgnRXJyb3IgZWwgZWplY3V0YXIgbGEgcXVlcnk6JyArIGVyci5tZXNzYWdlKVxuICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6NTAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6XCJFcnJvciBwcml2YXRlIHRoaW5nc1wiLFxuICAgICAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoMjAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeShyZXN1bHQucm93cykpO1xuICAgICAgICB9XG4gICAgfVxuICAgICk7XG59IFxufVxuXG5cbmV4cG9ydCBjb25zdCBnZXRDaXRhc1ByID0gYXN5bmMocmVxLCByZXMsIG5leHQpID0+e1xuICAgXG4gICAgLy9WYWxpZGFyIGZlY2hhIFxuIFxuICAgIHZhciBmZWNoYSA9IHJlcS5xdWVyeS5mZWNoYTtcbiAgXG5cbiAgICBpZiAoZmVjaGEgPT09dW5kZWZpbmVkIHx8ICFmZWNoYVZhbGlkYShmZWNoYSkpIHtcbiAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6NTAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6XCJGZWNoYSBFcnJvbmVhXCIsXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRfbWVzc2FnZTogXCJJbnRyb2R1emNhIHVuYSBmZWNoYSB2w6FsaWRhIChZWVlZTU1ERClcIlxuICAgICAgICAgICAgfSkpO1xuICAgICAgICBcbiAgICB9IGVsc2Uge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZWplID0gZmVjaGEuc3Vic3RyKDAsNCk7XG4gICAgICAgIGNvbnN0IG1lcyA9IGZlY2hhLnN1YnN0cig0LDIpO1xuICAgICAgICBjb25zdCBkaWEgPSBmZWNoYS5zdWJzdHIoNiwyKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZlY2hhY2l0YSA9IGRpYSArICcvJyArIG1lcyArICcvJyArIGVqZTtcbiAgICAgICAgdmFyIGZlY2hhY2l0YW1hc3VubztcblxuICAgIFxuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKGVqZSArICctJyArIG1lcyArICctJyArIGRpYSlcbiAgICAgICAgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgMSlcbiAgICAgICAgZmVjaGFjaXRhbWFzdW5vID0gKCcwJyArIGQuZ2V0RGF0ZSgpKS5zbGljZSgtMikgKyAnLycgKyAgKCcwJyArIChkLmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICsgJy8nICsgZC5nZXRGdWxsWWVhcigpO1xuICAgICAgICBcblxuICAgICAgICBjb25zdCBwb29sID0gYXdhaXQgb3JhY2xlLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgcG9vbC5leGVjdXRlKFwiU0VMRUNUICogRlJPTSBWMDdfSWRydXNfUHJfZGlhcyBXSEVSRSBmZWNoYV9jaXRhID4gdG9fZGF0ZSg6ZmVjaGFjaXRhLCdERC9NTS9ZWVlZJykgQU5EIGZlY2hhX2NpdGEgPCB0b19kYXRlKDpmZWNoYWNpdGFtYXN1bm8sJ0REL01NL1lZWVknKVwiICxbZmVjaGFjaXRhLCBmZWNoYWNpdGFtYXN1bm9dLCB7b3V0Rm9ybWF0OiBvcmFjbGVkYi5PQkpFQ1R9LCBcbiAgICAgICAgZnVuY3Rpb24oZXJyLHJlc3VsdCkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyAoJ0Vycm9yIGVsIGVqZWN1dGFyIGxhIHF1ZXJ5OicgKyBlcnIubWVzc2FnZSlcbiAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOlwiRXJyb3IgcHJpdmF0ZSB0aGluZ3NcIixcbiAgICAgICAgICAgICAgICBkZXRhaWxlZF9tZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXMud3JpdGVIZWFkKDIwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkocmVzdWx0LnJvd3MpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICApO1xufSBcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUE0QjtBQUU1QixJQUFJQSxNQUFNLEdBQUlDLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztBQUVsRCxTQUFTQyxXQUFXLENBQUNDLEtBQUssRUFBRTtFQUV4QixJQUFHQSxLQUFLLENBQUNDLE1BQU0sS0FBSyxDQUFDLEVBQUU7SUFDbkIsT0FBTyxLQUFLO0VBQ2hCO0VBQ0EsTUFBTUMsR0FBRyxHQUFHRixLQUFLLENBQUNHLE1BQU0sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0VBQzdCLE1BQU1DLEdBQUcsR0FBR0osS0FBSyxDQUFDRyxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztFQUM3QixNQUFNRSxHQUFHLEdBQUdMLEtBQUssQ0FBQ0csTUFBTSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7RUFFN0JHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixHQUFHLEdBQUcsR0FBRyxHQUFHRCxHQUFHLEdBQUcsR0FBRyxHQUFHRixHQUFHLENBQUM7RUFFeEMsSUFBSU0sSUFBSSxHQUFHLElBQUFDLGVBQU0sRUFBQ1QsS0FBSyxFQUFDLFVBQVUsQ0FBQztFQUVuQyxJQUFJUSxJQUFJLENBQUNFLE9BQU8sRUFBRSxFQUFFLE9BQU8sSUFBSTtFQUUvQixPQUFPLEtBQUs7QUFFaEI7QUFFTyxNQUFNQyxXQUFXLEdBQUcsT0FBTUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSTtFQUUvQzs7RUFFQSxJQUFJZCxLQUFLLEdBQUdZLEdBQUcsQ0FBQ0csS0FBSyxDQUFDZixLQUFLO0VBRzNCLElBQUlBLEtBQUssS0FBSWdCLFNBQVMsSUFBSSxDQUFDakIsV0FBVyxDQUFDQyxLQUFLLENBQUMsRUFBRTtJQUMzQ2EsR0FBRyxDQUFDSSxTQUFTLENBQUMsR0FBRyxFQUFFO01BQUMsY0FBYyxFQUFFO0lBQWtCLENBQUMsQ0FBQztJQUNwREosR0FBRyxDQUFDSyxHQUFHLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO01BQ25CQyxNQUFNLEVBQUMsR0FBRztNQUNWQyxPQUFPLEVBQUMsZUFBZTtNQUN2QkMsZ0JBQWdCLEVBQUU7SUFDdEIsQ0FBQyxDQUFDLENBQUM7RUFFWCxDQUFDLE1BQU07SUFFSCxNQUFNckIsR0FBRyxHQUFHRixLQUFLLENBQUNHLE1BQU0sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzdCLE1BQU1DLEdBQUcsR0FBR0osS0FBSyxDQUFDRyxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUM3QixNQUFNRSxHQUFHLEdBQUdMLEtBQUssQ0FBQ0csTUFBTSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7SUFFN0IsTUFBTXFCLFNBQVMsR0FBR25CLEdBQUcsR0FBRyxHQUFHLEdBQUdELEdBQUcsR0FBRyxHQUFHLEdBQUdGLEdBQUc7SUFDN0MsSUFBSXVCLGVBQWU7SUFHbkIsSUFBSUMsQ0FBQyxHQUFHLElBQUlDLElBQUksQ0FBQ3pCLEdBQUcsR0FBRyxHQUFHLEdBQUdFLEdBQUcsR0FBRyxHQUFHLEdBQUdDLEdBQUcsQ0FBQztJQUM3Q3FCLENBQUMsQ0FBQ0UsT0FBTyxDQUFDRixDQUFDLENBQUNHLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxQkosZUFBZSxHQUFHLENBQUMsR0FBRyxHQUFHQyxDQUFDLENBQUNHLE9BQU8sRUFBRSxFQUFFQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUksQ0FBQyxHQUFHLElBQUlKLENBQUMsQ0FBQ0ssUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUVELEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBR0osQ0FBQyxDQUFDTSxXQUFXLEVBQUU7SUFHckgsTUFBTUMsSUFBSSxHQUFHLE1BQU1wQyxNQUFNLENBQUNxQyxhQUFhLEVBQUU7SUFDekNELElBQUksQ0FBQ0UsT0FBTyxDQUFDLDhJQUE4SSxFQUFFLENBQUNYLFNBQVMsRUFBRUMsZUFBZSxDQUFDLEVBQUU7TUFBQ1csU0FBUyxFQUFFQyxpQkFBUSxDQUFDQztJQUFNLENBQUMsRUFDdk4sVUFBU0MsR0FBRyxFQUFDQyxNQUFNLEVBQUU7TUFDckIsSUFBSUQsR0FBRyxFQUFFO1FBQ0xqQyxPQUFPLENBQUNDLEdBQUcsQ0FBRSw2QkFBNkIsR0FBR2dDLEdBQUcsQ0FBQ2pCLE9BQU8sQ0FBQztRQUN6RFQsR0FBRyxDQUFDSSxTQUFTLENBQUMsR0FBRyxFQUFFO1VBQUMsY0FBYyxFQUFFO1FBQWtCLENBQUMsQ0FBQztRQUN4REosR0FBRyxDQUFDSyxHQUFHLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO1VBQ25CQyxNQUFNLEVBQUMsR0FBRztVQUNWQyxPQUFPLEVBQUMsc0JBQXNCO1VBQzlCQyxnQkFBZ0IsRUFBRWdCLEdBQUcsQ0FBQ2pCO1FBQzFCLENBQUMsQ0FBQyxDQUFDO01BQ1AsQ0FBQyxNQUNJO1FBRURULEdBQUcsQ0FBQ0ksU0FBUyxDQUFDLEdBQUcsRUFBRTtVQUFDLGNBQWMsRUFBRTtRQUFrQixDQUFDLENBQUM7UUFDeERKLEdBQUcsQ0FBQ0ssR0FBRyxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQ29CLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLENBQUM7TUFDeEM7SUFDSixDQUFDLENBQ0E7RUFDTDtBQUNBLENBQUM7QUFBQTtBQUdNLE1BQU1DLFVBQVUsR0FBRyxPQUFNOUIsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSTtFQUU5Qzs7RUFFQSxJQUFJZCxLQUFLLEdBQUdZLEdBQUcsQ0FBQ0csS0FBSyxDQUFDZixLQUFLO0VBRzNCLElBQUlBLEtBQUssS0FBSWdCLFNBQVMsSUFBSSxDQUFDakIsV0FBVyxDQUFDQyxLQUFLLENBQUMsRUFBRTtJQUMzQ2EsR0FBRyxDQUFDSSxTQUFTLENBQUMsR0FBRyxFQUFFO01BQUMsY0FBYyxFQUFFO0lBQWtCLENBQUMsQ0FBQztJQUNwREosR0FBRyxDQUFDSyxHQUFHLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO01BQ25CQyxNQUFNLEVBQUMsR0FBRztNQUNWQyxPQUFPLEVBQUMsZUFBZTtNQUN2QkMsZ0JBQWdCLEVBQUU7SUFDdEIsQ0FBQyxDQUFDLENBQUM7RUFFWCxDQUFDLE1BQU07SUFFSCxNQUFNckIsR0FBRyxHQUFHRixLQUFLLENBQUNHLE1BQU0sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzdCLE1BQU1DLEdBQUcsR0FBR0osS0FBSyxDQUFDRyxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUM3QixNQUFNRSxHQUFHLEdBQUdMLEtBQUssQ0FBQ0csTUFBTSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7SUFFN0IsTUFBTXFCLFNBQVMsR0FBR25CLEdBQUcsR0FBRyxHQUFHLEdBQUdELEdBQUcsR0FBRyxHQUFHLEdBQUdGLEdBQUc7SUFDN0MsSUFBSXVCLGVBQWU7SUFHbkIsSUFBSUMsQ0FBQyxHQUFHLElBQUlDLElBQUksQ0FBQ3pCLEdBQUcsR0FBRyxHQUFHLEdBQUdFLEdBQUcsR0FBRyxHQUFHLEdBQUdDLEdBQUcsQ0FBQztJQUM3Q3FCLENBQUMsQ0FBQ0UsT0FBTyxDQUFDRixDQUFDLENBQUNHLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxQkosZUFBZSxHQUFHLENBQUMsR0FBRyxHQUFHQyxDQUFDLENBQUNHLE9BQU8sRUFBRSxFQUFFQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUksQ0FBQyxHQUFHLElBQUlKLENBQUMsQ0FBQ0ssUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUVELEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBR0osQ0FBQyxDQUFDTSxXQUFXLEVBQUU7SUFHckgsTUFBTUMsSUFBSSxHQUFHLE1BQU1wQyxNQUFNLENBQUNxQyxhQUFhLEVBQUU7SUFDekNELElBQUksQ0FBQ0UsT0FBTyxDQUFDLDZJQUE2SSxFQUFFLENBQUNYLFNBQVMsRUFBRUMsZUFBZSxDQUFDLEVBQUU7TUFBQ1csU0FBUyxFQUFFQyxpQkFBUSxDQUFDQztJQUFNLENBQUMsRUFDdE4sVUFBU0MsR0FBRyxFQUFDQyxNQUFNLEVBQUU7TUFDckIsSUFBSUQsR0FBRyxFQUFFO1FBQ0xqQyxPQUFPLENBQUNDLEdBQUcsQ0FBRSw2QkFBNkIsR0FBR2dDLEdBQUcsQ0FBQ2pCLE9BQU8sQ0FBQztRQUN6RFQsR0FBRyxDQUFDSSxTQUFTLENBQUMsR0FBRyxFQUFFO1VBQUMsY0FBYyxFQUFFO1FBQWtCLENBQUMsQ0FBQztRQUN4REosR0FBRyxDQUFDSyxHQUFHLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO1VBQ25CQyxNQUFNLEVBQUMsR0FBRztVQUNWQyxPQUFPLEVBQUMsc0JBQXNCO1VBQzlCQyxnQkFBZ0IsRUFBRWdCLEdBQUcsQ0FBQ2pCO1FBQzFCLENBQUMsQ0FBQyxDQUFDO01BQ1AsQ0FBQyxNQUNJO1FBRURULEdBQUcsQ0FBQ0ksU0FBUyxDQUFDLEdBQUcsRUFBRTtVQUFDLGNBQWMsRUFBRTtRQUFrQixDQUFDLENBQUM7UUFDeERKLEdBQUcsQ0FBQ0ssR0FBRyxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQ29CLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLENBQUM7TUFDeEM7SUFDSixDQUFDLENBQ0E7RUFDTDtBQUNBLENBQUM7QUFBQSJ9","map":{"version":3,"names":["oracle","require","fechaValida","fecha","length","eje","substr","mes","dia","console","log","date","moment","isValid","getCitasCEX","req","res","next","query","undefined","writeHead","end","JSON","stringify","status","message","detailed_message","fechacita","fechacitamasuno","d","Date","setDate","getDate","slice","getMonth","getFullYear","pool","getConnection","execute","outFormat","oracledb","OBJECT","err","result","rows","getCitasPr"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/controllers/","sources":["citas.controller.js"],"sourcesContent":["import oracledb from 'oracledb';\nimport moment from 'moment';\n\nvar oracle =  require('../database/connection.js')\n\nfunction fechaValida(fecha) {\n\n    if(fecha.length !== 8) {\n        return false\n    }\n    const eje = fecha.substr(0,4);\n    const mes = fecha.substr(4,2);\n    const dia = fecha.substr(6,2);\n\n    console.log(dia + '/' + mes + '/' + eje)\n\n    var date = moment(fecha,'YYYYMMDD');\n    \n    if (date.isValid()) return true;\n\n    return false;\n\n}\n\nexport const getCitasCEX = async(req, res, next) =>{\n   \n    //Validar fecha \n \n    var fecha = req.query.fecha;\n  \n\n    if (fecha ===undefined || !fechaValida(fecha)) {\n        res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Fecha Erronea\",\n                detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n            }));\n        \n    } else {\n        \n        const eje = fecha.substr(0,4);\n        const mes = fecha.substr(4,2);\n        const dia = fecha.substr(6,2);\n        \n        const fechacita = dia + '/' + mes + '/' + eje;\n        var fechacitamasuno;\n\n    \n        var d = new Date(eje + '-' + mes + '-' + dia)\n        d.setDate(d.getDate() + 1)\n        fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' +  ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n        \n\n        const pool = await oracle.getConnection();\n        pool.execute(\"SELECT * FROM V07_Idrus_cex_dias WHERE fecha_cita > to_date(:fechacita,'DD/MM/YYYY') AND fecha_cita < to_date(:fechacitamasuno,'DD/MM/YYYY')\" ,[fechacita, fechacitamasuno], {outFormat: oracledb.OBJECT}, \n        function(err,result) {\n        if (err) {\n            console.log ('Error el ejecutar la query:' + err.message)\n            res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Error private things\",\n                detailed_message: err.message\n            }));\n        }\n        else {\n            \n            res.writeHead(200, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify(result.rows));\n        }\n    }\n    );\n} \n}\n\n\nexport const getCitasPr = async(req, res, next) =>{\n   \n    //Validar fecha \n \n    var fecha = req.query.fecha;\n  \n\n    if (fecha ===undefined || !fechaValida(fecha)) {\n        res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Fecha Erronea\",\n                detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n            }));\n        \n    } else {\n        \n        const eje = fecha.substr(0,4);\n        const mes = fecha.substr(4,2);\n        const dia = fecha.substr(6,2);\n        \n        const fechacita = dia + '/' + mes + '/' + eje;\n        var fechacitamasuno;\n\n    \n        var d = new Date(eje + '-' + mes + '-' + dia)\n        d.setDate(d.getDate() + 1)\n        fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' +  ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n        \n\n        const pool = await oracle.getConnection();\n        pool.execute(\"SELECT * FROM V07_Idrus_Pr_dias WHERE fecha_cita > to_date(:fechacita,'DD/MM/YYYY') AND fecha_cita < to_date(:fechacitamasuno,'DD/MM/YYYY')\" ,[fechacita, fechacitamasuno], {outFormat: oracledb.OBJECT}, \n        function(err,result) {\n        if (err) {\n            console.log ('Error el ejecutar la query:' + err.message)\n            res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Error private things\",\n                detailed_message: err.message\n            }));\n        }\n        else {\n            \n            res.writeHead(200, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify(result.rows));\n        }\n    }\n    );\n} \n}\n"],"mappings":"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"}},"mtime":1666274231309},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/database/connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConnection = getConnection;\nconst oracledb = require(\"oracledb\");\noracledb.autoCommit = true;\nlet connection;\nasync function getConnection() {\n  try {\n    connection = await oracledb.getConnection({\n      user: process.env.DB_USER,\n      password: process.env.DB_PASS,\n      connectionString: process.env.DB_TNS\n    });\n    return connection;\n  } catch (err) {\n    console.error(err.message);\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmFjbGVkYiIsInJlcXVpcmUiLCJhdXRvQ29tbWl0IiwiY29ubmVjdGlvbiIsImdldENvbm5lY3Rpb24iLCJ1c2VyIiwicHJvY2VzcyIsImVudiIsIkRCX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1MiLCJjb25uZWN0aW9uU3RyaW5nIiwiREJfVE5TIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvYzA3LWFkbWluaXN0cmFkb3IvanMvb3JhY2xlL2JhY2tlbmRzL2lkcnVzL2RhdGFiYXNlLyIsInNvdXJjZXMiOlsiY29ubmVjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBvcmFjbGVkYiA9IHJlcXVpcmUoXCJvcmFjbGVkYlwiKTtcbm9yYWNsZWRiLmF1dG9Db21taXQ9IHRydWU7XG5cbmxldCBjb25uZWN0aW9uO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBjb25uZWN0aW9uID0gYXdhaXQgb3JhY2xlZGIuZ2V0Q29ubmVjdGlvbih7XG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLFxuICAgICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1MsXG4gICAgICBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5EQl9UTlMsXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbm5lY3Rpb247XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICB9IFxufVxuXG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDRCxRQUFRLENBQUNFLFVBQVUsR0FBRSxJQUFJO0FBRXpCLElBQUlDLFVBQVU7QUFFUCxlQUFlQyxhQUFhLEdBQUc7RUFDcEMsSUFBSTtJQUNGRCxVQUFVLEdBQUcsTUFBTUgsUUFBUSxDQUFDSSxhQUFhLENBQUM7TUFDeENDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87TUFDekJDLFFBQVEsRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87TUFDN0JDLGdCQUFnQixFQUFFTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0s7SUFDaEMsQ0FBQyxDQUFDO0lBQ0YsT0FBT1QsVUFBVTtFQUNuQixDQUFDLENBQUMsT0FBT1UsR0FBRyxFQUFFO0lBQ1pDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDRixHQUFHLENBQUNHLE9BQU8sQ0FBQztFQUM1QjtBQUNGIn0=","map":{"version":3,"names":["oracledb","require","autoCommit","connection","getConnection","user","process","env","DB_USER","password","DB_PASS","connectionString","DB_TNS","err","console","error","message"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/database/","sources":["connection.js"],"sourcesContent":["const oracledb = require(\"oracledb\");\noracledb.autoCommit= true;\n\nlet connection;\n\nexport async function getConnection() {\n  try {\n    connection = await oracledb.getConnection({\n      user: process.env.DB_USER,\n      password: process.env.DB_PASS,\n      connectionString: process.env.DB_TNS,\n    });\n    return connection;\n  } catch (err) {\n    console.error(err.message);\n  } \n}\n\n\n"],"mappings":";;;;;;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpCD,QAAQ,CAACE,UAAU,GAAE,IAAI;AAEzB,IAAIC,UAAU;AAEP,eAAeC,aAAa,GAAG;EACpC,IAAI;IACFD,UAAU,GAAG,MAAMH,QAAQ,CAACI,aAAa,CAAC;MACxCC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;MACzBC,QAAQ,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;MAC7BC,gBAAgB,EAAEL,OAAO,CAACC,GAAG,CAACK;IAChC,CAAC,CAAC;IACF,OAAOT,UAAU;EACnB,CAAC,CAAC,OAAOU,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAACG,OAAO,CAAC;EAC5B;AACF"}},"mtime":1665997615203},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nvar jwt = require('jsonwebtoken');\nvar config = require('../config.js');\nfunction auth(role) {\n  return async function (req, res, next) {\n    var token;\n    var payload;\n    if (!req.headers.authorization) {\n      return res.status(401).send({\n        message: \"No autorizado\"\n      });\n    }\n    token = req.headers.authorization.split(' ')[1];\n    try {\n      payload = jwt.verify(token, process.env.JWTSECRETKEY);\n    } catch (e) {\n      if (e.name === 'TokenExpiredError') {\n        res.status(401).send({\n          message: \"Autorización expirada. Contacte con HospitalTenerife@sjd.es\"\n        });\n      } else {\n        res.status(401).send({\n          message: \"Autorización invalida\"\n        });\n      }\n      return;\n    }\n    if (!role || role === payload.role) {\n      req.user = {\n        email: payload.sub,\n        role: payload.role\n      };\n      next();\n    } else {\n      res.status(401).send({\n        message: 'No estas autorizado'\n      });\n    }\n  };\n}\nmodule.exports = auth;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwiY29uZmlnIiwiYXV0aCIsInJvbGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJwYXlsb2FkIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsInNwbGl0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVFNFQ1JFVEtFWSIsImUiLCJuYW1lIiwidXNlciIsImVtYWlsIiwic3ViIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvYzA3LWFkbWluaXN0cmFkb3IvanMvb3JhY2xlL2JhY2tlbmRzL2lkcnVzL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG52YXIgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG52YXIgY29uZmlnID0gIHJlcXVpcmUgKCcuLi9jb25maWcuanMnKVxuXG5mdW5jdGlvbiBhdXRoKHJvbGUpIHtcblxuICAgIHJldHVybiBhc3luYyBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuXG4gICAgICAgIHZhciB0b2tlbjtcbiAgICAgICAgdmFyIHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoe21lc3NhZ2U6IFwiTm8gYXV0b3JpemFkb1wifSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRva2VuPXJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBheWxvYWQ9and0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUU0VDUkVUS0VZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfWNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7bWVzc2FnZTogXCJBdXRvcml6YWNpw7NuIGV4cGlyYWRhLiBDb250YWN0ZSBjb24gSG9zcGl0YWxUZW5lcmlmZUBzamQuZXNcIn0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe21lc3NhZ2U6IFwiQXV0b3JpemFjacOzbiBpbnZhbGlkYVwifSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoIXJvbGUgfHwgcm9sZSA9PT0gcGF5bG9hZC5yb2xlICkge1xuICAgICAgICAgICAgcmVxLnVzZXIgPSB7XG4gICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuc3ViLFxuICAgICAgICAgICAgICAgIHJvbGU6IHBheWxvYWQucm9sZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHttZXNzYWdlOiAnTm8gZXN0YXMgYXV0b3JpemFkbyd9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gYXV0aDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFJQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDakMsSUFBSUMsTUFBTSxHQUFJRCxPQUFPLENBQUUsY0FBYyxDQUFDO0FBRXRDLFNBQVNFLElBQUksQ0FBQ0MsSUFBSSxFQUFFO0VBRWhCLE9BQU8sZ0JBQWVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFFbEMsSUFBSUMsS0FBSztJQUNULElBQUlDLE9BQU87SUFFWCxJQUFJLENBQUNKLEdBQUcsQ0FBQ0ssT0FBTyxDQUFDQyxhQUFhLEVBQUU7TUFDNUIsT0FBT0wsR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFDQyxPQUFPLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDdkQ7SUFDQU4sS0FBSyxHQUFDSCxHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsYUFBYSxDQUFDSSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTdDLElBQUk7TUFDSk4sT0FBTyxHQUFDVCxHQUFHLENBQUNnQixNQUFNLENBQUNSLEtBQUssRUFBRVMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFlBQVksQ0FBQztJQUVuRCxDQUFDLFFBQU9DLENBQUMsRUFBRTtNQUNYLElBQUlBLENBQUMsQ0FBQ0MsSUFBSSxLQUFLLG1CQUFtQixFQUFFO1FBQ3BDZixHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQUNDLE9BQU8sRUFBRTtRQUE2RCxDQUFDLENBQUM7TUFDOUYsQ0FBQyxNQUFNO1FBQ1BSLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFBQ0MsT0FBTyxFQUFFO1FBQXVCLENBQUMsQ0FBQztNQUN4RDtNQUNBO0lBQ0E7SUFDSixJQUFJLENBQUNWLElBQUksSUFBSUEsSUFBSSxLQUFLSyxPQUFPLENBQUNMLElBQUksRUFBRztNQUNqQ0MsR0FBRyxDQUFDaUIsSUFBSSxHQUFHO1FBQ1BDLEtBQUssRUFBRWQsT0FBTyxDQUFDZSxHQUFHO1FBQ2xCcEIsSUFBSSxFQUFFSyxPQUFPLENBQUNMO01BQ2xCLENBQUM7TUFDREcsSUFBSSxFQUFFO0lBQ1YsQ0FBQyxNQUFNO01BQ0hELEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBQ0MsT0FBTyxFQUFFO01BQXFCLENBQUMsQ0FBQztJQUUxRDtFQUVKLENBQUM7QUFFTDtBQUNBVyxNQUFNLENBQUNDLE9BQU8sR0FBR3ZCLElBQUkifQ==","map":{"version":3,"names":["jwt","require","config","auth","role","req","res","next","token","payload","headers","authorization","status","send","message","split","verify","process","env","JWTSECRETKEY","e","name","user","email","sub","module","exports"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["auth.js"],"sourcesContent":["\nvar jwt = require('jsonwebtoken');\nvar config =  require ('../config.js')\n\nfunction auth(role) {\n\n    return async function(req, res, next) {\n\n        var token;\n        var payload;\n\n        if (!req.headers.authorization) {\n            return res.status(401).send({message: \"No autorizado\"})\n            }\n            token=req.headers.authorization.split(' ')[1];\n            \n            try {\n            payload=jwt.verify(token, process.env.JWTSECRETKEY);\n            \n            }catch (e) {\n            if (e.name === 'TokenExpiredError') {\n            res.status(401).send({message: \"Autorización expirada. Contacte con HospitalTenerife@sjd.es\"})\n            } else {\n            res.status(401).send({message: \"Autorización invalida\"})\n            }\n            return\n            }\n        if (!role || role === payload.role ) {\n            req.user = {\n                email: payload.sub,\n                role: payload.role\n            };\n            next();\n        } else {\n            res.status(401).send({message: 'No estas autorizado'});\n\n        }\n\n    }\n\n}\nmodule.exports = auth;\n"],"mappings":";;AACA,IAAIA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AACjC,IAAIC,MAAM,GAAID,OAAO,CAAE,cAAc,CAAC;AAEtC,SAASE,IAAI,CAACC,IAAI,EAAE;EAEhB,OAAO,gBAAeC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAElC,IAAIC,KAAK;IACT,IAAIC,OAAO;IAEX,IAAI,CAACJ,GAAG,CAACK,OAAO,CAACC,aAAa,EAAE;MAC5B,OAAOL,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAACC,OAAO,EAAE;MAAe,CAAC,CAAC;IACvD;IACAN,KAAK,GAACH,GAAG,CAACK,OAAO,CAACC,aAAa,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAE7C,IAAI;MACJN,OAAO,GAACT,GAAG,CAACgB,MAAM,CAACR,KAAK,EAAES,OAAO,CAACC,GAAG,CAACC,YAAY,CAAC;IAEnD,CAAC,QAAOC,CAAC,EAAE;MACX,IAAIA,CAAC,CAACC,IAAI,KAAK,mBAAmB,EAAE;QACpCf,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAACC,OAAO,EAAE;QAA6D,CAAC,CAAC;MAC9F,CAAC,MAAM;QACPR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAACC,OAAO,EAAE;QAAuB,CAAC,CAAC;MACxD;MACA;IACA;IACJ,IAAI,CAACV,IAAI,IAAIA,IAAI,KAAKK,OAAO,CAACL,IAAI,EAAG;MACjCC,GAAG,CAACiB,IAAI,GAAG;QACPC,KAAK,EAAEd,OAAO,CAACe,GAAG;QAClBpB,IAAI,EAAEK,OAAO,CAACL;MAClB,CAAC;MACDG,IAAI,EAAE;IACV,CAAC,MAAM;MACHD,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAACC,OAAO,EAAE;MAAqB,CAAC,CAAC;IAE1D;EAEJ,CAAC;AAEL;AACAW,MAAM,CAACC,OAAO,GAAGvB,IAAI"}},"mtime":1666005896919},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = require(\"dotenv\");\n(0, _dotenv.config)();\nvar _default = {\n  port: process.env.PORT\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy8iLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2NvbmZpZ30gZnJvbSBcImRvdGVudlwiO1xuXG5jb25maWcoKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHBvcnQ6IHByb2Nlc3MuZW52LlBPUlRcbiAgICBcblxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFFQSxJQUFBQSxjQUFNLEdBQUU7QUFBQyxlQUVNO0VBQ1hDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDO0FBR3RCLENBQUM7QUFBQSJ9","map":{"version":3,"names":["config","port","process","env","PORT"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/","sources":["config.js"],"sourcesContent":["import {config} from \"dotenv\";\n\nconfig();\n\nexport default {\n    port: process.env.PORT\n    \n\n}"],"mappings":";;;;;;AAAA;AAEA,IAAAA,cAAM,GAAE;AAAC,eAEM;EACXC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC;AAGtB,CAAC;AAAA"}},"mtime":1665997615203},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/citas.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _auth = _interopRequireDefault(require(\"./auth\"));\nvar _citas = require(\"../controllers/citas.controller\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar express = require('express');\nconst router = express.Router();\nrouter.get('/api/idrus/citas/', (0, _auth.default)(), _citas.getCitasCEX);\nrouter.get('/api/idrus/pruebas/', (0, _auth.default)(), _citas.getCitasPr);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImdldCIsImF1dGgiLCJnZXRDaXRhc0NFWCIsImdldENpdGFzUHIiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy9yb3V0ZXMvIiwic291cmNlcyI6WyJjaXRhcy5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgYXV0aCBmcm9tIFwiLi9hdXRoXCI7XG5cbmltcG9ydCB7Z2V0Q2l0YXNDRVgsIGdldENpdGFzUHJ9IGZyb20gJy4uL2NvbnRyb2xsZXJzL2NpdGFzLmNvbnRyb2xsZXInXG5cbnZhciBleHByZXNzID0gcmVxdWlyZSAoJ2V4cHJlc3MnKTtcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuXG5yb3V0ZXIuZ2V0KCcvYXBpL2lkcnVzL2NpdGFzLycsIGF1dGgoKSwgIGdldENpdGFzQ0VYKTtcbnJvdXRlci5nZXQoJy9hcGkvaWRydXMvcHJ1ZWJhcy8nLCBhdXRoKCksICBnZXRDaXRhc1ByKTtcblxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUVBO0FBQXVFO0FBRXZFLElBQUlBLE9BQU8sR0FBR0MsT0FBTyxDQUFFLFNBQVMsQ0FBQztBQUVqQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBTSxFQUFFO0FBRy9CRCxNQUFNLENBQUNFLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxJQUFBQyxhQUFJLEdBQUUsRUFBR0Msa0JBQVcsQ0FBQztBQUNyREosTUFBTSxDQUFDRSxHQUFHLENBQUMscUJBQXFCLEVBQUUsSUFBQUMsYUFBSSxHQUFFLEVBQUdFLGlCQUFVLENBQUM7QUFBQyxlQUd4Q0wsTUFBTTtBQUFBIn0=","map":{"version":3,"names":["express","require","router","Router","get","auth","getCitasCEX","getCitasPr"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["citas.routes.js"],"sourcesContent":["\nimport auth from \"./auth\";\n\nimport {getCitasCEX, getCitasPr} from '../controllers/citas.controller'\n\nvar express = require ('express');\n\nconst router = express.Router();\n\n\nrouter.get('/api/idrus/citas/', auth(),  getCitasCEX);\nrouter.get('/api/idrus/pruebas/', auth(),  getCitasPr);\n\n\nexport default router;\n\n\n"],"mappings":";;;;;;AACA;AAEA;AAAuE;AAEvE,IAAIA,OAAO,GAAGC,OAAO,CAAE,SAAS,CAAC;AAEjC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,EAAE;AAG/BD,MAAM,CAACE,GAAG,CAAC,mBAAmB,EAAE,IAAAC,aAAI,GAAE,EAAGC,kBAAW,CAAC;AACrDJ,MAAM,CAACE,GAAG,CAAC,qBAAqB,EAAE,IAAAC,aAAI,GAAE,EAAGE,iBAAU,CAAC;AAAC,eAGxCL,MAAM;AAAA"}},"mtime":1666274277478},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/citas.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCitasPr = exports.getCitasCEX = void 0;\nvar _oracledb = _interopRequireDefault(require(\"oracledb\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar oracle = require('../database/connection.js');\nfunction fechaValida(fecha) {\n  if (fecha.length !== 8) {\n    return false;\n  }\n  const eje = fecha.substr(0, 4);\n  const mes = fecha.substr(4, 2);\n  const dia = fecha.substr(6, 2);\n  console.log(dia + '/' + mes + '/' + eje);\n  var date = (0, _moment.default)(fecha, 'YYYYMMDD');\n  if (date.isValid()) return true;\n  return false;\n}\nconst getCitasCEX = async (req, res, next) => {\n  //Validar fecha \n\n  var fecha = req.query.fecha;\n  if (fecha === undefined || !fechaValida(fecha)) {\n    res.writeHead(500, {\n      'Content-Type': 'application/json'\n    });\n    res.end(JSON.stringify({\n      status: 500,\n      message: \"Fecha Erronea\",\n      detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n    }));\n  } else {\n    const eje = fecha.substr(0, 4);\n    const mes = fecha.substr(4, 2);\n    const dia = fecha.substr(6, 2);\n    const fechacita = dia + '/' + mes + '/' + eje;\n    var fechacitamasuno;\n    var d = new Date(eje + '-' + mes + '-' + dia);\n    d.setDate(d.getDate() + 1);\n    fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' + ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_cex_dias WHERE fecha_cita > to_date(:fechacita,'DD/MM/YYYY') AND fecha_cita < to_date(:fechacitamasuno,'DD/MM/YYYY')\", [fechacita, fechacitamasuno], {\n      outFormat: _oracledb.default.OBJECT\n    }, function (err, result) {\n      if (err) {\n        console.log('Error el ejecutar la query:' + err.message);\n        res.writeHead(500, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify({\n          status: 500,\n          message: \"Error private things\",\n          detailed_message: err.message\n        }));\n      } else {\n        res.writeHead(200, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify(result.rows));\n      }\n    });\n  }\n};\nexports.getCitasCEX = getCitasCEX;\nconst getCitasPr = async (req, res, next) => {\n  //Validar fecha \n\n  var fecha = req.query.fecha;\n  if (fecha === undefined || !fechaValida(fecha)) {\n    res.writeHead(500, {\n      'Content-Type': 'application/json'\n    });\n    res.end(JSON.stringify({\n      status: 500,\n      message: \"Fecha Erronea\",\n      detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n    }));\n  } else {\n    const eje = fecha.substr(0, 4);\n    const mes = fecha.substr(4, 2);\n    const dia = fecha.substr(6, 2);\n    const fechacita = dia + '/' + mes + '/' + eje;\n    var fechacitamasuno;\n    var d = new Date(eje + '-' + mes + '-' + dia);\n    d.setDate(d.getDate() + 1);\n    fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' + ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Pr_dias WHERE fecha_cita > to_date(:fechacita,'DD/MM/YYYY') AND fecha_cita < to_date(:fechacitamasuno,'DD/MM/YYYY')\", [fechacita, fechacitamasuno], {\n      outFormat: _oracledb.default.OBJECT\n    }, function (err, result) {\n      if (err) {\n        console.log('Error el ejecutar la query:' + err.message);\n        res.writeHead(500, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify({\n          status: 500,\n          message: \"Error private things\",\n          detailed_message: err.message\n        }));\n      } else {\n        res.writeHead(200, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify(result.rows));\n      }\n    });\n  }\n};\nexports.getCitasPr = getCitasPr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmFjbGUiLCJyZXF1aXJlIiwiZmVjaGFWYWxpZGEiLCJmZWNoYSIsImxlbmd0aCIsImVqZSIsInN1YnN0ciIsIm1lcyIsImRpYSIsImNvbnNvbGUiLCJsb2ciLCJkYXRlIiwibW9tZW50IiwiaXNWYWxpZCIsImdldENpdGFzQ0VYIiwicmVxIiwicmVzIiwibmV4dCIsInF1ZXJ5IiwidW5kZWZpbmVkIiwid3JpdGVIZWFkIiwiZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsIm1lc3NhZ2UiLCJkZXRhaWxlZF9tZXNzYWdlIiwiZmVjaGFjaXRhIiwiZmVjaGFjaXRhbWFzdW5vIiwiZCIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInNsaWNlIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsInBvb2wiLCJnZXRDb25uZWN0aW9uIiwiZXhlY3V0ZSIsIm91dEZvcm1hdCIsIm9yYWNsZWRiIiwiT0JKRUNUIiwiZXJyIiwicmVzdWx0Iiwicm93cyIsImdldENpdGFzUHIiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImNpdGFzLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG9yYWNsZWRiIGZyb20gJ29yYWNsZWRiJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxudmFyIG9yYWNsZSA9ICByZXF1aXJlKCcuLi9kYXRhYmFzZS9jb25uZWN0aW9uLmpzJylcblxuZnVuY3Rpb24gZmVjaGFWYWxpZGEoZmVjaGEpIHtcblxuICAgIGlmKGZlY2hhLmxlbmd0aCAhPT0gOCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgZWplID0gZmVjaGEuc3Vic3RyKDAsNCk7XG4gICAgY29uc3QgbWVzID0gZmVjaGEuc3Vic3RyKDQsMik7XG4gICAgY29uc3QgZGlhID0gZmVjaGEuc3Vic3RyKDYsMik7XG5cbiAgICBjb25zb2xlLmxvZyhkaWEgKyAnLycgKyBtZXMgKyAnLycgKyBlamUpXG5cbiAgICB2YXIgZGF0ZSA9IG1vbWVudChmZWNoYSwnWVlZWU1NREQnKTtcbiAgICBcbiAgICBpZiAoZGF0ZS5pc1ZhbGlkKCkpIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuXG59XG5cbmV4cG9ydCBjb25zdCBnZXRDaXRhc0NFWCA9IGFzeW5jKHJlcSwgcmVzLCBuZXh0KSA9PntcbiAgIFxuICAgIC8vVmFsaWRhciBmZWNoYSBcbiBcbiAgICB2YXIgZmVjaGEgPSByZXEucXVlcnkuZmVjaGE7XG4gIFxuXG4gICAgaWYgKGZlY2hhID09PXVuZGVmaW5lZCB8fCAhZmVjaGFWYWxpZGEoZmVjaGEpKSB7XG4gICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOlwiRmVjaGEgRXJyb25lYVwiLFxuICAgICAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IFwiSW50cm9kdXpjYSB1bmEgZmVjaGEgdsOhbGlkYSAoWVlZWU1NREQpXCJcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgXG4gICAgfSBlbHNlIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGVqZSA9IGZlY2hhLnN1YnN0cigwLDQpO1xuICAgICAgICBjb25zdCBtZXMgPSBmZWNoYS5zdWJzdHIoNCwyKTtcbiAgICAgICAgY29uc3QgZGlhID0gZmVjaGEuc3Vic3RyKDYsMik7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmZWNoYWNpdGEgPSBkaWEgKyAnLycgKyBtZXMgKyAnLycgKyBlamU7XG4gICAgICAgIHZhciBmZWNoYWNpdGFtYXN1bm87XG5cbiAgICBcbiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShlamUgKyAnLScgKyBtZXMgKyAnLScgKyBkaWEpXG4gICAgICAgIGQuc2V0RGF0ZShkLmdldERhdGUoKSArIDEpXG4gICAgICAgIGZlY2hhY2l0YW1hc3VubyA9ICgnMCcgKyBkLmdldERhdGUoKSkuc2xpY2UoLTIpICsgJy8nICsgICgnMCcgKyAoZC5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKSArICcvJyArIGQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgXG5cbiAgICAgICAgY29uc3QgcG9vbCA9IGF3YWl0IG9yYWNsZS5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgIHBvb2wuZXhlY3V0ZShcIlNFTEVDVCAqIEZST00gVjA3X0lkcnVzX2NleF9kaWFzIFdIRVJFIGZlY2hhX2NpdGEgPiB0b19kYXRlKDpmZWNoYWNpdGEsJ0REL01NL1lZWVknKSBBTkQgZmVjaGFfY2l0YSA8IHRvX2RhdGUoOmZlY2hhY2l0YW1hc3VubywnREQvTU0vWVlZWScpXCIgLFtmZWNoYWNpdGEsIGZlY2hhY2l0YW1hc3Vub10sIHtvdXRGb3JtYXQ6IG9yYWNsZWRiLk9CSkVDVH0sIFxuICAgICAgICBmdW5jdGlvbihlcnIscmVzdWx0KSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nICgnRXJyb3IgZWwgZWplY3V0YXIgbGEgcXVlcnk6JyArIGVyci5tZXNzYWdlKVxuICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6NTAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6XCJFcnJvciBwcml2YXRlIHRoaW5nc1wiLFxuICAgICAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoMjAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeShyZXN1bHQucm93cykpO1xuICAgICAgICB9XG4gICAgfVxuICAgICk7XG59IFxufVxuXG5cbmV4cG9ydCBjb25zdCBnZXRDaXRhc1ByID0gYXN5bmMocmVxLCByZXMsIG5leHQpID0+e1xuICAgXG4gICAgLy9WYWxpZGFyIGZlY2hhIFxuIFxuICAgIHZhciBmZWNoYSA9IHJlcS5xdWVyeS5mZWNoYTtcbiAgXG5cbiAgICBpZiAoZmVjaGEgPT09dW5kZWZpbmVkIHx8ICFmZWNoYVZhbGlkYShmZWNoYSkpIHtcbiAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6NTAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6XCJGZWNoYSBFcnJvbmVhXCIsXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRfbWVzc2FnZTogXCJJbnRyb2R1emNhIHVuYSBmZWNoYSB2w6FsaWRhIChZWVlZTU1ERClcIlxuICAgICAgICAgICAgfSkpO1xuICAgICAgICBcbiAgICB9IGVsc2Uge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZWplID0gZmVjaGEuc3Vic3RyKDAsNCk7XG4gICAgICAgIGNvbnN0IG1lcyA9IGZlY2hhLnN1YnN0cig0LDIpO1xuICAgICAgICBjb25zdCBkaWEgPSBmZWNoYS5zdWJzdHIoNiwyKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZlY2hhY2l0YSA9IGRpYSArICcvJyArIG1lcyArICcvJyArIGVqZTtcbiAgICAgICAgdmFyIGZlY2hhY2l0YW1hc3VubztcblxuICAgIFxuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKGVqZSArICctJyArIG1lcyArICctJyArIGRpYSlcbiAgICAgICAgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgMSlcbiAgICAgICAgZmVjaGFjaXRhbWFzdW5vID0gKCcwJyArIGQuZ2V0RGF0ZSgpKS5zbGljZSgtMikgKyAnLycgKyAgKCcwJyArIChkLmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICsgJy8nICsgZC5nZXRGdWxsWWVhcigpO1xuICAgICAgICBcblxuICAgICAgICBjb25zdCBwb29sID0gYXdhaXQgb3JhY2xlLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgcG9vbC5leGVjdXRlKFwiU0VMRUNUICogRlJPTSBWMDdfSWRydXNfUHJfZGlhcyBXSEVSRSBmZWNoYV9jaXRhID4gdG9fZGF0ZSg6ZmVjaGFjaXRhLCdERC9NTS9ZWVlZJykgQU5EIGZlY2hhX2NpdGEgPCB0b19kYXRlKDpmZWNoYWNpdGFtYXN1bm8sJ0REL01NL1lZWVknKVwiICxbZmVjaGFjaXRhLCBmZWNoYWNpdGFtYXN1bm9dLCB7b3V0Rm9ybWF0OiBvcmFjbGVkYi5PQkpFQ1R9LCBcbiAgICAgICAgZnVuY3Rpb24oZXJyLHJlc3VsdCkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyAoJ0Vycm9yIGVsIGVqZWN1dGFyIGxhIHF1ZXJ5OicgKyBlcnIubWVzc2FnZSlcbiAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOlwiRXJyb3IgcHJpdmF0ZSB0aGluZ3NcIixcbiAgICAgICAgICAgICAgICBkZXRhaWxlZF9tZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXMud3JpdGVIZWFkKDIwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkocmVzdWx0LnJvd3MpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICApO1xufSBcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUE0QjtBQUU1QixJQUFJQSxNQUFNLEdBQUlDLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztBQUVsRCxTQUFTQyxXQUFXLENBQUNDLEtBQUssRUFBRTtFQUV4QixJQUFHQSxLQUFLLENBQUNDLE1BQU0sS0FBSyxDQUFDLEVBQUU7SUFDbkIsT0FBTyxLQUFLO0VBQ2hCO0VBQ0EsTUFBTUMsR0FBRyxHQUFHRixLQUFLLENBQUNHLE1BQU0sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0VBQzdCLE1BQU1DLEdBQUcsR0FBR0osS0FBSyxDQUFDRyxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztFQUM3QixNQUFNRSxHQUFHLEdBQUdMLEtBQUssQ0FBQ0csTUFBTSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7RUFFN0JHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixHQUFHLEdBQUcsR0FBRyxHQUFHRCxHQUFHLEdBQUcsR0FBRyxHQUFHRixHQUFHLENBQUM7RUFFeEMsSUFBSU0sSUFBSSxHQUFHLElBQUFDLGVBQU0sRUFBQ1QsS0FBSyxFQUFDLFVBQVUsQ0FBQztFQUVuQyxJQUFJUSxJQUFJLENBQUNFLE9BQU8sRUFBRSxFQUFFLE9BQU8sSUFBSTtFQUUvQixPQUFPLEtBQUs7QUFFaEI7QUFFTyxNQUFNQyxXQUFXLEdBQUcsT0FBTUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSTtFQUUvQzs7RUFFQSxJQUFJZCxLQUFLLEdBQUdZLEdBQUcsQ0FBQ0csS0FBSyxDQUFDZixLQUFLO0VBRzNCLElBQUlBLEtBQUssS0FBSWdCLFNBQVMsSUFB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","map":{"version":3,"names":["oracle","require","fechaValida","fecha","length","eje","substr","mes","dia","console","log","date","moment","isValid","getCitasCEX","req","res","next","query","undefined","writeHead","end","JSON","stringify","status","message","detailed_message","fechacita","fechacitamasuno","d","Date","setDate","getDate","slice","getMonth","getFullYear","pool","getConnection","execute","outFormat","oracledb","OBJECT","err","result","rows","getCitasPr"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/controllers/","sources":["citas.controller.js"],"sourcesContent":["import oracledb from 'oracledb';\nimport moment from 'moment';\n\nvar oracle =  require('../database/connection.js')\n\nfunction fechaValida(fecha) {\n\n    if(fecha.length !== 8) {\n        return false\n    }\n    const eje = fecha.substr(0,4);\n    const mes = fecha.substr(4,2);\n    const dia = fecha.substr(6,2);\n\n    console.log(dia + '/' + mes + '/' + eje)\n\n    var date = moment(fecha,'YYYYMMDD');\n    \n    if (date.isValid()) return true;\n\n    return false;\n\n}\n\nexport const getCitasCEX = async(req, res, next) =>{\n   \n    //Validar fecha \n \n    var fecha = req.query.fecha;\n  \n\n    if (fecha ===undefined || !fechaValida(fecha)) {\n        res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Fecha Erronea\",\n                detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n            }));\n        \n    } else {\n        \n        const eje = fecha.substr(0,4);\n        const mes = fecha.substr(4,2);\n        const dia = fecha.substr(6,2);\n        \n        const fechacita = dia + '/' + mes + '/' + eje;\n        var fechacitamasuno;\n\n    \n        var d = new Date(eje + '-' + mes + '-' + dia)\n        d.setDate(d.getDate() + 1)\n        fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' +  ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n        \n\n        const pool = await oracle.getConnection();\n        pool.execute(\"SELECT * FROM V07_Idrus_cex_dias WHERE fecha_cita > to_date(:fechacita,'DD/MM/YYYY') AND fecha_cita < to_date(:fechacitamasuno,'DD/MM/YYYY')\" ,[fechacita, fechacitamasuno], {outFormat: oracledb.OBJECT}, \n        function(err,result) {\n        if (err) {\n            console.log ('Error el ejecutar la query:' + err.message)\n            res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Error private things\",\n                detailed_message: err.message\n            }));\n        }\n        else {\n            \n            res.writeHead(200, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify(result.rows));\n        }\n    }\n    );\n} \n}\n\n\nexport const getCitasPr = async(req, res, next) =>{\n   \n    //Validar fecha \n \n    var fecha = req.query.fecha;\n  \n\n    if (fecha ===undefined || !fechaValida(fecha)) {\n        res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Fecha Erronea\",\n                detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n            }));\n        \n    } else {\n        \n        const eje = fecha.substr(0,4);\n        const mes = fecha.substr(4,2);\n        const dia = fecha.substr(6,2);\n        \n        const fechacita = dia + '/' + mes + '/' + eje;\n        var fechacitamasuno;\n\n    \n        var d = new Date(eje + '-' + mes + '-' + dia)\n        d.setDate(d.getDate() + 1)\n        fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' +  ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n        \n\n        const pool = await oracle.getConnection();\n        pool.execute(\"SELECT * FROM V07_Idrus_Pr_dias WHERE fecha_cita > to_date(:fechacita,'DD/MM/YYYY') AND fecha_cita < to_date(:fechacitamasuno,'DD/MM/YYYY')\" ,[fechacita, fechacitamasuno], {outFormat: oracledb.OBJECT}, \n        function(err,result) {\n        if (err) {\n            console.log ('Error el ejecutar la query:' + err.message)\n            res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Error private things\",\n                detailed_message: err.message\n            }));\n        }\n        else {\n            \n            res.writeHead(200, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify(result.rows));\n        }\n    }\n    );\n} \n}\n"],"mappings":"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"}},"mtime":1666274231309},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nvar jwt = require('jsonwebtoken');\nvar config = require('../config.js');\nfunction auth(role) {\n  return async function (req, res, next) {\n    var token;\n    var payload;\n    if (!req.headers.authorization) {\n      return res.status(401).send({\n        message: \"No autorizado\"\n      });\n    }\n    token = req.headers.authorization.split(' ')[1];\n    try {\n      payload = jwt.verify(token, process.env.JWTSECRETKEY);\n    } catch (e) {\n      if (e.name === 'TokenExpiredError') {\n        res.status(401).send({\n          message: \"Autorización expirada. Contacte con HospitalTenerife@sjd.es\"\n        });\n      } else {\n        res.status(401).send({\n          message: \"Autorización invalida\"\n        });\n      }\n      return;\n    }\n    if (!role || role === payload.role) {\n      req.user = {\n        email: payload.sub,\n        role: payload.role\n      };\n      next();\n    } else {\n      res.status(401).send({\n        message: 'No estas autorizado'\n      });\n    }\n  };\n}\nmodule.exports = auth;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwiY29uZmlnIiwiYXV0aCIsInJvbGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJwYXlsb2FkIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsInNwbGl0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVFNFQ1JFVEtFWSIsImUiLCJuYW1lIiwidXNlciIsImVtYWlsIiwic3ViIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvYzA3LWFkbWluaXN0cmFkb3IvanMvb3JhY2xlL2JhY2tlbmRzL2lkcnVzL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG52YXIgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG52YXIgY29uZmlnID0gIHJlcXVpcmUgKCcuLi9jb25maWcuanMnKVxuXG5mdW5jdGlvbiBhdXRoKHJvbGUpIHtcblxuICAgIHJldHVybiBhc3luYyBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuXG4gICAgICAgIHZhciB0b2tlbjtcbiAgICAgICAgdmFyIHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoe21lc3NhZ2U6IFwiTm8gYXV0b3JpemFkb1wifSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRva2VuPXJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBheWxvYWQ9and0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUU0VDUkVUS0VZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfWNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7bWVzc2FnZTogXCJBdXRvcml6YWNpw7NuIGV4cGlyYWRhLiBDb250YWN0ZSBjb24gSG9zcGl0YWxUZW5lcmlmZUBzamQuZXNcIn0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe21lc3NhZ2U6IFwiQXV0b3JpemFjacOzbiBpbnZhbGlkYVwifSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoIXJvbGUgfHwgcm9sZSA9PT0gcGF5bG9hZC5yb2xlICkge1xuICAgICAgICAgICAgcmVxLnVzZXIgPSB7XG4gICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuc3ViLFxuICAgICAgICAgICAgICAgIHJvbGU6IHBheWxvYWQucm9sZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHttZXNzYWdlOiAnTm8gZXN0YXMgYXV0b3JpemFkbyd9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gYXV0aDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFJQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDakMsSUFBSUMsTUFBTSxHQUFJRCxPQUFPLENBQUUsY0FBYyxDQUFDO0FBRXRDLFNBQVNFLElBQUksQ0FBQ0MsSUFBSSxFQUFFO0VBRWhCLE9BQU8sZ0JBQWVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFFbEMsSUFBSUMsS0FBSztJQUNULElBQUlDLE9BQU87SUFFWCxJQUFJLENBQUNKLEdBQUcsQ0FBQ0ssT0FBTyxDQUFDQyxhQUFhLEVBQUU7TUFDNUIsT0FBT0wsR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFDQyxPQUFPLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDdkQ7SUFDQU4sS0FBSyxHQUFDSCxHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsYUFBYSxDQUFDSSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTdDLElBQUk7TUFDSk4sT0FBTyxHQUFDVCxHQUFHLENBQUNnQixNQUFNLENBQUNSLEtBQUssRUFBRVMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFlBQVksQ0FBQztJQUVuRCxDQUFDLFFBQU9DLENBQUMsRUFBRTtNQUNYLElBQUlBLENBQUMsQ0FBQ0MsSUFBSSxLQUFLLG1CQUFtQixFQUFFO1FBQ3BDZixHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQUNDLE9BQU8sRUFBRTtRQUE2RCxDQUFDLENBQUM7TUFDOUYsQ0FBQyxNQUFNO1FBQ1BSLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFBQ0MsT0FBTyxFQUFFO1FBQXVCLENBQUMsQ0FBQztNQUN4RDtNQUNBO0lBQ0E7SUFDSixJQUFJLENBQUNWLElBQUksSUFBSUEsSUFBSSxLQUFLSyxPQUFPLENBQUNMLElBQUksRUFBRztNQUNqQ0MsR0FBRyxDQUFDaUIsSUFBSSxHQUFHO1FBQ1BDLEtBQUssRUFBRWQsT0FBTyxDQUFDZSxHQUFHO1FBQ2xCcEIsSUFBSSxFQUFFSyxPQUFPLENBQUNMO01BQ2xCLENBQUM7TUFDREcsSUFBSSxFQUFFO0lBQ1YsQ0FBQyxNQUFNO01BQ0hELEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBQ0MsT0FBTyxFQUFFO01BQXFCLENBQUMsQ0FBQztJQUUxRDtFQUVKLENBQUM7QUFFTDtBQUNBVyxNQUFNLENBQUNDLE9BQU8sR0FBR3ZCLElBQUkifQ==","map":{"version":3,"names":["jwt","require","config","auth","role","req","res","next","token","payload","headers","authorization","status","send","message","split","verify","process","env","JWTSECRETKEY","e","name","user","email","sub","module","exports"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["auth.js"],"sourcesContent":["\nvar jwt = require('jsonwebtoken');\nvar config =  require ('../config.js')\n\nfunction auth(role) {\n\n    return async function(req, res, next) {\n\n        var token;\n        var payload;\n\n        if (!req.headers.authorization) {\n            return res.status(401).send({message: \"No autorizado\"})\n            }\n            token=req.headers.authorization.split(' ')[1];\n            \n            try {\n            payload=jwt.verify(token, process.env.JWTSECRETKEY);\n            \n            }catch (e) {\n            if (e.name === 'TokenExpiredError') {\n            res.status(401).send({message: \"Autorización expirada. Contacte con HospitalTenerife@sjd.es\"})\n            } else {\n            res.status(401).send({message: \"Autorización invalida\"})\n            }\n            return\n            }\n        if (!role || role === payload.role ) {\n            req.user = {\n                email: payload.sub,\n                role: payload.role\n            };\n            next();\n        } else {\n            res.status(401).send({message: 'No estas autorizado'});\n\n        }\n\n    }\n\n}\nmodule.exports = auth;\n"],"mappings":";;AACA,IAAIA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AACjC,IAAIC,MAAM,GAAID,OAAO,CAAE,cAAc,CAAC;AAEtC,SAASE,IAAI,CAACC,IAAI,EAAE;EAEhB,OAAO,gBAAeC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAElC,IAAIC,KAAK;IACT,IAAIC,OAAO;IAEX,IAAI,CAACJ,GAAG,CAACK,OAAO,CAACC,aAAa,EAAE;MAC5B,OAAOL,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAACC,OAAO,EAAE;MAAe,CAAC,CAAC;IACvD;IACAN,KAAK,GAACH,GAAG,CAACK,OAAO,CAACC,aAAa,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAE7C,IAAI;MACJN,OAAO,GAACT,GAAG,CAACgB,MAAM,CAACR,KAAK,EAAES,OAAO,CAACC,GAAG,CAACC,YAAY,CAAC;IAEnD,CAAC,QAAOC,CAAC,EAAE;MACX,IAAIA,CAAC,CAACC,IAAI,KAAK,mBAAmB,EAAE;QACpCf,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAACC,OAAO,EAAE;QAA6D,CAAC,CAAC;MAC9F,CAAC,MAAM;QACPR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAACC,OAAO,EAAE;QAAuB,CAAC,CAAC;MACxD;MACA;IACA;IACJ,IAAI,CAACV,IAAI,IAAIA,IAAI,KAAKK,OAAO,CAACL,IAAI,EAAG;MACjCC,GAAG,CAACiB,IAAI,GAAG;QACPC,KAAK,EAAEd,OAAO,CAACe,GAAG;QAClBpB,IAAI,EAAEK,OAAO,CAACL;MAClB,CAAC;MACDG,IAAI,EAAE;IACV,CAAC,MAAM;MACHD,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAACC,OAAO,EAAE;MAAqB,CAAC,CAAC;IAE1D;EAEJ,CAAC;AAEL;AACAW,MAAM,CAACC,OAAO,GAAGvB,IAAI"}},"mtime":1666005896919},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/database/connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConnection = getConnection;\nconst oracledb = require(\"oracledb\");\noracledb.autoCommit = true;\nlet connection;\nasync function getConnection() {\n  try {\n    connection = await oracledb.getConnection({\n      user: process.env.DB_USER,\n      password: process.env.DB_PASS,\n      connectionString: process.env.DB_TNS\n    });\n    return connection;\n  } catch (err) {\n    console.error(err.message);\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmFjbGVkYiIsInJlcXVpcmUiLCJhdXRvQ29tbWl0IiwiY29ubmVjdGlvbiIsImdldENvbm5lY3Rpb24iLCJ1c2VyIiwicHJvY2VzcyIsImVudiIsIkRCX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1MiLCJjb25uZWN0aW9uU3RyaW5nIiwiREJfVE5TIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvYzA3LWFkbWluaXN0cmFkb3IvanMvb3JhY2xlL2JhY2tlbmRzL2lkcnVzL2RhdGFiYXNlLyIsInNvdXJjZXMiOlsiY29ubmVjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBvcmFjbGVkYiA9IHJlcXVpcmUoXCJvcmFjbGVkYlwiKTtcbm9yYWNsZWRiLmF1dG9Db21taXQ9IHRydWU7XG5cbmxldCBjb25uZWN0aW9uO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBjb25uZWN0aW9uID0gYXdhaXQgb3JhY2xlZGIuZ2V0Q29ubmVjdGlvbih7XG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLFxuICAgICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1MsXG4gICAgICBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5EQl9UTlMsXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbm5lY3Rpb247XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICB9IFxufVxuXG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDRCxRQUFRLENBQUNFLFVBQVUsR0FBRSxJQUFJO0FBRXpCLElBQUlDLFVBQVU7QUFFUCxlQUFlQyxhQUFhLEdBQUc7RUFDcEMsSUFBSTtJQUNGRCxVQUFVLEdBQUcsTUFBTUgsUUFBUSxDQUFDSSxhQUFhLENBQUM7TUFDeENDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87TUFDekJDLFFBQVEsRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87TUFDN0JDLGdCQUFnQixFQUFFTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0s7SUFDaEMsQ0FBQyxDQUFDO0lBQ0YsT0FBT1QsVUFBVTtFQUNuQixDQUFDLENBQUMsT0FBT1UsR0FBRyxFQUFFO0lBQ1pDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDRixHQUFHLENBQUNHLE9BQU8sQ0FBQztFQUM1QjtBQUNGIn0=","map":{"version":3,"names":["oracledb","require","autoCommit","connection","getConnection","user","process","env","DB_USER","password","DB_PASS","connectionString","DB_TNS","err","console","error","message"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/database/","sources":["connection.js"],"sourcesContent":["const oracledb = require(\"oracledb\");\noracledb.autoCommit= true;\n\nlet connection;\n\nexport async function getConnection() {\n  try {\n    connection = await oracledb.getConnection({\n      user: process.env.DB_USER,\n      password: process.env.DB_PASS,\n      connectionString: process.env.DB_TNS,\n    });\n    return connection;\n  } catch (err) {\n    console.error(err.message);\n  } \n}\n\n\n"],"mappings":";;;;;;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpCD,QAAQ,CAACE,UAAU,GAAE,IAAI;AAEzB,IAAIC,UAAU;AAEP,eAAeC,aAAa,GAAG;EACpC,IAAI;IACFD,UAAU,GAAG,MAAMH,QAAQ,CAACI,aAAa,CAAC;MACxCC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;MACzBC,QAAQ,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;MAC7BC,gBAAgB,EAAEL,OAAO,CAACC,GAAG,CAACK;IAChC,CAAC,CAAC;IACF,OAAOT,UAAU;EACnB,CAAC,CAAC,OAAOU,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAACG,OAAO,CAAC;EAC5B;AACF"}},"mtime":1665997615203},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/encuestas.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEncuestasUrg = exports.getEncuestasTraReh = exports.getEncuestasPruebas = exports.getEncuestasHosp = exports.getEncuestasCex = exports.getEncuestasCalVida = void 0;\nvar _oracledb = _interopRequireDefault(require(\"oracledb\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar oracle = require('../database/connection.js');\nconst getEncuestasHosp = async (req, res, next) => {\n  const pool = await oracle.getConnection();\n  pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Hosp\", [], {\n    outFormat: _oracledb.default.OBJECT\n  }, function (err, result) {\n    if (err) {\n      console.log('Error el ejecutar la query:' + err.message);\n      res.writeHead(500, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify({\n        status: 500,\n        message: \"Error al recuperar muestra HOSP.\",\n        detailed_message: err.message\n      }));\n    } else {\n      res.writeHead(200, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify(result.rows));\n    }\n  });\n};\nexports.getEncuestasHosp = getEncuestasHosp;\nconst getEncuestasCex = async (req, res, next) => {\n  const pool = await oracle.getConnection();\n  pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Cex\", [], {\n    outFormat: _oracledb.default.OBJECT\n  }, function (err, result) {\n    if (err) {\n      console.log('Error el ejecutar la query:' + err.message);\n      res.writeHead(500, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify({\n        status: 500,\n        message: \"Error al recuperar muestra CEX.\",\n        detailed_message: err.message\n      }));\n    } else {\n      res.writeHead(200, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify(result.rows));\n    }\n  });\n};\nexports.getEncuestasCex = getEncuestasCex;\nconst getEncuestasTraReh = async (req, res, next) => {\n  const pool = await oracle.getConnection();\n  pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_TraReh\", [], {\n    outFormat: _oracledb.default.OBJECT\n  }, function (err, result) {\n    if (err) {\n      console.log('Error el ejecutar la query:' + err.message);\n      res.writeHead(500, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify({\n        status: 500,\n        message: \"Error al recuperar muestra Tra-Reh.\",\n        detailed_message: err.message\n      }));\n    } else {\n      res.writeHead(200, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify(result.rows));\n    }\n  });\n};\nexports.getEncuestasTraReh = getEncuestasTraReh;\nconst getEncuestasPruebas = async (req, res, next) => {\n  const pool = await oracle.getConnection();\n  pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Pruebas\", [], {\n    outFormat: _oracledb.default.OBJECT\n  }, function (err, result) {\n    if (err) {\n      console.log('Error el ejecutar la query:' + err.message);\n      res.writeHead(500, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify({\n        status: 500,\n        message: \"Error al recuperar muestra Pruebas.\",\n        detailed_message: err.message\n      }));\n    } else {\n      res.writeHead(200, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify(result.rows));\n    }\n  });\n};\nexports.getEncuestasPruebas = getEncuestasPruebas;\nconst getEncuestasUrg = async (req, res, next) => {\n  const pool = await oracle.getConnection();\n  pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Urg\", [], {\n    outFormat: _oracledb.default.OBJECT\n  }, function (err, result) {\n    if (err) {\n      console.log('Error el ejecutar la query:' + err.message);\n      res.writeHead(500, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify({\n        status: 500,\n        message: \"Error al recuperar muestra Urg.\",\n        detailed_message: err.message\n      }));\n    } else {\n      res.writeHead(200, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify(result.rows));\n    }\n  });\n};\nexports.getEncuestasUrg = getEncuestasUrg;\nconst getEncuestasCalVida = async (req, res, next) => {\n  //Validar fecha \n\n  var fecha = req.query.fecha;\n  if (fecha === undefined || !fechaValida(fecha)) {\n    res.writeHead(500, {\n      'Content-Type': 'application/json'\n    });\n    res.end(JSON.stringify({\n      status: 500,\n      message: \"Fecha Erronea\",\n      detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n    }));\n  } else {\n    const eje = fecha.substr(0, 4);\n    const mes = fecha.substr(4, 2);\n    const dia = fecha.substr(6, 2);\n    const fechacita = dia + '/' + mes + '/' + eje;\n    var fechacitamasuno;\n    var d = new Date(eje + '-' + mes + '-' + dia);\n    d.setDate(d.getDate() + 1);\n    fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' + ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_CalVida WHERE finterv > to_date(:fechacita,'DD/MM/YYYY') AND finterv < to_date(:fechacitamasuno,'DD/MM/YYYY')\", [fechacita, fechacitamasuno], {\n      outFormat: _oracledb.default.OBJECT\n    }, function (err, result) {\n      if (err) {\n        console.log('Error el ejecutar la query:' + err.message);\n        res.writeHead(500, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify({\n          status: 500,\n          message: \"Error private things\",\n          detailed_message: err.message\n        }));\n      } else {\n        res.writeHead(200, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify(result.rows));\n      }\n    });\n  }\n};\nexports.getEncuestasCalVida = getEncuestasCalVida;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmFjbGUiLCJyZXF1aXJlIiwiZ2V0RW5jdWVzdGFzSG9zcCIsInJlcSIsInJlcyIsIm5leHQiLCJwb29sIiwiZ2V0Q29ubmVjdGlvbiIsImV4ZWN1dGUiLCJvdXRGb3JtYXQiLCJvcmFjbGVkYiIsIk9CSkVDVCIsImVyciIsInJlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwid3JpdGVIZWFkIiwiZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsImRldGFpbGVkX21lc3NhZ2UiLCJyb3dzIiwiZ2V0RW5jdWVzdGFzQ2V4IiwiZ2V0RW5jdWVzdGFzVHJhUmVoIiwiZ2V0RW5jdWVzdGFzUHJ1ZWJhcyIsImdldEVuY3Vlc3Rhc1VyZyIsImdldEVuY3Vlc3Rhc0NhbFZpZGEiLCJmZWNoYSIsInF1ZXJ5IiwidW5kZWZpbmVkIiwiZmVjaGFWYWxpZGEiLCJlamUiLCJzdWJzdHIiLCJtZXMiLCJkaWEiLCJmZWNoYWNpdGEiLCJmZWNoYWNpdGFtYXN1bm8iLCJkIiwiRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwic2xpY2UiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9jMDctYWRtaW5pc3RyYWRvci9qcy9vcmFjbGUvYmFja2VuZHMvaWRydXMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJlbmN1ZXN0YXMuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgb3JhY2xlZGIgZnJvbSAnb3JhY2xlZGInO1xuXG5cbnZhciBvcmFjbGUgPSAgcmVxdWlyZSgnLi4vZGF0YWJhc2UvY29ubmVjdGlvbi5qcycpXG5cblxuZXhwb3J0IGNvbnN0IGdldEVuY3Vlc3Rhc0hvc3AgPSBhc3luYyhyZXEsIHJlcywgbmV4dCkgPT57XG4gICBcbiAgICBcbiAgICAgICAgY29uc3QgcG9vbCA9IGF3YWl0IG9yYWNsZS5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgIHBvb2wuZXhlY3V0ZShcIlNFTEVDVCAqIEZST00gVjA3X0lkcnVzX0VuY3Vlc3Rhc19Ib3NwXCIsW10sIHtvdXRGb3JtYXQ6IG9yYWNsZWRiLk9CSkVDVH0sIFxuICAgICAgICBmdW5jdGlvbihlcnIscmVzdWx0KSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nICgnRXJyb3IgZWwgZWplY3V0YXIgbGEgcXVlcnk6JyArIGVyci5tZXNzYWdlKVxuICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6NTAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6XCJFcnJvciBhbCByZWN1cGVyYXIgbXVlc3RyYSBIT1NQLlwiLFxuICAgICAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoMjAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeShyZXN1bHQucm93cykpO1xuICAgICAgICB9XG4gICAgfVxuICAgICk7XG59IFxuXG5cbmV4cG9ydCBjb25zdCBnZXRFbmN1ZXN0YXNDZXggPSBhc3luYyhyZXEsIHJlcywgbmV4dCkgPT57XG4gICBcbiAgICBcbiAgICBjb25zdCBwb29sID0gYXdhaXQgb3JhY2xlLmdldENvbm5lY3Rpb24oKTtcbiAgICBwb29sLmV4ZWN1dGUoXCJTRUxFQ1QgKiBGUk9NIFYwN19JZHJ1c19FbmN1ZXN0YXNfQ2V4XCIsW10sIHtvdXRGb3JtYXQ6IG9yYWNsZWRiLk9CSkVDVH0sIFxuICAgIGZ1bmN0aW9uKGVycixyZXN1bHQpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nICgnRXJyb3IgZWwgZWplY3V0YXIgbGEgcXVlcnk6JyArIGVyci5tZXNzYWdlKVxuICAgICAgICByZXMud3JpdGVIZWFkKDUwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBzdGF0dXM6NTAwLFxuICAgICAgICAgICAgbWVzc2FnZTpcIkVycm9yIGFsIHJlY3VwZXJhciBtdWVzdHJhIENFWC5cIixcbiAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIFxuICAgICAgICByZXMud3JpdGVIZWFkKDIwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeShyZXN1bHQucm93cykpO1xuICAgIH1cbn1cbik7XG59IFxuXG5leHBvcnQgY29uc3QgZ2V0RW5jdWVzdGFzVHJhUmVoID0gYXN5bmMocmVxLCByZXMsIG5leHQpID0+e1xuICAgXG4gICAgXG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IG9yYWNsZS5nZXRDb25uZWN0aW9uKCk7XG4gICAgcG9vbC5leGVjdXRlKFwiU0VMRUNUICogRlJPTSBWMDdfSWRydXNfRW5jdWVzdGFzX1RyYVJlaFwiLFtdLCB7b3V0Rm9ybWF0OiBvcmFjbGVkYi5PQkpFQ1R9LCBcbiAgICBmdW5jdGlvbihlcnIscmVzdWx0KSB7XG4gICAgaWYgKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyAoJ0Vycm9yIGVsIGVqZWN1dGFyIGxhIHF1ZXJ5OicgKyBlcnIubWVzc2FnZSlcbiAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgIG1lc3NhZ2U6XCJFcnJvciBhbCByZWN1cGVyYXIgbXVlc3RyYSBUcmEtUmVoLlwiLFxuICAgICAgICAgICAgZGV0YWlsZWRfbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgXG4gICAgICAgIHJlcy53cml0ZUhlYWQoMjAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHJlc3VsdC5yb3dzKSk7XG4gICAgfVxufVxuKTtcbn0gXG5cbmV4cG9ydCBjb25zdCBnZXRFbmN1ZXN0YXNQcnVlYmFzID0gYXN5bmMocmVxLCByZXMsIG5leHQpID0+e1xuICAgXG4gICAgXG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IG9yYWNsZS5nZXRDb25uZWN0aW9uKCk7XG4gICAgcG9vbC5leGVjdXRlKFwiU0VMRUNUICogRlJPTSBWMDdfSWRydXNfRW5jdWVzdGFzX1BydWViYXNcIixbXSwge291dEZvcm1hdDogb3JhY2xlZGIuT0JKRUNUfSwgXG4gICAgZnVuY3Rpb24oZXJyLHJlc3VsdCkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2cgKCdFcnJvciBlbCBlamVjdXRhciBsYSBxdWVyeTonICsgZXJyLm1lc3NhZ2UpXG4gICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHN0YXR1czo1MDAsXG4gICAgICAgICAgICBtZXNzYWdlOlwiRXJyb3IgYWwgcmVjdXBlcmFyIG11ZXN0cmEgUHJ1ZWJhcy5cIixcbiAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIFxuICAgICAgICByZXMud3JpdGVIZWFkKDIwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeShyZXN1bHQucm93cykpO1xuICAgIH1cbn1cbik7XG59IFxuXG5leHBvcnQgY29uc3QgZ2V0RW5jdWVzdGFzVXJnID0gYXN5bmMocmVxLCByZXMsIG5leHQpID0+e1xuICAgXG4gICAgXG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IG9yYWNsZS5nZXRDb25uZWN0aW9uKCk7XG4gICAgcG9vbC5leGVjdXRlKFwiU0VMRUNUICogRlJPTSBWMDdfSWRydXNfRW5jdWVzdGFzX1VyZ1wiLFtdLCB7b3V0Rm9ybWF0OiBvcmFjbGVkYi5PQkpFQ1R9LCBcbiAgICBmdW5jdGlvbihlcnIscmVzdWx0KSB7XG4gICAgaWYgKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyAoJ0Vycm9yIGVsIGVqZWN1dGFyIGxhIHF1ZXJ5OicgKyBlcnIubWVzc2FnZSlcbiAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgIG1lc3NhZ2U6XCJFcnJvciBhbCByZWN1cGVyYXIgbXVlc3RyYSBVcmcuXCIsXG4gICAgICAgICAgICBkZXRhaWxlZF9tZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBcbiAgICAgICAgcmVzLndyaXRlSGVhZCgyMDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkocmVzdWx0LnJvd3MpKTtcbiAgICB9XG59XG4pO1xufSBcblxuZXhwb3J0IGNvbnN0IGdldEVuY3Vlc3Rhc0NhbFZpZGEgPSBhc3luYyhyZXEsIHJlcywgbmV4dCkgPT57XG4gICBcbiAgICAgIC8vVmFsaWRhciBmZWNoYSBcbiBcbiAgICAgIHZhciBmZWNoYSA9IHJlcS5xdWVyeS5mZWNoYTtcbiAgXG5cbiAgICAgIGlmIChmZWNoYSA9PT11bmRlZmluZWQgfHwgIWZlY2hhVmFsaWRhKGZlY2hhKSkge1xuICAgICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgIHN0YXR1czo1MDAsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOlwiRmVjaGEgRXJyb25lYVwiLFxuICAgICAgICAgICAgICAgICAgZGV0YWlsZWRfbWVzc2FnZTogXCJJbnRyb2R1emNhIHVuYSBmZWNoYSB2w6FsaWRhIChZWVlZTU1ERClcIlxuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGVqZSA9IGZlY2hhLnN1YnN0cigwLDQpO1xuICAgICAgICAgIGNvbnN0IG1lcyA9IGZlY2hhLnN1YnN0cig0LDIpO1xuICAgICAgICAgIGNvbnN0IGRpYSA9IGZlY2hhLnN1YnN0cig2LDIpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGZlY2hhY2l0YSA9IGRpYSArICcvJyArIG1lcyArICcvJyArIGVqZTtcbiAgICAgICAgICB2YXIgZmVjaGFjaXRhbWFzdW5vO1xuICBcbiAgICAgIFxuICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoZWplICsgJy0nICsgbWVzICsgJy0nICsgZGlhKVxuICAgICAgICAgIGQuc2V0RGF0ZShkLmdldERhdGUoKSArIDEpXG4gICAgICAgICAgZmVjaGFjaXRhbWFzdW5vID0gKCcwJyArIGQuZ2V0RGF0ZSgpKS5zbGljZSgtMikgKyAnLycgKyAgKCcwJyArIChkLmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICsgJy8nICsgZC5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIFxuICBcbiAgICAgICAgICBjb25zdCBwb29sID0gYXdhaXQgb3JhY2xlLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICBwb29sLmV4ZWN1dGUoXCJTRUxFQ1QgKiBGUk9NIFYwN19JZHJ1c19FbmN1ZXN0YXNfQ2FsVmlkYSBXSEVSRSBmaW50ZXJ2ID4gdG9fZGF0ZSg6ZmVjaGFjaXRhLCdERC9NTS9ZWVlZJykgQU5EIGZpbnRlcnYgPCB0b19kYXRlKDpmZWNoYWNpdGFtYXN1bm8sJ0REL01NL1lZWVknKVwiICxbZmVjaGFjaXRhLCBmZWNoYWNpdGFtYXN1bm9dLCB7b3V0Rm9ybWF0OiBvcmFjbGVkYi5PQkpFQ1R9LCBcbiAgICAgICAgICBmdW5jdGlvbihlcnIscmVzdWx0KSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyAoJ0Vycm9yIGVsIGVqZWN1dGFyIGxhIHF1ZXJ5OicgKyBlcnIubWVzc2FnZSlcbiAgICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6XCJFcnJvciBwcml2YXRlIHRoaW5nc1wiLFxuICAgICAgICAgICAgICAgICAgZGV0YWlsZWRfbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoMjAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHJlc3VsdC5yb3dzKSk7XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgICAgKTtcbiAgfSBcbiAgICBcbn0gIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUFnQztBQUdoQyxJQUFJQSxNQUFNLEdBQUlDLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztBQUczQyxNQUFNQyxnQkFBZ0IsR0FBRyxPQUFNQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFJO0VBR2hELE1BQU1DLElBQUksR0FBRyxNQUFNTixNQUFNLENBQUNPLGFBQWEsRUFBRTtFQUN6Q0QsSUFBSSxDQUFDRSxPQUFPLENBQUMsd0NBQXdDLEVBQUMsRUFBRSxFQUFFO0lBQUNDLFNBQVMsRUFBRUMsaUJBQVEsQ0FBQ0M7RUFBTSxDQUFDLEVBQ3RGLFVBQVNDLEdBQUcsRUFBQ0MsTUFBTSxFQUFFO0lBQ3JCLElBQUlELEdBQUcsRUFBRTtNQUNMRSxPQUFPLENBQUNDLEdBQUcsQ0FBRSw2QkFBNkIsR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUM7TUFDekRaLEdBQUcsQ0FBQ2EsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUFDLGNBQWMsRUFBRTtNQUFrQixDQUFDLENBQUM7TUFDeERiLEdBQUcsQ0FBQ2MsR0FBRyxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztRQUNuQkMsTUFBTSxFQUFDLEdBQUc7UUFDVkwsT0FBTyxFQUFDLGtDQUFrQztRQUMxQ00sZ0JBQWdCLEVBQUVWLEdBQUcsQ0FBQ0k7TUFDMUIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLE1BQ0k7TUFFRFosR0FBRyxDQUFDYSxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQUMsY0FBYyxFQUFFO01BQWtCLENBQUMsQ0FBQztNQUN4RGIsR0FBRyxDQUFDYyxHQUFHLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDUCxNQUFNLENBQUNVLElBQUksQ0FBQyxDQUFDO0lBQ3hDO0VBQ0osQ0FBQyxDQUNBO0FBQ0wsQ0FBQztBQUFBO0FBR00s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","map":{"version":3,"names":["oracle","require","getEncuestasHosp","req","res","next","pool","getConnection","execute","outFormat","oracledb","OBJECT","err","result","console","log","message","writeHead","end","JSON","stringify","status","detailed_message","rows","getEncuestasCex","getEncuestasTraReh","getEncuestasPruebas","getEncuestasUrg","getEncuestasCalVida","fecha","query","undefined","fechaValida","eje","substr","mes","dia","fechacita","fechacitamasuno","d","Date","setDate","getDate","slice","getMonth","getFullYear"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/controllers/","sources":["encuestas.controller.js"],"sourcesContent":["import oracledb from 'oracledb';\n\n\nvar oracle =  require('../database/connection.js')\n\n\nexport const getEncuestasHosp = async(req, res, next) =>{\n   \n    \n        const pool = await oracle.getConnection();\n        pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Hosp\",[], {outFormat: oracledb.OBJECT}, \n        function(err,result) {\n        if (err) {\n            console.log ('Error el ejecutar la query:' + err.message)\n            res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Error al recuperar muestra HOSP.\",\n                detailed_message: err.message\n            }));\n        }\n        else {\n            \n            res.writeHead(200, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify(result.rows));\n        }\n    }\n    );\n} \n\n\nexport const getEncuestasCex = async(req, res, next) =>{\n   \n    \n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Cex\",[], {outFormat: oracledb.OBJECT}, \n    function(err,result) {\n    if (err) {\n        console.log ('Error el ejecutar la query:' + err.message)\n        res.writeHead(500, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify({\n            status:500,\n            message:\"Error al recuperar muestra CEX.\",\n            detailed_message: err.message\n        }));\n    }\n    else {\n        \n        res.writeHead(200, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify(result.rows));\n    }\n}\n);\n} \n\nexport const getEncuestasTraReh = async(req, res, next) =>{\n   \n    \n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_TraReh\",[], {outFormat: oracledb.OBJECT}, \n    function(err,result) {\n    if (err) {\n        console.log ('Error el ejecutar la query:' + err.message)\n        res.writeHead(500, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify({\n            status:500,\n            message:\"Error al recuperar muestra Tra-Reh.\",\n            detailed_message: err.message\n        }));\n    }\n    else {\n        \n        res.writeHead(200, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify(result.rows));\n    }\n}\n);\n} \n\nexport const getEncuestasPruebas = async(req, res, next) =>{\n   \n    \n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Pruebas\",[], {outFormat: oracledb.OBJECT}, \n    function(err,result) {\n    if (err) {\n        console.log ('Error el ejecutar la query:' + err.message)\n        res.writeHead(500, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify({\n            status:500,\n            message:\"Error al recuperar muestra Pruebas.\",\n            detailed_message: err.message\n        }));\n    }\n    else {\n        \n        res.writeHead(200, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify(result.rows));\n    }\n}\n);\n} \n\nexport const getEncuestasUrg = async(req, res, next) =>{\n   \n    \n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Urg\",[], {outFormat: oracledb.OBJECT}, \n    function(err,result) {\n    if (err) {\n        console.log ('Error el ejecutar la query:' + err.message)\n        res.writeHead(500, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify({\n            status:500,\n            message:\"Error al recuperar muestra Urg.\",\n            detailed_message: err.message\n        }));\n    }\n    else {\n        \n        res.writeHead(200, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify(result.rows));\n    }\n}\n);\n} \n\nexport const getEncuestasCalVida = async(req, res, next) =>{\n   \n      //Validar fecha \n \n      var fecha = req.query.fecha;\n  \n\n      if (fecha ===undefined || !fechaValida(fecha)) {\n          res.writeHead(500, {'Content-Type': 'application/json'});\n              res.end(JSON.stringify({\n                  status:500,\n                  message:\"Fecha Erronea\",\n                  detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n              }));\n          \n      } else {\n          \n          const eje = fecha.substr(0,4);\n          const mes = fecha.substr(4,2);\n          const dia = fecha.substr(6,2);\n          \n          const fechacita = dia + '/' + mes + '/' + eje;\n          var fechacitamasuno;\n  \n      \n          var d = new Date(eje + '-' + mes + '-' + dia)\n          d.setDate(d.getDate() + 1)\n          fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' +  ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n          \n  \n          const pool = await oracle.getConnection();\n          pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_CalVida WHERE finterv > to_date(:fechacita,'DD/MM/YYYY') AND finterv < to_date(:fechacitamasuno,'DD/MM/YYYY')\" ,[fechacita, fechacitamasuno], {outFormat: oracledb.OBJECT}, \n          function(err,result) {\n          if (err) {\n              console.log ('Error el ejecutar la query:' + err.message)\n              res.writeHead(500, {'Content-Type': 'application/json'});\n              res.end(JSON.stringify({\n                  status:500,\n                  message:\"Error private things\",\n                  detailed_message: err.message\n              }));\n          }\n          else {\n              \n              res.writeHead(200, {'Content-Type': 'application/json'});\n              res.end(JSON.stringify(result.rows));\n          }\n      }\n      );\n  } \n    \n} "],"mappings":"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"}},"mtime":1668001211369},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/encuestas.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _auth = _interopRequireDefault(require(\"./auth\"));\nvar _encuestas = require(\"../controllers/encuestas.controller\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar express = require('express');\nconst router = express.Router();\nrouter.get('/api/idrus/encuestas/hosp', (0, _auth.default)(), _encuestas.getEncuestasHosp);\nrouter.get('/api/idrus/encuestas/cex', (0, _auth.default)(), _encuestas.getEncuestasCex);\nrouter.get('/api/idrus/encuestas/trareh', (0, _auth.default)(), _encuestas.getEncuestasTraReh);\nrouter.get('/api/idrus/encuestas/pruebas', (0, _auth.default)(), _encuestas.getEncuestasPruebas);\nrouter.get('/api/idrus/encuestas/urg', (0, _auth.default)(), _encuestas.getEncuestasUrg);\nrouter.get('/api/idrus/encuestas/calvida/', (0, _auth.default)(), _encuestas.getEncuestasCalVida);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImdldCIsImF1dGgiLCJnZXRFbmN1ZXN0YXNIb3NwIiwiZ2V0RW5jdWVzdGFzQ2V4IiwiZ2V0RW5jdWVzdGFzVHJhUmVoIiwiZ2V0RW5jdWVzdGFzUHJ1ZWJhcyIsImdldEVuY3Vlc3Rhc1VyZyIsImdldEVuY3Vlc3Rhc0NhbFZpZGEiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy9yb3V0ZXMvIiwic291cmNlcyI6WyJlbmN1ZXN0YXMucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IGF1dGggZnJvbSBcIi4vYXV0aFwiO1xuXG5pbXBvcnQge2dldEVuY3Vlc3Rhc0hvc3AsIGdldEVuY3Vlc3Rhc0NleCwgZ2V0RW5jdWVzdGFzVHJhUmVoLCBnZXRFbmN1ZXN0YXNQcnVlYmFzLCBnZXRFbmN1ZXN0YXNVcmcsIGdldEVuY3Vlc3Rhc0NhbFZpZGF9IGZyb20gJy4uL2NvbnRyb2xsZXJzL2VuY3Vlc3Rhcy5jb250cm9sbGVyJ1xuXG52YXIgZXhwcmVzcyA9IHJlcXVpcmUgKCdleHByZXNzJyk7XG5cbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnJvdXRlci5nZXQoJy9hcGkvaWRydXMvZW5jdWVzdGFzL2hvc3AnLCBhdXRoKCksICBnZXRFbmN1ZXN0YXNIb3NwKTtcbnJvdXRlci5nZXQoJy9hcGkvaWRydXMvZW5jdWVzdGFzL2NleCcsIGF1dGgoKSwgIGdldEVuY3Vlc3Rhc0NleCk7XG5yb3V0ZXIuZ2V0KCcvYXBpL2lkcnVzL2VuY3Vlc3Rhcy90cmFyZWgnLCBhdXRoKCksICBnZXRFbmN1ZXN0YXNUcmFSZWgpO1xucm91dGVyLmdldCgnL2FwaS9pZHJ1cy9lbmN1ZXN0YXMvcHJ1ZWJhcycsIGF1dGgoKSwgIGdldEVuY3Vlc3Rhc1BydWViYXMpO1xucm91dGVyLmdldCgnL2FwaS9pZHJ1cy9lbmN1ZXN0YXMvdXJnJywgYXV0aCgpLCAgZ2V0RW5jdWVzdGFzVXJnKTtcbnJvdXRlci5nZXQoJy9hcGkvaWRydXMvZW5jdWVzdGFzL2NhbHZpZGEvJywgYXV0aCgpLCAgZ2V0RW5jdWVzdGFzQ2FsVmlkYSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUVBO0FBQW9LO0FBRXBLLElBQUlBLE9BQU8sR0FBR0MsT0FBTyxDQUFFLFNBQVMsQ0FBQztBQUVqQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBTSxFQUFFO0FBRS9CRCxNQUFNLENBQUNFLEdBQUcsQ0FBQywyQkFBMkIsRUFBRSxJQUFBQyxhQUFJLEdBQUUsRUFBR0MsMkJBQWdCLENBQUM7QUFDbEVKLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLDBCQUEwQixFQUFFLElBQUFDLGFBQUksR0FBRSxFQUFHRSwwQkFBZSxDQUFDO0FBQ2hFTCxNQUFNLENBQUNFLEdBQUcsQ0FBQyw2QkFBNkIsRUFBRSxJQUFBQyxhQUFJLEdBQUUsRUFBR0csNkJBQWtCLENBQUM7QUFDdEVOLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLDhCQUE4QixFQUFFLElBQUFDLGFBQUksR0FBRSxFQUFHSSw4QkFBbUIsQ0FBQztBQUN4RVAsTUFBTSxDQUFDRSxHQUFHLENBQUMsMEJBQTBCLEVBQUUsSUFBQUMsYUFBSSxHQUFFLEVBQUdLLDBCQUFlLENBQUM7QUFDaEVSLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLCtCQUErQixFQUFFLElBQUFDLGFBQUksR0FBRSxFQUFHTSw4QkFBbUIsQ0FBQztBQUFDLGVBRTNEVCxNQUFNO0FBQUEifQ==","map":{"version":3,"names":["express","require","router","Router","get","auth","getEncuestasHosp","getEncuestasCex","getEncuestasTraReh","getEncuestasPruebas","getEncuestasUrg","getEncuestasCalVida"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["encuestas.routes.js"],"sourcesContent":["\nimport auth from \"./auth\";\n\nimport {getEncuestasHosp, getEncuestasCex, getEncuestasTraReh, getEncuestasPruebas, getEncuestasUrg, getEncuestasCalVida} from '../controllers/encuestas.controller'\n\nvar express = require ('express');\n\nconst router = express.Router();\n\nrouter.get('/api/idrus/encuestas/hosp', auth(),  getEncuestasHosp);\nrouter.get('/api/idrus/encuestas/cex', auth(),  getEncuestasCex);\nrouter.get('/api/idrus/encuestas/trareh', auth(),  getEncuestasTraReh);\nrouter.get('/api/idrus/encuestas/pruebas', auth(),  getEncuestasPruebas);\nrouter.get('/api/idrus/encuestas/urg', auth(),  getEncuestasUrg);\nrouter.get('/api/idrus/encuestas/calvida/', auth(),  getEncuestasCalVida);\n\nexport default router;\n\n"],"mappings":";;;;;;AACA;AAEA;AAAoK;AAEpK,IAAIA,OAAO,GAAGC,OAAO,CAAE,SAAS,CAAC;AAEjC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,EAAE;AAE/BD,MAAM,CAACE,GAAG,CAAC,2BAA2B,EAAE,IAAAC,aAAI,GAAE,EAAGC,2BAAgB,CAAC;AAClEJ,MAAM,CAACE,GAAG,CAAC,0BAA0B,EAAE,IAAAC,aAAI,GAAE,EAAGE,0BAAe,CAAC;AAChEL,MAAM,CAACE,GAAG,CAAC,6BAA6B,EAAE,IAAAC,aAAI,GAAE,EAAGG,6BAAkB,CAAC;AACtEN,MAAM,CAACE,GAAG,CAAC,8BAA8B,EAAE,IAAAC,aAAI,GAAE,EAAGI,8BAAmB,CAAC;AACxEP,MAAM,CAACE,GAAG,CAAC,0BAA0B,EAAE,IAAAC,aAAI,GAAE,EAAGK,0BAAe,CAAC;AAChER,MAAM,CAACE,GAAG,CAAC,+BAA+B,EAAE,IAAAC,aAAI,GAAE,EAAGM,8BAAmB,CAAC;AAAC,eAE3DT,MAAM;AAAA"}},"mtime":1668001275090},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/encuestas.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEncuestasUrg = exports.getEncuestasTraReh = exports.getEncuestasPruebas = exports.getEncuestasHosp = exports.getEncuestasCex = exports.getEncuestasCalVida = void 0;\nvar _oracledb = _interopRequireDefault(require(\"oracledb\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar oracle = require('../database/connection.js');\nfunction fechaValida(fecha) {\n  if (fecha.length !== 8) {\n    return false;\n  }\n  const eje = fecha.substr(0, 4);\n  const mes = fecha.substr(4, 2);\n  const dia = fecha.substr(6, 2);\n  console.log(dia + '/' + mes + '/' + eje);\n  var date = (0, _moment.default)(fecha, 'YYYYMMDD');\n  if (date.isValid()) return true;\n  return false;\n}\nconst getEncuestasHosp = async (req, res, next) => {\n  const pool = await oracle.getConnection();\n  pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Hosp\", [], {\n    outFormat: _oracledb.default.OBJECT\n  }, function (err, result) {\n    if (err) {\n      console.log('Error el ejecutar la query:' + err.message);\n      res.writeHead(500, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify({\n        status: 500,\n        message: \"Error al recuperar muestra HOSP.\",\n        detailed_message: err.message\n      }));\n    } else {\n      res.writeHead(200, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify(result.rows));\n    }\n  });\n};\nexports.getEncuestasHosp = getEncuestasHosp;\nconst getEncuestasCex = async (req, res, next) => {\n  const pool = await oracle.getConnection();\n  pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Cex\", [], {\n    outFormat: _oracledb.default.OBJECT\n  }, function (err, result) {\n    if (err) {\n      console.log('Error el ejecutar la query:' + err.message);\n      res.writeHead(500, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify({\n        status: 500,\n        message: \"Error al recuperar muestra CEX.\",\n        detailed_message: err.message\n      }));\n    } else {\n      res.writeHead(200, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify(result.rows));\n    }\n  });\n};\nexports.getEncuestasCex = getEncuestasCex;\nconst getEncuestasTraReh = async (req, res, next) => {\n  const pool = await oracle.getConnection();\n  pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_TraReh\", [], {\n    outFormat: _oracledb.default.OBJECT\n  }, function (err, result) {\n    if (err) {\n      console.log('Error el ejecutar la query:' + err.message);\n      res.writeHead(500, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify({\n        status: 500,\n        message: \"Error al recuperar muestra Tra-Reh.\",\n        detailed_message: err.message\n      }));\n    } else {\n      res.writeHead(200, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify(result.rows));\n    }\n  });\n};\nexports.getEncuestasTraReh = getEncuestasTraReh;\nconst getEncuestasPruebas = async (req, res, next) => {\n  const pool = await oracle.getConnection();\n  pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Pruebas\", [], {\n    outFormat: _oracledb.default.OBJECT\n  }, function (err, result) {\n    if (err) {\n      console.log('Error el ejecutar la query:' + err.message);\n      res.writeHead(500, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify({\n        status: 500,\n        message: \"Error al recuperar muestra Pruebas.\",\n        detailed_message: err.message\n      }));\n    } else {\n      res.writeHead(200, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify(result.rows));\n    }\n  });\n};\nexports.getEncuestasPruebas = getEncuestasPruebas;\nconst getEncuestasUrg = async (req, res, next) => {\n  const pool = await oracle.getConnection();\n  pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Urg\", [], {\n    outFormat: _oracledb.default.OBJECT\n  }, function (err, result) {\n    if (err) {\n      console.log('Error el ejecutar la query:' + err.message);\n      res.writeHead(500, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify({\n        status: 500,\n        message: \"Error al recuperar muestra Urg.\",\n        detailed_message: err.message\n      }));\n    } else {\n      res.writeHead(200, {\n        'Content-Type': 'application/json'\n      });\n      res.end(JSON.stringify(result.rows));\n    }\n  });\n};\nexports.getEncuestasUrg = getEncuestasUrg;\nconst getEncuestasCalVida = async (req, res, next) => {\n  //Validar fecha \n\n  var fecha = req.query.fecha;\n  if (fecha === undefined || !fechaValida(fecha)) {\n    res.writeHead(500, {\n      'Content-Type': 'application/json'\n    });\n    res.end(JSON.stringify({\n      status: 500,\n      message: \"Fecha Erronea\",\n      detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n    }));\n  } else {\n    const eje = fecha.substr(0, 4);\n    const mes = fecha.substr(4, 2);\n    const dia = fecha.substr(6, 2);\n    const fechacita = dia + '/' + mes + '/' + eje;\n    var fechacitamasuno;\n    var d = new Date(eje + '-' + mes + '-' + dia);\n    d.setDate(d.getDate() + 1);\n    fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' + ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_CalVida WHERE finterv > to_date(:fechacita,'DD/MM/YYYY') AND finterv < to_date(:fechacitamasuno,'DD/MM/YYYY')\", [fechacita, fechacitamasuno], {\n      outFormat: _oracledb.default.OBJECT\n    }, function (err, result) {\n      if (err) {\n        console.log('Error el ejecutar la query:' + err.message);\n        res.writeHead(500, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify({\n          status: 500,\n          message: \"Error private things\",\n          detailed_message: err.message\n        }));\n      } else {\n        res.writeHead(200, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify(result.rows));\n      }\n    });\n  }\n};\nexports.getEncuestasCalVida = getEncuestasCalVida;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmFjbGUiLCJyZXF1aXJlIiwiZmVjaGFWYWxpZGEiLCJmZWNoYSIsImxlbmd0aCIsImVqZSIsInN1YnN0ciIsIm1lcyIsImRpYSIsImNvbnNvbGUiLCJsb2ciLCJkYXRlIiwibW9tZW50IiwiaXNWYWxpZCIsImdldEVuY3Vlc3Rhc0hvc3AiLCJyZXEiLCJyZXMiLCJuZXh0IiwicG9vbCIsImdldENvbm5lY3Rpb24iLCJleGVjdXRlIiwib3V0Rm9ybWF0Iiwib3JhY2xlZGIiLCJPQkpFQ1QiLCJlcnIiLCJyZXN1bHQiLCJtZXNzYWdlIiwid3JpdGVIZWFkIiwiZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsImRldGFpbGVkX21lc3NhZ2UiLCJyb3dzIiwiZ2V0RW5jdWVzdGFzQ2V4IiwiZ2V0RW5jdWVzdGFzVHJhUmVoIiwiZ2V0RW5jdWVzdGFzUHJ1ZWJhcyIsImdldEVuY3Vlc3Rhc1VyZyIsImdldEVuY3Vlc3Rhc0NhbFZpZGEiLCJxdWVyeSIsInVuZGVmaW5lZCIsImZlY2hhY2l0YSIsImZlY2hhY2l0YW1hc3VubyIsImQiLCJEYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJzbGljZSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImVuY3Vlc3Rhcy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBvcmFjbGVkYiBmcm9tICdvcmFjbGVkYic7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5cblxudmFyIG9yYWNsZSA9ICByZXF1aXJlKCcuLi9kYXRhYmFzZS9jb25uZWN0aW9uLmpzJylcblxuXG5mdW5jdGlvbiBmZWNoYVZhbGlkYShmZWNoYSkge1xuXG4gICAgaWYoZmVjaGEubGVuZ3RoICE9PSA4KSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBlamUgPSBmZWNoYS5zdWJzdHIoMCw0KTtcbiAgICBjb25zdCBtZXMgPSBmZWNoYS5zdWJzdHIoNCwyKTtcbiAgICBjb25zdCBkaWEgPSBmZWNoYS5zdWJzdHIoNiwyKTtcblxuICAgIGNvbnNvbGUubG9nKGRpYSArICcvJyArIG1lcyArICcvJyArIGVqZSlcblxuICAgIHZhciBkYXRlID0gbW9tZW50KGZlY2hhLCdZWVlZTU1ERCcpO1xuICAgIFxuICAgIGlmIChkYXRlLmlzVmFsaWQoKSkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gZmFsc2U7XG5cbn1cblxuXG5cbmV4cG9ydCBjb25zdCBnZXRFbmN1ZXN0YXNIb3NwID0gYXN5bmMocmVxLCByZXMsIG5leHQpID0+e1xuICAgXG4gICAgXG4gICAgICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBvcmFjbGUuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICBwb29sLmV4ZWN1dGUoXCJTRUxFQ1QgKiBGUk9NIFYwN19JZHJ1c19FbmN1ZXN0YXNfSG9zcFwiLFtdLCB7b3V0Rm9ybWF0OiBvcmFjbGVkYi5PQkpFQ1R9LCBcbiAgICAgICAgZnVuY3Rpb24oZXJyLHJlc3VsdCkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyAoJ0Vycm9yIGVsIGVqZWN1dGFyIGxhIHF1ZXJ5OicgKyBlcnIubWVzc2FnZSlcbiAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOlwiRXJyb3IgYWwgcmVjdXBlcmFyIG11ZXN0cmEgSE9TUC5cIixcbiAgICAgICAgICAgICAgICBkZXRhaWxlZF9tZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXMud3JpdGVIZWFkKDIwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkocmVzdWx0LnJvd3MpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICApO1xufSBcblxuXG5leHBvcnQgY29uc3QgZ2V0RW5jdWVzdGFzQ2V4ID0gYXN5bmMocmVxLCByZXMsIG5leHQpID0+e1xuICAgXG4gICAgXG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IG9yYWNsZS5nZXRDb25uZWN0aW9uKCk7XG4gICAgcG9vbC5leGVjdXRlKFwiU0VMRUNUICogRlJPTSBWMDdfSWRydXNfRW5jdWVzdGFzX0NleFwiLFtdLCB7b3V0Rm9ybWF0OiBvcmFjbGVkYi5PQkpFQ1R9LCBcbiAgICBmdW5jdGlvbihlcnIscmVzdWx0KSB7XG4gICAgaWYgKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyAoJ0Vycm9yIGVsIGVqZWN1dGFyIGxhIHF1ZXJ5OicgKyBlcnIubWVzc2FnZSlcbiAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgIG1lc3NhZ2U6XCJFcnJvciBhbCByZWN1cGVyYXIgbXVlc3RyYSBDRVguXCIsXG4gICAgICAgICAgICBkZXRhaWxlZF9tZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBcbiAgICAgICAgcmVzLndyaXRlSGVhZCgyMDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkocmVzdWx0LnJvd3MpKTtcbiAgICB9XG59XG4pO1xufSBcblxuZXhwb3J0IGNvbnN0IGdldEVuY3Vlc3Rhc1RyYVJlaCA9IGFzeW5jKHJlcSwgcmVzLCBuZXh0KSA9PntcbiAgIFxuICAgIFxuICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBvcmFjbGUuZ2V0Q29ubmVjdGlvbigpO1xuICAgIHBvb2wuZXhlY3V0ZShcIlNFTEVDVCAqIEZST00gVjA3X0lkcnVzX0VuY3Vlc3Rhc19UcmFSZWhcIixbXSwge291dEZvcm1hdDogb3JhY2xlZGIuT0JKRUNUfSwgXG4gICAgZnVuY3Rpb24oZXJyLHJlc3VsdCkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2cgKCdFcnJvciBlbCBlamVjdXRhciBsYSBxdWVyeTonICsgZXJyLm1lc3NhZ2UpXG4gICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHN0YXR1czo1MDAsXG4gICAgICAgICAgICBtZXNzYWdlOlwiRXJyb3IgYWwgcmVjdXBlcmFyIG11ZXN0cmEgVHJhLVJlaC5cIixcbiAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIFxuICAgICAgICByZXMud3JpdGVIZWFkKDIwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeShyZXN1bHQucm93cykpO1xuICAgIH1cbn1cbik7XG59IFxuXG5leHBvcnQgY29uc3QgZ2V0RW5jdWVzdGFzUHJ1ZWJhcyA9IGFzeW5jKHJlcSwgcmVzLCBuZXh0KSA9PntcbiAgIFxuICAgIFxuICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBvcmFjbGUuZ2V0Q29ubmVjdGlvbigpO1xuICAgIHBvb2wuZXhlY3V0ZShcIlNFTEVDVCAqIEZST00gVjA3X0lkcnVzX0VuY3Vlc3Rhc19QcnVlYmFzXCIsW10sIHtvdXRGb3JtYXQ6IG9yYWNsZWRiLk9CSkVDVH0sIFxuICAgIGZ1bmN0aW9uKGVycixyZXN1bHQpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nICgnRXJyb3IgZWwgZWplY3V0YXIgbGEgcXVlcnk6JyArIGVyci5tZXNzYWdlKVxuICAgICAgICByZXMud3JpdGVIZWFkKDUwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBzdGF0dXM6NTAwLFxuICAgICAgICAgICAgbWVzc2FnZTpcIkVycm9yIGFsIHJlY3VwZXJhciBtdWVzdHJhIFBydWViYXMuXCIsXG4gICAgICAgICAgICBkZXRhaWxlZF9tZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBcbiAgICAgICAgcmVzLndyaXRlSGVhZCgyMDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkocmVzdWx0LnJvd3MpKTtcbiAgICB9XG59XG4pO1xufSBcblxuZXhwb3J0IGNvbnN0IGdldEVuY3Vlc3Rhc1VyZyA9IGFzeW5jKHJlcSwgcmVzLCBuZXh0KSA9PntcbiAgIFxuICAgIFxuICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBvcmFjbGUuZ2V0Q29ubmVjdGlvbigpO1xuICAgIHBvb2wuZXhlY3V0ZShcIlNFTEVDVCAqIEZST00gVjA3X0lkcnVzX0VuY3Vlc3Rhc19VcmdcIixbXSwge291dEZvcm1hdDogb3JhY2xlZGIuT0JKRUNUfSwgXG4gICAgZnVuY3Rpb24oZXJyLHJlc3VsdCkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2cgKCdFcnJvciBlbCBlamVjdXRhciBsYSBxdWVyeTonICsgZXJyLm1lc3NhZ2UpXG4gICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHN0YXR1czo1MDAsXG4gICAgICAgICAgICBtZXNzYWdlOlwiRXJyb3IgYWwgcmVjdXBlcmFyIG11ZXN0cmEgVXJnLlwiLFxuICAgICAgICAgICAgZGV0YWlsZWRfbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgXG4gICAgICAgIHJlcy53cml0ZUhlYWQoMjAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHJlc3VsdC5yb3dzKSk7XG4gICAgfVxufVxuKTtcbn0gXG5cbmV4cG9ydCBjb25zdCBnZXRFbmN1ZXN0YXNDYWxWaWRhID0gYXN5bmMocmVxLCByZXMsIG5leHQpID0+e1xuICAgXG4gICAgICAvL1ZhbGlkYXIgZmVjaGEgXG4gXG4gICAgICB2YXIgZmVjaGEgPSByZXEucXVlcnkuZmVjaGE7XG4gIFxuXG4gICAgICBpZiAoZmVjaGEgPT09dW5kZWZpbmVkIHx8ICFmZWNoYVZhbGlkYShmZWNoYSkpIHtcbiAgICAgICAgICByZXMud3JpdGVIZWFkKDUwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICBzdGF0dXM6NTAwLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTpcIkZlY2hhIEVycm9uZWFcIixcbiAgICAgICAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IFwiSW50cm9kdXpjYSB1bmEgZmVjaGEgdsOhbGlkYSAoWVlZWU1NREQpXCJcbiAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBlamUgPSBmZWNoYS5zdWJzdHIoMCw0KTtcbiAgICAgICAgICBjb25zdCBtZXMgPSBmZWNoYS5zdWJzdHIoNCwyKTtcbiAgICAgICAgICBjb25zdCBkaWEgPSBmZWNoYS5zdWJzdHIoNiwyKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBmZWNoYWNpdGEgPSBkaWEgKyAnLycgKyBtZXMgKyAnLycgKyBlamU7XG4gICAgICAgICAgdmFyIGZlY2hhY2l0YW1hc3VubztcbiAgXG4gICAgICBcbiAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKGVqZSArICctJyArIG1lcyArICctJyArIGRpYSlcbiAgICAgICAgICBkLnNldERhdGUoZC5nZXREYXRlKCkgKyAxKVxuICAgICAgICAgIGZlY2hhY2l0YW1hc3VubyA9ICgnMCcgKyBkLmdldERhdGUoKSkuc2xpY2UoLTIpICsgJy8nICsgICgnMCcgKyAoZC5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKSArICcvJyArIGQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICBcbiAgXG4gICAgICAgICAgY29uc3QgcG9vbCA9IGF3YWl0IG9yYWNsZS5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgcG9vbC5leGVjdXRlKFwiU0VMRUNUICogRlJPTSBWMDdfSWRydXNfRW5jdWVzdGFzX0NhbFZpZGEgV0hFUkUgZmludGVydiA+IHRvX2RhdGUoOmZlY2hhY2l0YSwnREQvTU0vWVlZWScpIEFORCBmaW50ZXJ2IDwgdG9fZGF0ZSg6ZmVjaGFjaXRhbWFzdW5vLCdERC9NTS9ZWVlZJylcIiAsW2ZlY2hhY2l0YSwgZmVjaGFjaXRhbWFzdW5vXSwge291dEZvcm1hdDogb3JhY2xlZGIuT0JKRUNUfSwgXG4gICAgICAgICAgZnVuY3Rpb24oZXJyLHJlc3VsdCkge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cgKCdFcnJvciBlbCBlamVjdXRhciBsYSBxdWVyeTonICsgZXJyLm1lc3NhZ2UpXG4gICAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgIHN0YXR1czo1MDAsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOlwiRXJyb3IgcHJpdmF0ZSB0aGluZ3NcIixcbiAgICAgICAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXMud3JpdGVIZWFkKDIwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeShyZXN1bHQucm93cykpO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgICk7XG4gIH0gXG4gICAgXG59ICJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUE0QjtBQUc1QixJQUFJQSxNQUFNLEdBQUlDLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztBQUdsRCxTQUFTQyxXQUFXLENBQUNDLEtBQUssRUFBRTtFQUV4QixJQUFHQSxLQUFLLENBQUNDLE1BQU0sS0FBSyxDQUFDLEVBQUU7SUFDbkIsT0FBTyxLQUFLO0VBQ2hCO0VBQ0EsTUFBTUMsR0FBRyxHQUFHRixLQUFLLENBQUNHLE1BQU0sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0VBQzdCLE1BQU1DLEdBQUcsR0FBR0osS0FBSyxDQUFDRyxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztFQUM3QixNQUFNRSxHQUFHLEdBQUdMLEtBQUssQ0FBQ0csTUFBTSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7RUFFN0JH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","map":{"version":3,"names":["oracle","require","fechaValida","fecha","length","eje","substr","mes","dia","console","log","date","moment","isValid","getEncuestasHosp","req","res","next","pool","getConnection","execute","outFormat","oracledb","OBJECT","err","result","message","writeHead","end","JSON","stringify","status","detailed_message","rows","getEncuestasCex","getEncuestasTraReh","getEncuestasPruebas","getEncuestasUrg","getEncuestasCalVida","query","undefined","fechacita","fechacitamasuno","d","Date","setDate","getDate","slice","getMonth","getFullYear"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/controllers/","sources":["encuestas.controller.js"],"sourcesContent":["import oracledb from 'oracledb';\nimport moment from 'moment';\n\n\nvar oracle =  require('../database/connection.js')\n\n\nfunction fechaValida(fecha) {\n\n    if(fecha.length !== 8) {\n        return false\n    }\n    const eje = fecha.substr(0,4);\n    const mes = fecha.substr(4,2);\n    const dia = fecha.substr(6,2);\n\n    console.log(dia + '/' + mes + '/' + eje)\n\n    var date = moment(fecha,'YYYYMMDD');\n    \n    if (date.isValid()) return true;\n\n    return false;\n\n}\n\n\n\nexport const getEncuestasHosp = async(req, res, next) =>{\n   \n    \n        const pool = await oracle.getConnection();\n        pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Hosp\",[], {outFormat: oracledb.OBJECT}, \n        function(err,result) {\n        if (err) {\n            console.log ('Error el ejecutar la query:' + err.message)\n            res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Error al recuperar muestra HOSP.\",\n                detailed_message: err.message\n            }));\n        }\n        else {\n            \n            res.writeHead(200, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify(result.rows));\n        }\n    }\n    );\n} \n\n\nexport const getEncuestasCex = async(req, res, next) =>{\n   \n    \n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Cex\",[], {outFormat: oracledb.OBJECT}, \n    function(err,result) {\n    if (err) {\n        console.log ('Error el ejecutar la query:' + err.message)\n        res.writeHead(500, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify({\n            status:500,\n            message:\"Error al recuperar muestra CEX.\",\n            detailed_message: err.message\n        }));\n    }\n    else {\n        \n        res.writeHead(200, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify(result.rows));\n    }\n}\n);\n} \n\nexport const getEncuestasTraReh = async(req, res, next) =>{\n   \n    \n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_TraReh\",[], {outFormat: oracledb.OBJECT}, \n    function(err,result) {\n    if (err) {\n        console.log ('Error el ejecutar la query:' + err.message)\n        res.writeHead(500, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify({\n            status:500,\n            message:\"Error al recuperar muestra Tra-Reh.\",\n            detailed_message: err.message\n        }));\n    }\n    else {\n        \n        res.writeHead(200, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify(result.rows));\n    }\n}\n);\n} \n\nexport const getEncuestasPruebas = async(req, res, next) =>{\n   \n    \n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Pruebas\",[], {outFormat: oracledb.OBJECT}, \n    function(err,result) {\n    if (err) {\n        console.log ('Error el ejecutar la query:' + err.message)\n        res.writeHead(500, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify({\n            status:500,\n            message:\"Error al recuperar muestra Pruebas.\",\n            detailed_message: err.message\n        }));\n    }\n    else {\n        \n        res.writeHead(200, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify(result.rows));\n    }\n}\n);\n} \n\nexport const getEncuestasUrg = async(req, res, next) =>{\n   \n    \n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_Urg\",[], {outFormat: oracledb.OBJECT}, \n    function(err,result) {\n    if (err) {\n        console.log ('Error el ejecutar la query:' + err.message)\n        res.writeHead(500, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify({\n            status:500,\n            message:\"Error al recuperar muestra Urg.\",\n            detailed_message: err.message\n        }));\n    }\n    else {\n        \n        res.writeHead(200, {'Content-Type': 'application/json'});\n        res.end(JSON.stringify(result.rows));\n    }\n}\n);\n} \n\nexport const getEncuestasCalVida = async(req, res, next) =>{\n   \n      //Validar fecha \n \n      var fecha = req.query.fecha;\n  \n\n      if (fecha ===undefined || !fechaValida(fecha)) {\n          res.writeHead(500, {'Content-Type': 'application/json'});\n              res.end(JSON.stringify({\n                  status:500,\n                  message:\"Fecha Erronea\",\n                  detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n              }));\n          \n      } else {\n          \n          const eje = fecha.substr(0,4);\n          const mes = fecha.substr(4,2);\n          const dia = fecha.substr(6,2);\n          \n          const fechacita = dia + '/' + mes + '/' + eje;\n          var fechacitamasuno;\n  \n      \n          var d = new Date(eje + '-' + mes + '-' + dia)\n          d.setDate(d.getDate() + 1)\n          fechacitamasuno = ('0' + d.getDate()).slice(-2) + '/' +  ('0' + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();\n          \n  \n          const pool = await oracle.getConnection();\n          pool.execute(\"SELECT * FROM V07_Idrus_Encuestas_CalVida WHERE finterv > to_date(:fechacita,'DD/MM/YYYY') AND finterv < to_date(:fechacitamasuno,'DD/MM/YYYY')\" ,[fechacita, fechacitamasuno], {outFormat: oracledb.OBJECT}, \n          function(err,result) {\n          if (err) {\n              console.log ('Error el ejecutar la query:' + err.message)\n              res.writeHead(500, {'Content-Type': 'application/json'});\n              res.end(JSON.stringify({\n                  status:500,\n                  message:\"Error private things\",\n                  detailed_message: err.message\n              }));\n          }\n          else {\n              \n              res.writeHead(200, {'Content-Type': 'application/json'});\n              res.end(JSON.stringify(result.rows));\n          }\n      }\n      );\n  } \n    \n} "],"mappings":"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"}},"mtime":1668001397409}}