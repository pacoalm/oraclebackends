{"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.19.3:development":{"value":{"code":"import express from \"express\";\nimport config from \"./config\";\nconsole.log(config.port);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwiY29uZmlnIiwiY29uc29sZSIsImxvZyIsInBvcnQiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGNvbmZpZyBmcm9tIFwiLi9jb25maWdcIjtcblxuXG5cbmNvbnNvbGUubG9nIChjb25maWcucG9ydCk7XG5cbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsT0FBTyxNQUFNLFNBQVM7QUFDN0IsT0FBT0MsTUFBTSxNQUFNLFVBQVU7QUFJN0JDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFRixNQUFNLENBQUNHLElBQUksQ0FBQyJ9","map":{"version":3,"names":["express","config","console","log","port"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/","sources":["server.js"],"sourcesContent":["import express from \"express\";\nimport config from \"./config\";\n\n\n\nconsole.log (config.port);\n\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,SAAS;AAC7B,OAAOC,MAAM,MAAM,UAAU;AAI7BC,OAAO,CAACC,GAAG,CAAEF,MAAM,CAACG,IAAI,CAAC"}},"mtime":1665993427634},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _citas = _interopRequireDefault(require(\"./routes/citas.routes\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst bodyParser = require('body-parser');\nconst cors = require(\"cors\");\nconst logger = require('morgan');\nconst app = (0, _express.default)();\napp.use(bodyParser.urlencoded({\n  extended: false\n}));\napp.use(bodyParser.json());\napp.use(logger('combined'));\napp.use(function (req, res, next) {\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\n  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n  res.header('Access-Control-Allow-Methods', 'PUT, POST, GET, DELETE, OPTIONS');\n  next();\n});\nlet port = process.env.PORT;\napp.use(_citas.default);\napp.use(cors);\napp.set(\"port\", port);\nvar _default = app;\nexports.default = _default;\napp.listen(process.env.PORT);\nconsole.log(\"Server listening on port \" + port);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJib2R5UGFyc2VyIiwicmVxdWlyZSIsImNvcnMiLCJsb2dnZXIiLCJhcHAiLCJleHByZXNzIiwidXNlIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwianNvbiIsInJlcSIsInJlcyIsIm5leHQiLCJoZWFkZXIiLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJjaXRhc1JvdXRlciIsInNldCIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5cbmltcG9ydCBjaXRhc1JvdXRlciBmcm9tIFwiLi9yb3V0ZXMvY2l0YXMucm91dGVzXCJcblxuXG5jb25zdCBib2R5UGFyc2VyPXJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG5jb25zdCBjb3JzID0gcmVxdWlyZShcImNvcnNcIilcbmNvbnN0IGxvZ2dlcj1yZXF1aXJlKCdtb3JnYW4nKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcyAoKTtcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHtleHRlbmRlZDpmYWxzZX0pKTtcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuYXBwLnVzZShsb2dnZXIoJ2NvbWJpbmVkJykpO1xuXG5hcHAudXNlKGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuXHRyZXMuaGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCIsIFwiKlwiKTtcblx0cmVzLmhlYWRlcihcblx0XHRcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIixcblx0XHRcIk9yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHRcIlxuXHQpO1xuXHRyZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ1BVVCwgUE9TVCwgR0VULCBERUxFVEUsIE9QVElPTlMnKTtcblx0bmV4dCgpO1xufSk7XG5cbmxldCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVDtcbmFwcC51c2UoY2l0YXNSb3V0ZXIpO1xuYXBwLnVzZShjb3JzKTtcbmFwcC5zZXQoXCJwb3J0XCIscG9ydCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwcDtcblxuYXBwLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JUKTtcblxuY29uc29sZS5sb2cgKFwiU2VydmVyIGxpc3RlbmluZyBvbiBwb3J0IFwiICsgcG9ydCk7XG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUVBO0FBQStDO0FBRy9DLE1BQU1BLFVBQVUsR0FBQ0MsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUN2QyxNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUUsTUFBTSxHQUFDRixPQUFPLENBQUMsUUFBUSxDQUFDO0FBRTlCLE1BQU1HLEdBQUcsR0FBRyxJQUFBQyxnQkFBTyxHQUFHO0FBQ3RCRCxHQUFHLENBQUNFLEdBQUcsQ0FBQ04sVUFBVSxDQUFDTyxVQUFVLENBQUM7RUFBQ0MsUUFBUSxFQUFDO0FBQUssQ0FBQyxDQUFDLENBQUM7QUFDaERKLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDTixVQUFVLENBQUNTLElBQUksRUFBRSxDQUFDO0FBQzFCTCxHQUFHLENBQUNFLEdBQUcsQ0FBQ0gsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBRTNCQyxHQUFHLENBQUNFLEdBQUcsQ0FBQyxVQUFVSSxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0VBQ2pDRCxHQUFHLENBQUNFLE1BQU0sQ0FBQyw2QkFBNkIsRUFBRSxHQUFHLENBQUM7RUFDOUNGLEdBQUcsQ0FBQ0UsTUFBTSxDQUNULDhCQUE4QixFQUM5QixnREFBZ0QsQ0FDaEQ7RUFDREYsR0FBRyxDQUFDRSxNQUFNLENBQUMsOEJBQThCLEVBQUUsaUNBQWlDLENBQUM7RUFDN0VELElBQUksRUFBRTtBQUNQLENBQUMsQ0FBQztBQUVGLElBQUlFLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUk7QUFDM0JiLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDWSxjQUFXLENBQUM7QUFDcEJkLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDSixJQUFJLENBQUM7QUFDYkUsR0FBRyxDQUFDZSxHQUFHLENBQUMsTUFBTSxFQUFDTCxJQUFJLENBQUM7QUFBQyxlQUVOVixHQUFHO0FBQUE7QUFFbEJBLEdBQUcsQ0FBQ2dCLE1BQU0sQ0FBQ0wsT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUksQ0FBQztBQUU1QkksT0FBTyxDQUFDQyxHQUFHLENBQUUsMkJBQTJCLEdBQUdSLElBQUksQ0FBQyJ9","map":{"version":3,"names":["bodyParser","require","cors","logger","app","express","use","urlencoded","extended","json","req","res","next","header","port","process","env","PORT","citasRouter","set","listen","console","log"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/","sources":["server.js"],"sourcesContent":["\nimport express from \"express\";\n\nimport citasRouter from \"./routes/citas.routes\"\n\n\nconst bodyParser=require('body-parser');\nconst cors = require(\"cors\")\nconst logger=require('morgan');\n\nconst app = express ();\napp.use(bodyParser.urlencoded({extended:false}));\napp.use(bodyParser.json());\napp.use(logger('combined'));\n\napp.use(function (req, res, next) {\n\tres.header(\"Access-Control-Allow-Origin\", \"*\");\n\tres.header(\n\t\t\"Access-Control-Allow-Headers\",\n\t\t\"Origin, X-Requested-With, Content-Type, Accept\"\n\t);\n\tres.header('Access-Control-Allow-Methods', 'PUT, POST, GET, DELETE, OPTIONS');\n\tnext();\n});\n\nlet port = process.env.PORT;\napp.use(citasRouter);\napp.use(cors);\napp.set(\"port\",port);\n\nexport default app;\n\napp.listen(process.env.PORT);\n\nconsole.log (\"Server listening on port \" + port);\n\n\n"],"mappings":";;;;;;AACA;AAEA;AAA+C;AAG/C,MAAMA,UAAU,GAACC,OAAO,CAAC,aAAa,CAAC;AACvC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,MAAM,GAACF,OAAO,CAAC,QAAQ,CAAC;AAE9B,MAAMG,GAAG,GAAG,IAAAC,gBAAO,GAAG;AACtBD,GAAG,CAACE,GAAG,CAACN,UAAU,CAACO,UAAU,CAAC;EAACC,QAAQ,EAAC;AAAK,CAAC,CAAC,CAAC;AAChDJ,GAAG,CAACE,GAAG,CAACN,UAAU,CAACS,IAAI,EAAE,CAAC;AAC1BL,GAAG,CAACE,GAAG,CAACH,MAAM,CAAC,UAAU,CAAC,CAAC;AAE3BC,GAAG,CAACE,GAAG,CAAC,UAAUI,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACjCD,GAAG,CAACE,MAAM,CAAC,6BAA6B,EAAE,GAAG,CAAC;EAC9CF,GAAG,CAACE,MAAM,CACT,8BAA8B,EAC9B,gDAAgD,CAChD;EACDF,GAAG,CAACE,MAAM,CAAC,8BAA8B,EAAE,iCAAiC,CAAC;EAC7ED,IAAI,EAAE;AACP,CAAC,CAAC;AAEF,IAAIE,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI;AAC3Bb,GAAG,CAACE,GAAG,CAACY,cAAW,CAAC;AACpBd,GAAG,CAACE,GAAG,CAACJ,IAAI,CAAC;AACbE,GAAG,CAACe,GAAG,CAAC,MAAM,EAACL,IAAI,CAAC;AAAC,eAENV,GAAG;AAAA;AAElBA,GAAG,CAACgB,MAAM,CAACL,OAAO,CAACC,GAAG,CAACC,IAAI,CAAC;AAE5BI,OAAO,CAACC,GAAG,CAAE,2BAA2B,GAAGR,IAAI,CAAC"}},"mtime":1666005628696},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = require(\"dotenv\");\n(0, _dotenv.config)();\nvar _default = {\n  port: process.env.PORT\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy8iLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2NvbmZpZ30gZnJvbSBcImRvdGVudlwiO1xuXG5jb25maWcoKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHBvcnQ6IHByb2Nlc3MuZW52LlBPUlRcbiAgICBcblxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFFQSxJQUFBQSxjQUFNLEdBQUU7QUFBQyxlQUVNO0VBQ1hDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDO0FBR3RCLENBQUM7QUFBQSJ9","map":{"version":3,"names":["config","port","process","env","PORT"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/","sources":["config.js"],"sourcesContent":["import {config} from \"dotenv\";\n\nconfig();\n\nexport default {\n    port: process.env.PORT\n    \n\n}"],"mappings":";;;;;;AAAA;AAEA,IAAAA,cAAM,GAAE;AAAC,eAEM;EACXC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC;AAGtB,CAAC;AAAA"}},"mtime":1665997615203},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/citas.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _auth = _interopRequireDefault(require(\"./auth\"));\nvar _citas = require(\"../controllers/citas.controller\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar express = require('express');\nconst router = express.Router();\nconsole.log('Entra 1');\nrouter.get('/api/citas', _citas.getCitas);\nrouter.get('/api/camas', _citas.getCamas);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImNvbnNvbGUiLCJsb2ciLCJnZXQiLCJnZXRDaXRhcyIsImdldENhbWFzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9jMDctYWRtaW5pc3RyYWRvci9qcy9vcmFjbGUvYmFja2VuZHMvaWRydXMvcm91dGVzLyIsInNvdXJjZXMiOlsiY2l0YXMucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IGF1dGggZnJvbSBcIi4vYXV0aFwiO1xuXG5pbXBvcnQge2dldENpdGFzLCBnZXRDYW1hc30gZnJvbSAnLi4vY29udHJvbGxlcnMvY2l0YXMuY29udHJvbGxlcidcblxudmFyIGV4cHJlc3MgPSByZXF1aXJlICgnZXhwcmVzcycpO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5jb25zb2xlLmxvZygnRW50cmEgMScpXG5cbnJvdXRlci5nZXQoJy9hcGkvY2l0YXMnLCAgZ2V0Q2l0YXMpO1xucm91dGVyLmdldCgnL2FwaS9jYW1hcycsICBnZXRDYW1hcyk7XG5cblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuXG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0E7QUFFQTtBQUFrRTtBQUVsRSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBRSxTQUFTLENBQUM7QUFFakMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0sRUFBRTtBQUUvQkMsT0FBTyxDQUFDQyxHQUFHLENBQUMsU0FBUyxDQUFDO0FBRXRCSCxNQUFNLENBQUNJLEdBQUcsQ0FBQyxZQUFZLEVBQUdDLGVBQVEsQ0FBQztBQUNuQ0wsTUFBTSxDQUFDSSxHQUFHLENBQUMsWUFBWSxFQUFHRSxlQUFRLENBQUM7QUFBQyxlQUdyQk4sTUFBTTtBQUFBIn0=","map":{"version":3,"names":["express","require","router","Router","console","log","get","getCitas","getCamas"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["citas.routes.js"],"sourcesContent":["\nimport auth from \"./auth\";\n\nimport {getCitas, getCamas} from '../controllers/citas.controller'\n\nvar express = require ('express');\n\nconst router = express.Router();\n\nconsole.log('Entra 1')\n\nrouter.get('/api/citas',  getCitas);\nrouter.get('/api/camas',  getCamas);\n\n\nexport default router;\n\n\n"],"mappings":";;;;;;AACA;AAEA;AAAkE;AAElE,IAAIA,OAAO,GAAGC,OAAO,CAAE,SAAS,CAAC;AAEjC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,EAAE;AAE/BC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;AAEtBH,MAAM,CAACI,GAAG,CAAC,YAAY,EAAGC,eAAQ,CAAC;AACnCL,MAAM,CAACI,GAAG,CAAC,YAAY,EAAGE,eAAQ,CAAC;AAAC,eAGrBN,MAAM;AAAA"}},"mtime":1666005310072},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/encuestas.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIvaG9tZS9jMDctYWRtaW5pc3RyYWRvci9qcy9vcmFjbGUvYmFja2VuZHMvaWRydXMvcm91dGVzLyIsInNvdXJjZXMiOlsiZW5jdWVzdGFzLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIiXSwibWFwcGluZ3MiOiIifQ==","map":{"version":3,"names":[],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["encuestas.routes.js"],"sourcesContent":[""],"mappings":""}},"mtime":1665996228974},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/citas.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCitas = void 0;\nvar _oracledb = _interopRequireDefault(require(\"oracledb\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar oracle = require('../database/connection.js');\nconst getCitas = async (req, res, next) => {\n  //Validar fecha \n\n  var fecha = req.query.fecha;\n  if (fecha === null || fecha === undefined || fecha === \"\") {\n    res.writeHead(500, {\n      'Content-Type': 'application/json'\n    });\n    res.end(JSON.stringify({\n      status: 500,\n      message: \"Fecha Erronea\",\n      detailed_message: \"Introduzca una fecha válida\"\n    }));\n  } else {\n    const pool = await oracle.getConnection();\n    pool.execute('select column1 from jsao_protected_things', [], {\n      outFormat: _oracledb.default.OBJECT\n    }, function (err, result) {\n      if (err) {\n        console.log('Error el ejecutar la query:' + err.message);\n        res.writeHead(500, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify({\n          status: 500,\n          message: \"Error private things\",\n          detailed_message: err.message\n        }));\n      } else {\n        res.writeHead(200, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify(result.rows));\n      }\n    });\n  }\n};\nexports.getCitas = getCitas;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmFjbGUiLCJyZXF1aXJlIiwiZ2V0Q2l0YXMiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZmVjaGEiLCJxdWVyeSIsInVuZGVmaW5lZCIsIndyaXRlSGVhZCIsImVuZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdGF0dXMiLCJtZXNzYWdlIiwiZGV0YWlsZWRfbWVzc2FnZSIsInBvb2wiLCJnZXRDb25uZWN0aW9uIiwiZXhlY3V0ZSIsIm91dEZvcm1hdCIsIm9yYWNsZWRiIiwiT0JKRUNUIiwiZXJyIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsInJvd3MiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImNpdGFzLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG9yYWNsZWRiIGZyb20gJ29yYWNsZWRiJztcblxudmFyIG9yYWNsZSA9ICByZXF1aXJlKCcuLi9kYXRhYmFzZS9jb25uZWN0aW9uLmpzJylcblxuXG5leHBvcnQgY29uc3QgZ2V0Q2l0YXMgPSBhc3luYyhyZXEsIHJlcywgbmV4dCkgPT57XG4gICBcbiAgICAvL1ZhbGlkYXIgZmVjaGEgXG5cbiAgICB2YXIgZmVjaGEgPSByZXEucXVlcnkuZmVjaGE7XG4gICAgIFxuICAgIGlmIChmZWNoYT09PW51bGwgfHwgZmVjaGEgPT09dW5kZWZpbmVkIHx8IGZlY2hhID09PSBcIlwiKSB7XG4gICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOlwiRmVjaGEgRXJyb25lYVwiLFxuICAgICAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IFwiSW50cm9kdXpjYSB1bmEgZmVjaGEgdsOhbGlkYVwiXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIFxuICAgIH0gZWxzZSB7XG5cblxuICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBvcmFjbGUuZ2V0Q29ubmVjdGlvbigpO1xuICAgIHBvb2wuZXhlY3V0ZSgnc2VsZWN0IGNvbHVtbjEgZnJvbSBqc2FvX3Byb3RlY3RlZF90aGluZ3MnLFtdLCB7b3V0Rm9ybWF0OiBvcmFjbGVkYi5PQkpFQ1R9LCBcbiAgICBmdW5jdGlvbihlcnIscmVzdWx0KSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nICgnRXJyb3IgZWwgZWplY3V0YXIgbGEgcXVlcnk6JyArIGVyci5tZXNzYWdlKVxuICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6NTAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6XCJFcnJvciBwcml2YXRlIHRoaW5nc1wiLFxuICAgICAgICAgICAgICAgIGRldGFpbGVkX21lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoMjAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeShyZXN1bHQucm93cykpO1xuICAgICAgICB9XG4gICAgfVxuICAgICk7XG59IFxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUFnQztBQUVoQyxJQUFJQSxNQUFNLEdBQUlDLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztBQUczQyxNQUFNQyxRQUFRLEdBQUcsT0FBTUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSTtFQUU1Qzs7RUFFQSxJQUFJQyxLQUFLLEdBQUdILEdBQUcsQ0FBQ0ksS0FBSyxDQUFDRCxLQUFLO0VBRTNCLElBQUlBLEtBQUssS0FBRyxJQUFJLElBQUlBLEtBQUssS0FBSUUsU0FBUyxJQUFJRixLQUFLLEtBQUssRUFBRSxFQUFFO0lBQ3BERixHQUFHLENBQUNLLFNBQVMsQ0FBQyxHQUFHLEVBQUU7TUFBQyxjQUFjLEVBQUU7SUFBa0IsQ0FBQyxDQUFDO0lBQ3BETCxHQUFHLENBQUNNLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDQyxTQUFTLENBQUM7TUFDbkJDLE1BQU0sRUFBQyxHQUFHO01BQ1ZDLE9BQU8sRUFBQyxlQUFlO01BQ3ZCQyxnQkFBZ0IsRUFBRTtJQUN0QixDQUFDLENBQUMsQ0FBQztFQUVYLENBQUMsTUFBTTtJQUdQLE1BQU1DLElBQUksR0FBRyxNQUFNaEIsTUFBTSxDQUFDaUIsYUFBYSxFQUFFO0lBQ3pDRCxJQUFJLENBQUNFLE9BQU8sQ0FBQywyQ0FBMkMsRUFBQyxFQUFFLEVBQUU7TUFBQ0MsU0FBUyxFQUFFQyxpQkFBUSxDQUFDQztJQUFNLENBQUMsRUFDekYsVUFBU0MsR0FBRyxFQUFDQyxNQUFNLEVBQUU7TUFDakIsSUFBSUQsR0FBRyxFQUFFO1FBQ0xFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFLDZCQUE2QixHQUFHSCxHQUFHLENBQUNSLE9BQU8sQ0FBQztRQUN6RFYsR0FBRyxDQUFDSyxTQUFTLENBQUMsR0FBRyxFQUFFO1VBQUMsY0FBYyxFQUFFO1FBQWtCLENBQUMsQ0FBQztRQUN4REwsR0FBRyxDQUFDTSxHQUFHLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO1VBQ25CQyxNQUFNLEVBQUMsR0FBRztVQUNWQyxPQUFPLEVBQUMsc0JBQXNCO1VBQzlCQyxnQkFBZ0IsRUFBRU8sR0FBRyxDQUFDUjtRQUMxQixDQUFDLENBQUMsQ0FBQztNQUNQLENBQUMsTUFDSTtRQUVEVixHQUFHLENBQUNLLFNBQVMsQ0FBQyxHQUFHLEVBQUU7VUFBQyxjQUFjLEVBQUU7UUFBa0IsQ0FBQyxDQUFDO1FBQ3hETCxHQUFHLENBQUNNLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDQyxTQUFTLENBQUNXLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLENBQUM7TUFDeEM7SUFDSixDQUFDLENBQ0E7RUFDTDtBQUNBLENBQUM7QUFBQSJ9","map":{"version":3,"names":["oracle","require","getCitas","req","res","next","fecha","query","undefined","writeHead","end","JSON","stringify","status","message","detailed_message","pool","getConnection","execute","outFormat","oracledb","OBJECT","err","result","console","log","rows"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/controllers/","sources":["citas.controller.js"],"sourcesContent":["import oracledb from 'oracledb';\n\nvar oracle =  require('../database/connection.js')\n\n\nexport const getCitas = async(req, res, next) =>{\n   \n    //Validar fecha \n\n    var fecha = req.query.fecha;\n     \n    if (fecha===null || fecha ===undefined || fecha === \"\") {\n        res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Fecha Erronea\",\n                detailed_message: \"Introduzca una fecha válida\"\n            }));\n        \n    } else {\n\n\n    const pool = await oracle.getConnection();\n    pool.execute('select column1 from jsao_protected_things',[], {outFormat: oracledb.OBJECT}, \n    function(err,result) {\n        if (err) {\n            console.log ('Error el ejecutar la query:' + err.message)\n            res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Error private things\",\n                detailed_message: err.message\n            }));\n        }\n        else {\n            \n            res.writeHead(200, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify(result.rows));\n        }\n    }\n    );\n} \n}\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,IAAIA,MAAM,GAAIC,OAAO,CAAC,2BAA2B,CAAC;AAG3C,MAAMC,QAAQ,GAAG,OAAMC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EAE5C;;EAEA,IAAIC,KAAK,GAAGH,GAAG,CAACI,KAAK,CAACD,KAAK;EAE3B,IAAIA,KAAK,KAAG,IAAI,IAAIA,KAAK,KAAIE,SAAS,IAAIF,KAAK,KAAK,EAAE,EAAE;IACpDF,GAAG,CAACK,SAAS,CAAC,GAAG,EAAE;MAAC,cAAc,EAAE;IAAkB,CAAC,CAAC;IACpDL,GAAG,CAACM,GAAG,CAACC,IAAI,CAACC,SAAS,CAAC;MACnBC,MAAM,EAAC,GAAG;MACVC,OAAO,EAAC,eAAe;MACvBC,gBAAgB,EAAE;IACtB,CAAC,CAAC,CAAC;EAEX,CAAC,MAAM;IAGP,MAAMC,IAAI,GAAG,MAAMhB,MAAM,CAACiB,aAAa,EAAE;IACzCD,IAAI,CAACE,OAAO,CAAC,2CAA2C,EAAC,EAAE,EAAE;MAACC,SAAS,EAAEC,iBAAQ,CAACC;IAAM,CAAC,EACzF,UAASC,GAAG,EAACC,MAAM,EAAE;MACjB,IAAID,GAAG,EAAE;QACLE,OAAO,CAACC,GAAG,CAAE,6BAA6B,GAAGH,GAAG,CAACR,OAAO,CAAC;QACzDV,GAAG,CAACK,SAAS,CAAC,GAAG,EAAE;UAAC,cAAc,EAAE;QAAkB,CAAC,CAAC;QACxDL,GAAG,CAACM,GAAG,CAACC,IAAI,CAACC,SAAS,CAAC;UACnBC,MAAM,EAAC,GAAG;UACVC,OAAO,EAAC,sBAAsB;UAC9BC,gBAAgB,EAAEO,GAAG,CAACR;QAC1B,CAAC,CAAC,CAAC;MACP,CAAC,MACI;QAEDV,GAAG,CAACK,SAAS,CAAC,GAAG,EAAE;UAAC,cAAc,EAAE;QAAkB,CAAC,CAAC;QACxDL,GAAG,CAACM,GAAG,CAACC,IAAI,CAACC,SAAS,CAACW,MAAM,CAACG,IAAI,CAAC,CAAC;MACxC;IACJ,CAAC,CACA;EACL;AACA,CAAC;AAAA"}},"mtime":1666012467606},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/database/connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConnection = getConnection;\nconst oracledb = require(\"oracledb\");\noracledb.autoCommit = true;\nlet connection;\nasync function getConnection() {\n  try {\n    connection = await oracledb.getConnection({\n      user: process.env.DB_USER,\n      password: process.env.DB_PASS,\n      connectionString: process.env.DB_TNS\n    });\n    return connection;\n  } catch (err) {\n    console.error(err.message);\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmFjbGVkYiIsInJlcXVpcmUiLCJhdXRvQ29tbWl0IiwiY29ubmVjdGlvbiIsImdldENvbm5lY3Rpb24iLCJ1c2VyIiwicHJvY2VzcyIsImVudiIsIkRCX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1MiLCJjb25uZWN0aW9uU3RyaW5nIiwiREJfVE5TIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvYzA3LWFkbWluaXN0cmFkb3IvanMvb3JhY2xlL2JhY2tlbmRzL2lkcnVzL2RhdGFiYXNlLyIsInNvdXJjZXMiOlsiY29ubmVjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBvcmFjbGVkYiA9IHJlcXVpcmUoXCJvcmFjbGVkYlwiKTtcbm9yYWNsZWRiLmF1dG9Db21taXQ9IHRydWU7XG5cbmxldCBjb25uZWN0aW9uO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBjb25uZWN0aW9uID0gYXdhaXQgb3JhY2xlZGIuZ2V0Q29ubmVjdGlvbih7XG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLFxuICAgICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1MsXG4gICAgICBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5EQl9UTlMsXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbm5lY3Rpb247XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICB9IFxufVxuXG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDRCxRQUFRLENBQUNFLFVBQVUsR0FBRSxJQUFJO0FBRXpCLElBQUlDLFVBQVU7QUFFUCxlQUFlQyxhQUFhLEdBQUc7RUFDcEMsSUFBSTtJQUNGRCxVQUFVLEdBQUcsTUFBTUgsUUFBUSxDQUFDSSxhQUFhLENBQUM7TUFDeENDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87TUFDekJDLFFBQVEsRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87TUFDN0JDLGdCQUFnQixFQUFFTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0s7SUFDaEMsQ0FBQyxDQUFDO0lBQ0YsT0FBT1QsVUFBVTtFQUNuQixDQUFDLENBQUMsT0FBT1UsR0FBRyxFQUFFO0lBQ1pDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDRixHQUFHLENBQUNHLE9BQU8sQ0FBQztFQUM1QjtBQUNGIn0=","map":{"version":3,"names":["oracledb","require","autoCommit","connection","getConnection","user","process","env","DB_USER","password","DB_PASS","connectionString","DB_TNS","err","console","error","message"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/database/","sources":["connection.js"],"sourcesContent":["const oracledb = require(\"oracledb\");\noracledb.autoCommit= true;\n\nlet connection;\n\nexport async function getConnection() {\n  try {\n    connection = await oracledb.getConnection({\n      user: process.env.DB_USER,\n      password: process.env.DB_PASS,\n      connectionString: process.env.DB_TNS,\n    });\n    return connection;\n  } catch (err) {\n    console.error(err.message);\n  } \n}\n\n\n"],"mappings":";;;;;;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpCD,QAAQ,CAACE,UAAU,GAAE,IAAI;AAEzB,IAAIC,UAAU;AAEP,eAAeC,aAAa,GAAG;EACpC,IAAI;IACFD,UAAU,GAAG,MAAMH,QAAQ,CAACI,aAAa,CAAC;MACxCC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;MACzBC,QAAQ,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;MAC7BC,gBAAgB,EAAEL,OAAO,CAACC,GAAG,CAACK;IAChC,CAAC,CAAC;IACF,OAAOT,UAAU;EACnB,CAAC,CAAC,OAAOU,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAACG,OAAO,CAAC;EAC5B;AACF"}},"mtime":1665997615203},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nvar jwt = require('jsonwebtoken');\nvar config = require('../config.js');\nfunction auth(role) {\n  return async function (req, res, next) {\n    var token;\n    var payload;\n    if (!req.headers.authorization) {\n      return res.status(401).send({\n        message: \"No autorizado\"\n      });\n    }\n    token = req.headers.authorization.split(' ')[1];\n    try {\n      payload = jwt.verify(token, process.env.JWTSECRETKEY);\n    } catch (e) {\n      if (e.name === 'TokenExpiredError') {\n        res.status(401).send({\n          message: \"Autorización expirada. Contacte con HospitalTenerife@sjd.es\"\n        });\n      } else {\n        res.status(401).send({\n          message: \"Autorización invalida\"\n        });\n      }\n      return;\n    }\n    if (!role || role === payload.role) {\n      req.user = {\n        email: payload.sub,\n        role: payload.role\n      };\n      next();\n    } else {\n      res.status(401).send({\n        message: 'No estas autorizado'\n      });\n    }\n  };\n}\nmodule.exports = auth;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwiY29uZmlnIiwiYXV0aCIsInJvbGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJwYXlsb2FkIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsInNwbGl0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVFNFQ1JFVEtFWSIsImUiLCJuYW1lIiwidXNlciIsImVtYWlsIiwic3ViIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvYzA3LWFkbWluaXN0cmFkb3IvanMvb3JhY2xlL2JhY2tlbmRzL2lkcnVzL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG52YXIgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG52YXIgY29uZmlnID0gIHJlcXVpcmUgKCcuLi9jb25maWcuanMnKVxuXG5mdW5jdGlvbiBhdXRoKHJvbGUpIHtcblxuICAgIHJldHVybiBhc3luYyBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuXG4gICAgICAgIHZhciB0b2tlbjtcbiAgICAgICAgdmFyIHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoe21lc3NhZ2U6IFwiTm8gYXV0b3JpemFkb1wifSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRva2VuPXJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBheWxvYWQ9and0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUU0VDUkVUS0VZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfWNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7bWVzc2FnZTogXCJBdXRvcml6YWNpw7NuIGV4cGlyYWRhLiBDb250YWN0ZSBjb24gSG9zcGl0YWxUZW5lcmlmZUBzamQuZXNcIn0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe21lc3NhZ2U6IFwiQXV0b3JpemFjacOzbiBpbnZhbGlkYVwifSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoIXJvbGUgfHwgcm9sZSA9PT0gcGF5bG9hZC5yb2xlICkge1xuICAgICAgICAgICAgcmVxLnVzZXIgPSB7XG4gICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuc3ViLFxuICAgICAgICAgICAgICAgIHJvbGU6IHBheWxvYWQucm9sZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHttZXNzYWdlOiAnTm8gZXN0YXMgYXV0b3JpemFkbyd9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gYXV0aDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFJQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDakMsSUFBSUMsTUFBTSxHQUFJRCxPQUFPLENBQUUsY0FBYyxDQUFDO0FBRXRDLFNBQVNFLElBQUksQ0FBQ0MsSUFBSSxFQUFFO0VBRWhCLE9BQU8sZ0JBQWVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFFbEMsSUFBSUMsS0FBSztJQUNULElBQUlDLE9BQU87SUFFWCxJQUFJLENBQUNKLEdBQUcsQ0FBQ0ssT0FBTyxDQUFDQyxhQUFhLEVBQUU7TUFDNUIsT0FBT0wsR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFDQyxPQUFPLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDdkQ7SUFDQU4sS0FBSyxHQUFDSCxHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsYUFBYSxDQUFDSSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTdDLElBQUk7TUFDSk4sT0FBTyxHQUFDVCxHQUFHLENBQUNnQixNQUFNLENBQUNSLEtBQUssRUFBRVMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFlBQVksQ0FBQztJQUVuRCxDQUFDLFFBQU9DLENBQUMsRUFBRTtNQUNYLElBQUlBLENBQUMsQ0FBQ0MsSUFBSSxLQUFLLG1CQUFtQixFQUFFO1FBQ3BDZixHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQUNDLE9BQU8sRUFBRTtRQUE2RCxDQUFDLENBQUM7TUFDOUYsQ0FBQyxNQUFNO1FBQ1BSLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFBQ0MsT0FBTyxFQUFFO1FBQXVCLENBQUMsQ0FBQztNQUN4RDtNQUNBO0lBQ0E7SUFDSixJQUFJLENBQUNWLElBQUksSUFBSUEsSUFBSSxLQUFLSyxPQUFPLENBQUNMLElBQUksRUFBRztNQUNqQ0MsR0FBRyxDQUFDaUIsSUFBSSxHQUFHO1FBQ1BDLEtBQUssRUFBRWQsT0FBTyxDQUFDZSxHQUFHO1FBQ2xCcEIsSUFBSSxFQUFFSyxPQUFPLENBQUNMO01BQ2xCLENBQUM7TUFDREcsSUFBSSxFQUFFO0lBQ1YsQ0FBQyxNQUFNO01BQ0hELEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBQ0MsT0FBTyxFQUFFO01BQXFCLENBQUMsQ0FBQztJQUUxRDtFQUVKLENBQUM7QUFFTDtBQUNBVyxNQUFNLENBQUNDLE9BQU8sR0FBR3ZCLElBQUkifQ==","map":{"version":3,"names":["jwt","require","config","auth","role","req","res","next","token","payload","headers","authorization","status","send","message","split","verify","process","env","JWTSECRETKEY","e","name","user","email","sub","module","exports"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["auth.js"],"sourcesContent":["\nvar jwt = require('jsonwebtoken');\nvar config =  require ('../config.js')\n\nfunction auth(role) {\n\n    return async function(req, res, next) {\n\n        var token;\n        var payload;\n\n        if (!req.headers.authorization) {\n            return res.status(401).send({message: \"No autorizado\"})\n            }\n            token=req.headers.authorization.split(' ')[1];\n            \n            try {\n            payload=jwt.verify(token, process.env.JWTSECRETKEY);\n            \n            }catch (e) {\n            if (e.name === 'TokenExpiredError') {\n            res.status(401).send({message: \"Autorización expirada. Contacte con HospitalTenerife@sjd.es\"})\n            } else {\n            res.status(401).send({message: \"Autorización invalida\"})\n            }\n            return\n            }\n        if (!role || role === payload.role ) {\n            req.user = {\n                email: payload.sub,\n                role: payload.role\n            };\n            next();\n        } else {\n            res.status(401).send({message: 'No estas autorizado'});\n\n        }\n\n    }\n\n}\nmodule.exports = auth;\n"],"mappings":";;AACA,IAAIA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AACjC,IAAIC,MAAM,GAAID,OAAO,CAAE,cAAc,CAAC;AAEtC,SAASE,IAAI,CAACC,IAAI,EAAE;EAEhB,OAAO,gBAAeC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAElC,IAAIC,KAAK;IACT,IAAIC,OAAO;IAEX,IAAI,CAACJ,GAAG,CAACK,OAAO,CAACC,aAAa,EAAE;MAC5B,OAAOL,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAACC,OAAO,EAAE;MAAe,CAAC,CAAC;IACvD;IACAN,KAAK,GAACH,GAAG,CAACK,OAAO,CAACC,aAAa,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAE7C,IAAI;MACJN,OAAO,GAACT,GAAG,CAACgB,MAAM,CAACR,KAAK,EAAES,OAAO,CAACC,GAAG,CAACC,YAAY,CAAC;IAEnD,CAAC,QAAOC,CAAC,EAAE;MACX,IAAIA,CAAC,CAACC,IAAI,KAAK,mBAAmB,EAAE;QACpCf,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAACC,OAAO,EAAE;QAA6D,CAAC,CAAC;MAC9F,CAAC,MAAM;QACPR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAACC,OAAO,EAAE;QAAuB,CAAC,CAAC;MACxD;MACA;IACA;IACJ,IAAI,CAACV,IAAI,IAAIA,IAAI,KAAKK,OAAO,CAACL,IAAI,EAAG;MACjCC,GAAG,CAACiB,IAAI,GAAG;QACPC,KAAK,EAAEd,OAAO,CAACe,GAAG;QAClBpB,IAAI,EAAEK,OAAO,CAACL;MAClB,CAAC;MACDG,IAAI,EAAE;IACV,CAAC,MAAM;MACHD,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAACC,OAAO,EAAE;MAAqB,CAAC,CAAC;IAE1D;EAEJ,CAAC;AAEL;AACAW,MAAM,CAACC,OAAO,GAAGvB,IAAI"}},"mtime":1666005896919},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = require(\"dotenv\");\n(0, _dotenv.config)();\nvar _default = {\n  port: process.env.PORT\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiXSwic291cmNlUm9vdCI6Ii9ob21lL2MwNy1hZG1pbmlzdHJhZG9yL2pzL29yYWNsZS9iYWNrZW5kcy9pZHJ1cy8iLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2NvbmZpZ30gZnJvbSBcImRvdGVudlwiO1xuXG5jb25maWcoKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHBvcnQ6IHByb2Nlc3MuZW52LlBPUlRcbiAgICBcblxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFFQSxJQUFBQSxjQUFNLEdBQUU7QUFBQyxlQUVNO0VBQ1hDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDO0FBR3RCLENBQUM7QUFBQSJ9","map":{"version":3,"names":["config","port","process","env","PORT"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/","sources":["config.js"],"sourcesContent":["import {config} from \"dotenv\";\n\nconfig();\n\nexport default {\n    port: process.env.PORT\n    \n\n}"],"mappings":";;;;;;AAAA;AAEA,IAAAA,cAAM,GAAE;AAAC,eAEM;EACXC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC;AAGtB,CAAC;AAAA"}},"mtime":1665997615203},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/citas.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _auth = _interopRequireDefault(require(\"./auth\"));\nvar _citas = require(\"../controllers/citas.controller\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar express = require('express');\nconst router = express.Router();\nrouter.get('/api/citas/', (0, _auth.default)(), _citas.getCitas);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImdldCIsImF1dGgiLCJnZXRDaXRhcyJdLCJzb3VyY2VSb290IjoiL2hvbWUvYzA3LWFkbWluaXN0cmFkb3IvanMvb3JhY2xlL2JhY2tlbmRzL2lkcnVzL3JvdXRlcy8iLCJzb3VyY2VzIjpbImNpdGFzLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBhdXRoIGZyb20gXCIuL2F1dGhcIjtcblxuaW1wb3J0IHtnZXRDaXRhcywgZ2V0Q2FtYXN9IGZyb20gJy4uL2NvbnRyb2xsZXJzL2NpdGFzLmNvbnRyb2xsZXInXG5cbnZhciBleHByZXNzID0gcmVxdWlyZSAoJ2V4cHJlc3MnKTtcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuXG5yb3V0ZXIuZ2V0KCcvYXBpL2NpdGFzLycsIGF1dGgoKSwgIGdldENpdGFzKTtcblxuXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcblxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBO0FBRUE7QUFBa0U7QUFFbEUsSUFBSUEsT0FBTyxHQUFHQyxPQUFPLENBQUUsU0FBUyxDQUFDO0FBRWpDLE1BQU1DLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFNLEVBQUU7QUFHL0JELE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLGFBQWEsRUFBRSxJQUFBQyxhQUFJLEdBQUUsRUFBR0MsZUFBUSxDQUFDO0FBQUMsZUFJOUJKLE1BQU07QUFBQSJ9","map":{"version":3,"names":["express","require","router","Router","get","auth","getCitas"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["citas.routes.js"],"sourcesContent":["\nimport auth from \"./auth\";\n\nimport {getCitas, getCamas} from '../controllers/citas.controller'\n\nvar express = require ('express');\n\nconst router = express.Router();\n\n\nrouter.get('/api/citas/', auth(),  getCitas);\n\n\n\nexport default router;\n\n\n"],"mappings":";;;;;;AACA;AAEA;AAAkE;AAElE,IAAIA,OAAO,GAAGC,OAAO,CAAE,SAAS,CAAC;AAEjC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,EAAE;AAG/BD,MAAM,CAACE,GAAG,CAAC,aAAa,EAAE,IAAAC,aAAI,GAAE,EAAGC,eAAQ,CAAC;AAAC,eAI9BJ,MAAM;AAAA"}},"mtime":1666012473034},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/controllers/citas.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCitas = void 0;\nvar _oracledb = _interopRequireDefault(require(\"oracledb\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar oracle = require('../database/connection.js');\nfunction fechaValida(fecha) {\n  if (fecha.length !== 8) {\n    return false;\n  }\n  const eje = fecha.substr(0, 4);\n  const mes = fecha.substr(4, 2);\n  const dia = fecha.substr(6, 2);\n  console.log(dia + '/' + mes + '/' + eje);\n  var date = (0, _moment.default)(fecha, 'YYYYMMDD');\n  console.log(date);\n  if (date.isValid()) return true;\n  return false;\n}\nconst getCitas = async (req, res, next) => {\n  //Validar fecha \n\n  var fecha = req.query.fecha;\n  console.log(fecha);\n  if (fecha === undefined || !fechaValida(fecha)) {\n    res.writeHead(500, {\n      'Content-Type': 'application/json'\n    });\n    res.end(JSON.stringify({\n      status: 500,\n      message: \"Fecha Erronea\",\n      detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n    }));\n  } else {\n    const eje = fecha.substr(0, 4);\n    const mes = fecha.substr(4, 2);\n    const dia = fecha.substr(6, 2);\n    const fechacita = '18/10/2022';\n    const fechacitamasuno = '19/10/2022';\n    const pool = await oracle.getConnection();\n    pool.execute(\"SELECT * FROM V07_Idrus_cex_dias WHERE fecha_cita > to_date(:fechacita,'DD/MM/YYYY') AND fecha_cita < to_date(:fechacitamasuno,'DD/MM/YYYY')\", [fechacita, fechacitamasuno], {\n      outFormat: _oracledb.default.OBJECT\n    }, function (err, result) {\n      if (err) {\n        console.log('Error el ejecutar la query:' + err.message);\n        res.writeHead(500, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify({\n          status: 500,\n          message: \"Error private things\",\n          detailed_message: err.message\n        }));\n      } else {\n        res.writeHead(200, {\n          'Content-Type': 'application/json'\n        });\n        res.end(JSON.stringify(result.rows));\n      }\n    });\n  }\n};\nexports.getCitas = getCitas;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmFjbGUiLCJyZXF1aXJlIiwiZmVjaGFWYWxpZGEiLCJmZWNoYSIsImxlbmd0aCIsImVqZSIsInN1YnN0ciIsIm1lcyIsImRpYSIsImNvbnNvbGUiLCJsb2ciLCJkYXRlIiwibW9tZW50IiwiaXNWYWxpZCIsImdldENpdGFzIiwicmVxIiwicmVzIiwibmV4dCIsInF1ZXJ5IiwidW5kZWZpbmVkIiwid3JpdGVIZWFkIiwiZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsIm1lc3NhZ2UiLCJkZXRhaWxlZF9tZXNzYWdlIiwiZmVjaGFjaXRhIiwiZmVjaGFjaXRhbWFzdW5vIiwicG9vbCIsImdldENvbm5lY3Rpb24iLCJleGVjdXRlIiwib3V0Rm9ybWF0Iiwib3JhY2xlZGIiLCJPQkpFQ1QiLCJlcnIiLCJyZXN1bHQiLCJyb3dzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9jMDctYWRtaW5pc3RyYWRvci9qcy9vcmFjbGUvYmFja2VuZHMvaWRydXMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJjaXRhcy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBvcmFjbGVkYiBmcm9tICdvcmFjbGVkYic7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCdcblxudmFyIG9yYWNsZSA9ICByZXF1aXJlKCcuLi9kYXRhYmFzZS9jb25uZWN0aW9uLmpzJylcblxuZnVuY3Rpb24gZmVjaGFWYWxpZGEoZmVjaGEpIHtcblxuICAgIGlmKGZlY2hhLmxlbmd0aCAhPT0gOCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgZWplID0gZmVjaGEuc3Vic3RyKDAsNCk7XG4gICAgY29uc3QgbWVzID0gZmVjaGEuc3Vic3RyKDQsMik7XG4gICAgY29uc3QgZGlhID0gZmVjaGEuc3Vic3RyKDYsMik7XG5cbiAgICBjb25zb2xlLmxvZyhkaWEgKyAnLycgKyBtZXMgKyAnLycgKyBlamUpXG5cbiAgICB2YXIgZGF0ZSA9IG1vbWVudChmZWNoYSwnWVlZWU1NREQnKTtcbiAgICBjb25zb2xlLmxvZyhkYXRlKTtcbiAgICBpZiAoZGF0ZS5pc1ZhbGlkKCkpIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuXG59XG5cbmV4cG9ydCBjb25zdCBnZXRDaXRhcyA9IGFzeW5jKHJlcSwgcmVzLCBuZXh0KSA9PntcbiAgIFxuICAgIC8vVmFsaWRhciBmZWNoYSBcbiBcbiAgICB2YXIgZmVjaGEgPSByZXEucXVlcnkuZmVjaGE7XG4gICAgY29uc29sZS5sb2coZmVjaGEpXG5cbiAgICBpZiAoZmVjaGEgPT09dW5kZWZpbmVkIHx8ICFmZWNoYVZhbGlkYShmZWNoYSkpIHtcbiAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XG4gICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6NTAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6XCJGZWNoYSBFcnJvbmVhXCIsXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRfbWVzc2FnZTogXCJJbnRyb2R1emNhIHVuYSBmZWNoYSB2w6FsaWRhIChZWVlZTU1ERClcIlxuICAgICAgICAgICAgfSkpO1xuICAgICAgICBcbiAgICB9IGVsc2Uge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZWplID0gZmVjaGEuc3Vic3RyKDAsNCk7XG4gICAgICAgIGNvbnN0IG1lcyA9IGZlY2hhLnN1YnN0cig0LDIpO1xuICAgICAgICBjb25zdCBkaWEgPSBmZWNoYS5zdWJzdHIoNiwyKTtcbiAgICAgICAgY29uc3QgZmVjaGFjaXRhID0gJzE4LzEwLzIwMjInXG4gICAgICAgIGNvbnN0IGZlY2hhY2l0YW1hc3VubyA9ICcxOS8xMC8yMDIyJ1xuXG4gICAgICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBvcmFjbGUuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICBwb29sLmV4ZWN1dGUoXCJTRUxFQ1QgKiBGUk9NIFYwN19JZHJ1c19jZXhfZGlhcyBXSEVSRSBmZWNoYV9jaXRhID4gdG9fZGF0ZSg6ZmVjaGFjaXRhLCdERC9NTS9ZWVlZJykgQU5EIGZlY2hhX2NpdGEgPCB0b19kYXRlKDpmZWNoYWNpdGFtYXN1bm8sJ0REL01NL1lZWVknKVwiICxbZmVjaGFjaXRhLCBmZWNoYWNpdGFtYXN1bm9dLCB7b3V0Rm9ybWF0OiBvcmFjbGVkYi5PQkpFQ1R9LCBcbiAgICAgICAgZnVuY3Rpb24oZXJyLHJlc3VsdCkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyAoJ0Vycm9yIGVsIGVqZWN1dGFyIGxhIHF1ZXJ5OicgKyBlcnIubWVzc2FnZSlcbiAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoNTAwLCB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xuICAgICAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOjUwMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOlwiRXJyb3IgcHJpdmF0ZSB0aGluZ3NcIixcbiAgICAgICAgICAgICAgICBkZXRhaWxlZF9tZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXMud3JpdGVIZWFkKDIwMCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9KTtcbiAgICAgICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkocmVzdWx0LnJvd3MpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICApO1xufSBcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUEyQjtBQUUzQixJQUFJQSxNQUFNLEdBQUlDLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztBQUVsRCxTQUFTQyxXQUFXLENBQUNDLEtBQUssRUFBRTtFQUV4QixJQUFHQSxLQUFLLENBQUNDLE1BQU0sS0FBSyxDQUFDLEVBQUU7SUFDbkIsT0FBTyxLQUFLO0VBQ2hCO0VBQ0EsTUFBTUMsR0FBRyxHQUFHRixLQUFLLENBQUNHLE1BQU0sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0VBQzdCLE1BQU1DLEdBQUcsR0FBR0osS0FBSyxDQUFDRyxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztFQUM3QixNQUFNRSxHQUFHLEdBQUdMLEtBQUssQ0FBQ0csTUFBTSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7RUFFN0JHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixHQUFHLEdBQUcsR0FBRyxHQUFHRCxHQUFHLEdBQUcsR0FBRyxHQUFHRixHQUFHLENBQUM7RUFFeEMsSUFBSU0sSUFBSSxHQUFHLElBQUFDLGVBQU0sRUFBQ1QsS0FBSyxFQUFDLFVBQVUsQ0FBQztFQUNuQ00sT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUksQ0FBQztFQUNqQixJQUFJQSxJQUFJLENBQUNFLE9BQU8sRUFBRSxFQUFFLE9BQU8sSUFBSTtFQUUvQixPQUFPLEtBQUs7QUFFaEI7QUFFTyxNQUFNQyxRQUFRLEdBQUcsT0FBTUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSTtFQUU1Qzs7RUFFQSxJQUFJZCxLQUFLLEdBQUdZLEdBQUcsQ0FBQ0csS0FBSyxDQUFDZixLQUFLO0VBQzNCTSxPQUFPLENBQUNDLEdBQUcsQ0FBQ1AsS0FBSyxDQUFDO0VBRWxCLElBQUlBLEtBQUssS0FBSWdCLFNBQVMsSUFBSSxDQUFDakIsV0FBVyxDQUFDQyxLQUFLLENBQUMsRUFBRTtJQUMzQ2EsR0FBRyxDQUFDSSxTQUFTLENBQUMsR0FBRyxFQUFFO01BQUMsY0FBYyxFQUFFO0lBQWtCLENBQUMsQ0FBQztJQUNwREosR0FBRyxDQUFDSyxHQUFHLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO01BQ25CQyxNQUFNLEVBQUMsR0FBRztNQUNWQyxPQUFPLEVBQUMsZUFBZTtNQUN2QkMsZ0JBQWdCLEVBQUU7SUFDdEIsQ0FBQyxDQUFDLENBQUM7RUFFWCxDQUFDLE1BQU07SUFFSCxNQUFNckIsR0FBRyxHQUFHRixLQUFLLENBQUNHLE1BQU0sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzdCLE1BQU1DLEdBQUcsR0FBR0osS0FBSyxDQUFDRyxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUM3QixNQUFNRSxHQUFHLEdBQUdMLEtBQUssQ0FBQ0csTUFBTSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDN0IsTUFBTXFCLFNBQVMsR0FBRyxZQUFZO0lBQzlCLE1BQU1DLGVBQWUsR0FBRyxZQUFZO0lBRXBDLE1BQU1DLElBQUksR0FBRyxNQUFNN0IsTUFBTSxDQUFDOEIsYUFBYSxFQUFFO0lBQ3pDRCxJQUFJLENBQUNFLE9BQU8sQ0FBQyw4SUFBOEksRUFBRSxDQUFDSixTQUFTLEVBQUVDLGVBQWUsQ0FBQyxFQUFFO01BQUNJLFNBQVMsRUFBRUMsaUJBQVEsQ0FBQ0M7SUFBTSxDQUFDLEVBQ3ZOLFVBQVNDLEdBQUcsRUFBQ0MsTUFBTSxFQUFFO01BQ3JCLElBQUlELEdBQUcsRUFBRTtRQUNMMUIsT0FBTyxDQUFDQyxHQUFHLENBQUUsNkJBQTZCLEdBQUd5QixHQUFHLENBQUNWLE9BQU8sQ0FBQztRQUN6RFQsR0FBRyxDQUFDSSxTQUFTLENBQUMsR0FBRyxFQUFFO1VBQUMsY0FBYyxFQUFFO1FBQWtCLENBQUMsQ0FBQztRQUN4REosR0FBRyxDQUFDSyxHQUFHLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO1VBQ25CQyxNQUFNLEVBQUMsR0FBRztVQUNWQyxPQUFPLEVBQUMsc0JBQXNCO1VBQzlCQyxnQkFBZ0IsRUFBRVMsR0FBRyxDQUFDVjtRQUMxQixDQUFDLENBQUMsQ0FBQztNQUNQLENBQUMsTUFDSTtRQUVEVCxHQUFHLENBQUNJLFNBQVMsQ0FBQyxHQUFHLEVBQUU7VUFBQyxjQUFjLEVBQUU7UUFBa0IsQ0FBQyxDQUFDO1FBQ3hESixHQUFHLENBQUNLLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDQyxTQUFTLENBQUNhLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLENBQUM7TUFDeEM7SUFDSixDQUFDLENBQ0E7RUFDTDtBQUNBLENBQUM7QUFBQSJ9","map":{"version":3,"names":["oracle","require","fechaValida","fecha","length","eje","substr","mes","dia","console","log","date","moment","isValid","getCitas","req","res","next","query","undefined","writeHead","end","JSON","stringify","status","message","detailed_message","fechacita","fechacitamasuno","pool","getConnection","execute","outFormat","oracledb","OBJECT","err","result","rows"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/controllers/","sources":["citas.controller.js"],"sourcesContent":["import oracledb from 'oracledb';\nimport moment from 'moment'\n\nvar oracle =  require('../database/connection.js')\n\nfunction fechaValida(fecha) {\n\n    if(fecha.length !== 8) {\n        return false\n    }\n    const eje = fecha.substr(0,4);\n    const mes = fecha.substr(4,2);\n    const dia = fecha.substr(6,2);\n\n    console.log(dia + '/' + mes + '/' + eje)\n\n    var date = moment(fecha,'YYYYMMDD');\n    console.log(date);\n    if (date.isValid()) return true;\n\n    return false;\n\n}\n\nexport const getCitas = async(req, res, next) =>{\n   \n    //Validar fecha \n \n    var fecha = req.query.fecha;\n    console.log(fecha)\n\n    if (fecha ===undefined || !fechaValida(fecha)) {\n        res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Fecha Erronea\",\n                detailed_message: \"Introduzca una fecha válida (YYYYMMDD)\"\n            }));\n        \n    } else {\n        \n        const eje = fecha.substr(0,4);\n        const mes = fecha.substr(4,2);\n        const dia = fecha.substr(6,2);\n        const fechacita = '18/10/2022'\n        const fechacitamasuno = '19/10/2022'\n\n        const pool = await oracle.getConnection();\n        pool.execute(\"SELECT * FROM V07_Idrus_cex_dias WHERE fecha_cita > to_date(:fechacita,'DD/MM/YYYY') AND fecha_cita < to_date(:fechacitamasuno,'DD/MM/YYYY')\" ,[fechacita, fechacitamasuno], {outFormat: oracledb.OBJECT}, \n        function(err,result) {\n        if (err) {\n            console.log ('Error el ejecutar la query:' + err.message)\n            res.writeHead(500, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify({\n                status:500,\n                message:\"Error private things\",\n                detailed_message: err.message\n            }));\n        }\n        else {\n            \n            res.writeHead(200, {'Content-Type': 'application/json'});\n            res.end(JSON.stringify(result.rows));\n        }\n    }\n    );\n} \n}\n"],"mappings":";;;;;;AAAA;AACA;AAA2B;AAE3B,IAAIA,MAAM,GAAIC,OAAO,CAAC,2BAA2B,CAAC;AAElD,SAASC,WAAW,CAACC,KAAK,EAAE;EAExB,IAAGA,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;IACnB,OAAO,KAAK;EAChB;EACA,MAAMC,GAAG,GAAGF,KAAK,CAACG,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC;EAC7B,MAAMC,GAAG,GAAGJ,KAAK,CAACG,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC;EAC7B,MAAME,GAAG,GAAGL,KAAK,CAACG,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC;EAE7BG,OAAO,CAACC,GAAG,CAACF,GAAG,GAAG,GAAG,GAAGD,GAAG,GAAG,GAAG,GAAGF,GAAG,CAAC;EAExC,IAAIM,IAAI,GAAG,IAAAC,eAAM,EAACT,KAAK,EAAC,UAAU,CAAC;EACnCM,OAAO,CAACC,GAAG,CAACC,IAAI,CAAC;EACjB,IAAIA,IAAI,CAACE,OAAO,EAAE,EAAE,OAAO,IAAI;EAE/B,OAAO,KAAK;AAEhB;AAEO,MAAMC,QAAQ,GAAG,OAAMC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EAE5C;;EAEA,IAAId,KAAK,GAAGY,GAAG,CAACG,KAAK,CAACf,KAAK;EAC3BM,OAAO,CAACC,GAAG,CAACP,KAAK,CAAC;EAElB,IAAIA,KAAK,KAAIgB,SAAS,IAAI,CAACjB,WAAW,CAACC,KAAK,CAAC,EAAE;IAC3Ca,GAAG,CAACI,SAAS,CAAC,GAAG,EAAE;MAAC,cAAc,EAAE;IAAkB,CAAC,CAAC;IACpDJ,GAAG,CAACK,GAAG,CAACC,IAAI,CAACC,SAAS,CAAC;MACnBC,MAAM,EAAC,GAAG;MACVC,OAAO,EAAC,eAAe;MACvBC,gBAAgB,EAAE;IACtB,CAAC,CAAC,CAAC;EAEX,CAAC,MAAM;IAEH,MAAMrB,GAAG,GAAGF,KAAK,CAACG,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC;IAC7B,MAAMC,GAAG,GAAGJ,KAAK,CAACG,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC;IAC7B,MAAME,GAAG,GAAGL,KAAK,CAACG,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC;IAC7B,MAAMqB,SAAS,GAAG,YAAY;IAC9B,MAAMC,eAAe,GAAG,YAAY;IAEpC,MAAMC,IAAI,GAAG,MAAM7B,MAAM,CAAC8B,aAAa,EAAE;IACzCD,IAAI,CAACE,OAAO,CAAC,8IAA8I,EAAE,CAACJ,SAAS,EAAEC,eAAe,CAAC,EAAE;MAACI,SAAS,EAAEC,iBAAQ,CAACC;IAAM,CAAC,EACvN,UAASC,GAAG,EAACC,MAAM,EAAE;MACrB,IAAID,GAAG,EAAE;QACL1B,OAAO,CAACC,GAAG,CAAE,6BAA6B,GAAGyB,GAAG,CAACV,OAAO,CAAC;QACzDT,GAAG,CAACI,SAAS,CAAC,GAAG,EAAE;UAAC,cAAc,EAAE;QAAkB,CAAC,CAAC;QACxDJ,GAAG,CAACK,GAAG,CAACC,IAAI,CAACC,SAAS,CAAC;UACnBC,MAAM,EAAC,GAAG;UACVC,OAAO,EAAC,sBAAsB;UAC9BC,gBAAgB,EAAES,GAAG,CAACV;QAC1B,CAAC,CAAC,CAAC;MACP,CAAC,MACI;QAEDT,GAAG,CAACI,SAAS,CAAC,GAAG,EAAE;UAAC,cAAc,EAAE;QAAkB,CAAC,CAAC;QACxDJ,GAAG,CAACK,GAAG,CAACC,IAAI,CAACC,SAAS,CAACa,MAAM,CAACC,IAAI,CAAC,CAAC;MACxC;IACJ,CAAC,CACA;EACL;AACA,CAAC;AAAA"}},"mtime":1666014723298},"{\"assumptions\":{},\"sourceRoot\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"filename\":\"/home/c07-administrador/js/oracle/backends/idrus/routes/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/c07-administrador/js/oracle/backends/idrus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nvar jwt = require('jsonwebtoken');\nvar config = require('../config.js');\nfunction auth(role) {\n  return async function (req, res, next) {\n    var token;\n    var payload;\n    if (!req.headers.authorization) {\n      return res.status(401).send({\n        message: \"No autorizado\"\n      });\n    }\n    token = req.headers.authorization.split(' ')[1];\n    try {\n      payload = jwt.verify(token, process.env.JWTSECRETKEY);\n    } catch (e) {\n      if (e.name === 'TokenExpiredError') {\n        res.status(401).send({\n          message: \"Autorización expirada. Contacte con HospitalTenerife@sjd.es\"\n        });\n      } else {\n        res.status(401).send({\n          message: \"Autorización invalida\"\n        });\n      }\n      return;\n    }\n    if (!role || role === payload.role) {\n      req.user = {\n        email: payload.sub,\n        role: payload.role\n      };\n      next();\n    } else {\n      res.status(401).send({\n        message: 'No estas autorizado'\n      });\n    }\n  };\n}\nmodule.exports = auth;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwiY29uZmlnIiwiYXV0aCIsInJvbGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJwYXlsb2FkIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsInNwbGl0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVFNFQ1JFVEtFWSIsImUiLCJuYW1lIiwidXNlciIsImVtYWlsIiwic3ViIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvYzA3LWFkbWluaXN0cmFkb3IvanMvb3JhY2xlL2JhY2tlbmRzL2lkcnVzL3JvdXRlcy8iLCJzb3VyY2VzIjpbImF1dGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG52YXIgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG52YXIgY29uZmlnID0gIHJlcXVpcmUgKCcuLi9jb25maWcuanMnKVxuXG5mdW5jdGlvbiBhdXRoKHJvbGUpIHtcblxuICAgIHJldHVybiBhc3luYyBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuXG4gICAgICAgIHZhciB0b2tlbjtcbiAgICAgICAgdmFyIHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoe21lc3NhZ2U6IFwiTm8gYXV0b3JpemFkb1wifSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRva2VuPXJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBheWxvYWQ9and0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUU0VDUkVUS0VZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfWNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7bWVzc2FnZTogXCJBdXRvcml6YWNpw7NuIGV4cGlyYWRhLiBDb250YWN0ZSBjb24gSG9zcGl0YWxUZW5lcmlmZUBzamQuZXNcIn0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe21lc3NhZ2U6IFwiQXV0b3JpemFjacOzbiBpbnZhbGlkYVwifSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoIXJvbGUgfHwgcm9sZSA9PT0gcGF5bG9hZC5yb2xlICkge1xuICAgICAgICAgICAgcmVxLnVzZXIgPSB7XG4gICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuc3ViLFxuICAgICAgICAgICAgICAgIHJvbGU6IHBheWxvYWQucm9sZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHttZXNzYWdlOiAnTm8gZXN0YXMgYXV0b3JpemFkbyd9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gYXV0aDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFJQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDakMsSUFBSUMsTUFBTSxHQUFJRCxPQUFPLENBQUUsY0FBYyxDQUFDO0FBRXRDLFNBQVNFLElBQUksQ0FBQ0MsSUFBSSxFQUFFO0VBRWhCLE9BQU8sZ0JBQWVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFFbEMsSUFBSUMsS0FBSztJQUNULElBQUlDLE9BQU87SUFFWCxJQUFJLENBQUNKLEdBQUcsQ0FBQ0ssT0FBTyxDQUFDQyxhQUFhLEVBQUU7TUFDNUIsT0FBT0wsR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFDQyxPQUFPLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDdkQ7SUFDQU4sS0FBSyxHQUFDSCxHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsYUFBYSxDQUFDSSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTdDLElBQUk7TUFDSk4sT0FBTyxHQUFDVCxHQUFHLENBQUNnQixNQUFNLENBQUNSLEtBQUssRUFBRVMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFlBQVksQ0FBQztJQUVuRCxDQUFDLFFBQU9DLENBQUMsRUFBRTtNQUNYLElBQUlBLENBQUMsQ0FBQ0MsSUFBSSxLQUFLLG1CQUFtQixFQUFFO1FBQ3BDZixHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQUNDLE9BQU8sRUFBRTtRQUE2RCxDQUFDLENBQUM7TUFDOUYsQ0FBQyxNQUFNO1FBQ1BSLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFBQ0MsT0FBTyxFQUFFO1FBQXVCLENBQUMsQ0FBQztNQUN4RDtNQUNBO0lBQ0E7SUFDSixJQUFJLENBQUNWLElBQUksSUFBSUEsSUFBSSxLQUFLSyxPQUFPLENBQUNMLElBQUksRUFBRztNQUNqQ0MsR0FBRyxDQUFDaUIsSUFBSSxHQUFHO1FBQ1BDLEtBQUssRUFBRWQsT0FBTyxDQUFDZSxHQUFHO1FBQ2xCcEIsSUFBSSxFQUFFSyxPQUFPLENBQUNMO01BQ2xCLENBQUM7TUFDREcsSUFBSSxFQUFFO0lBQ1YsQ0FBQyxNQUFNO01BQ0hELEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBQ0MsT0FBTyxFQUFFO01BQXFCLENBQUMsQ0FBQztJQUUxRDtFQUVKLENBQUM7QUFFTDtBQUNBVyxNQUFNLENBQUNDLE9BQU8sR0FBR3ZCLElBQUkifQ==","map":{"version":3,"names":["jwt","require","config","auth","role","req","res","next","token","payload","headers","authorization","status","send","message","split","verify","process","env","JWTSECRETKEY","e","name","user","email","sub","module","exports"],"sourceRoot":"/home/c07-administrador/js/oracle/backends/idrus/routes/","sources":["auth.js"],"sourcesContent":["\nvar jwt = require('jsonwebtoken');\nvar config =  require ('../config.js')\n\nfunction auth(role) {\n\n    return async function(req, res, next) {\n\n        var token;\n        var payload;\n\n        if (!req.headers.authorization) {\n            return res.status(401).send({message: \"No autorizado\"})\n            }\n            token=req.headers.authorization.split(' ')[1];\n            \n            try {\n            payload=jwt.verify(token, process.env.JWTSECRETKEY);\n            \n            }catch (e) {\n            if (e.name === 'TokenExpiredError') {\n            res.status(401).send({message: \"Autorización expirada. Contacte con HospitalTenerife@sjd.es\"})\n            } else {\n            res.status(401).send({message: \"Autorización invalida\"})\n            }\n            return\n            }\n        if (!role || role === payload.role ) {\n            req.user = {\n                email: payload.sub,\n                role: payload.role\n            };\n            next();\n        } else {\n            res.status(401).send({message: 'No estas autorizado'});\n\n        }\n\n    }\n\n}\nmodule.exports = auth;\n"],"mappings":";;AACA,IAAIA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AACjC,IAAIC,MAAM,GAAID,OAAO,CAAE,cAAc,CAAC;AAEtC,SAASE,IAAI,CAACC,IAAI,EAAE;EAEhB,OAAO,gBAAeC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAElC,IAAIC,KAAK;IACT,IAAIC,OAAO;IAEX,IAAI,CAACJ,GAAG,CAACK,OAAO,CAACC,aAAa,EAAE;MAC5B,OAAOL,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAACC,OAAO,EAAE;MAAe,CAAC,CAAC;IACvD;IACAN,KAAK,GAACH,GAAG,CAACK,OAAO,CAACC,aAAa,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAE7C,IAAI;MACJN,OAAO,GAACT,GAAG,CAACgB,MAAM,CAACR,KAAK,EAAES,OAAO,CAACC,GAAG,CAACC,YAAY,CAAC;IAEnD,CAAC,QAAOC,CAAC,EAAE;MACX,IAAIA,CAAC,CAACC,IAAI,KAAK,mBAAmB,EAAE;QACpCf,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAACC,OAAO,EAAE;QAA6D,CAAC,CAAC;MAC9F,CAAC,MAAM;QACPR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAACC,OAAO,EAAE;QAAuB,CAAC,CAAC;MACxD;MACA;IACA;IACJ,IAAI,CAACV,IAAI,IAAIA,IAAI,KAAKK,OAAO,CAACL,IAAI,EAAG;MACjCC,GAAG,CAACiB,IAAI,GAAG;QACPC,KAAK,EAAEd,OAAO,CAACe,GAAG;QAClBpB,IAAI,EAAEK,OAAO,CAACL;MAClB,CAAC;MACDG,IAAI,EAAE;IACV,CAAC,MAAM;MACHD,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAACC,OAAO,EAAE;MAAqB,CAAC,CAAC;IAE1D;EAEJ,CAAC;AAEL;AACAW,MAAM,CAACC,OAAO,GAAGvB,IAAI"}},"mtime":1666005896919}}